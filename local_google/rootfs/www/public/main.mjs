/*! For license information please see main.mjs.LICENSE.txt */
var e={56:(e,t,n)=>{e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=n(980)},function(e,t){e.exports=n(784)},function(e,t,n){n.r(t);var r=n(1),i=n(0),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=0,a=r.forwardRef((function(e,t){var n=e.title,i=void 0===n?null:n,a=e.description,l=void 0===a?null:a,c=e.size,u=void 0===c?null:c,h=e.color,d=void 0===h?"currentColor":h,p=e.horizontal,f=void 0===p?null:p,m=e.vertical,g=void 0===m?null:m,y=e.rotate,b=void 0===y?null:y,v=e.spin,x=void 0===v?null:v,w=e.style,S=void 0===w?{}:w,k=e.children,P=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);o++;var T,O=null!==x&&x,C=r.Children.map(k,(function(e){var t=e;!0!==O&&(O=!0===(null===x?t.props.spin:x));var n=t.props.size;"number"==typeof u&&"number"==typeof t.props.size&&(n=t.props.size/u);var i={size:n,color:null===d?t.props.color:d,horizontal:null===f?t.props.horizontal:f,vertical:null===g?t.props.vertical:g,rotate:null===b?t.props.rotate:b,spin:null===x?t.props.spin:x,inStack:!0};return r.cloneElement(t,i)}));null!==u&&(S.width="string"==typeof u?u:1.5*u+"rem");var A,E="stack_labelledby_"+o,N="stack_describedby_"+o;if(i)T=l?E+" "+N:E;else if(A="presentation",l)throw new Error("title attribute required when description is set");return r.createElement("svg",s({ref:t,viewBox:"0 0 24 24",style:S,role:A,"aria-labelledby":T},P),i&&r.createElement("title",{id:E},i),l&&r.createElement("desc",{id:N},l),O&&r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),C)}));a.displayName="Stack",a.propTypes={size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),children:i.oneOfType([i.arrayOf(i.node),i.node]).isRequired,className:i.string,style:i.object},a.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var l=a;n.d(t,"Icon",(function(){return h})),n.d(t,"Stack",(function(){return l}));var c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},u=0,h=r.forwardRef((function(e,t){var n=e.path,i=e.id,s=void 0===i?++u:i,o=e.title,a=void 0===o?null:o,l=e.description,h=void 0===l?null:l,d=e.size,p=void 0===d?null:d,f=e.color,m=void 0===f?"currentColor":f,g=e.horizontal,y=void 0!==g&&g,b=e.vertical,v=void 0!==b&&b,x=e.rotate,w=void 0===x?0:x,S=e.spin,k=void 0!==S&&S,P=e.style,T=void 0===P?{}:P,O=e.inStack,C=void 0!==O&&O,A=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),E={},N=[];null!==p&&(C?N.push("scale("+p+")"):(T.width="string"==typeof p?p:1.5*p+"rem",T.height=T.width)),y&&N.push("scaleX(-1)"),v&&N.push("scaleY(-1)"),0!==w&&N.push("rotate("+w+"deg)"),null!==m&&(E.fill=m);var M=r.createElement("path",c({d:n,style:E},C?A:{})),I=M;N.length>0&&(T.transform=N.join(" "),T.transformOrigin="center",C&&(I=r.createElement("g",{style:T},M,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var D,R=I,L=!0===k||"number"!=typeof k?2:k,_=!C&&(y||v);if(L<0&&(_=!_),k&&(R=r.createElement("g",{style:{animation:"spin"+(_?"-inverse":"")+" linear "+Math.abs(L)+"s infinite",transformOrigin:"center"}},I,!(y||v||0!==w)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),C)return R;var B,F="icon_labelledby_"+s,j="icon_describedby_"+s;if(a)D=h?F+" "+j:F;else if(B="presentation",h)throw new Error("title attribute required when description is set");return r.createElement("svg",c({ref:t,viewBox:"0 0 24 24",style:T,role:B,"aria-labelledby":D},A),a&&r.createElement("title",{id:F},a),h&&r.createElement("desc",{id:j},h),!C&&k&&(_?r.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),R)}));h.displayName="Icon",h.propTypes={path:i.string.isRequired,size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),style:i.object,inStack:i.bool,className:i.string},h.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},t.default=h}])},262:(e,t,n)=>{var r=n(586);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},980:(e,t,n)=>{e.exports=n(262)()},586:e=>{e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},967:(e,t,n)=>{var r=n(784),i=n(616);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}var _,B=Object.assign;function F(e){if(void 0===_)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);_=t&&t[1]||""}return"\n"+_+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return V(e.type,!1);case 11:return V(e.type.render,!1);case 1:return V(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case T:return"Profiler";case P:return"StrictMode";case E:return"Suspense";case N:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case O:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return U(e(t))}catch(e){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Y(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,Pe=null;function Te(e){if(e=vi(e)){if("function"!=typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function Oe(e){ke?Pe?Pe.push(e):Pe=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Pe;if(Pe=ke=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ae(e,t){return e(t)}function Ee(){}var Ne=!1;function Me(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ae(e,t,n)}finally{Ne=!1,(null!==ke||null!==Pe)&&(Ee(),Ce())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){De=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){De=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var _e=!1,Be=null,Fe=!1,je=null,Ve={onError:function(e){_e=!0,Be=e}};function ze(e,t,n,r,i,s,o,a,l){_e=!1,Be=null,Le.apply(Ve,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(s(188))}function $e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Qe=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ge=i.unstable_requestPaint,Xe=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null,ot=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2,ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!=(s&=o)&&(r=ht(s))}else 0!=(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!=(4194240&s)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0==(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var vt=0;function xt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var wt,St,kt,Pt,Tt,Ot=!1,Ct=[],At=null,Et=null,Nt=null,Mt=new Map,It=new Map,Dt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function _t(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=vi(t))&&St(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=bi(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Tt(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function jt(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Ot=!1,null!==At&&Ft(At)&&(At=null),null!==Et&&Ft(Et)&&(Et=null),null!==Nt&&Ft(Nt)&&(Nt=null),Mt.forEach(jt),It.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ot||(Ot=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Ut(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&zt(At,e),null!==Et&&zt(Et,e),null!==Nt&&zt(Nt,e),Mt.forEach(t),It.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Bt(n),null===n.blockedOn&&Dt.shift()}var Ht=x.ReactCurrentBatchConfig,Wt=!0;function $t(e,t,n,r){var i=vt,s=Ht.transition;Ht.transition=null;try{vt=1,Qt(e,t,n,r)}finally{vt=i,Ht.transition=s}}function qt(e,t,n,r){var i=vt,s=Ht.transition;Ht.transition=null;try{vt=4,Qt(e,t,n,r)}finally{vt=i,Ht.transition=s}}function Qt(e,t,n,r){if(Wt){var i=Jt(e,t,n,r);if(null===i)Wr(e,t,r,Kt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=_t(At,e,t,n,r,i),!0;case"dragenter":return Et=_t(Et,e,t,n,r,i),!0;case"mouseover":return Nt=_t(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Mt.set(s,_t(Mt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,It.set(s,_t(It.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=vi(i);if(null!==s&&wt(s),null===(s=Jt(e,t,n,r))&&Wr(e,t,r,Kt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Kt=null;function Jt(e,t,n,r){if(Kt=null,null!==(e=bi(e=we(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Yt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Yt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=B({},cn,{view:0,detail:0}),dn=sn(hn),pn=B({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=sn(pn),mn=sn(B({},pn,{dataTransfer:0})),gn=sn(B({},hn,{relatedTarget:0})),yn=sn(B({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=B({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=sn(bn),xn=sn(B({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Tn(){return Pn}var On=B({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(On),An=sn(B({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=sn(B({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=sn(B({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=B({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=sn(Mn),Dn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var _n=u&&"TextEvent"in window&&!Ln,Bn=u&&(!Rn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1,Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function $n(e,t,n,r){Oe(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Qn=null;function Kn(e){Fr(e,0)}function Jn(e){if(Q(xi(e)))return e}function Gn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Yn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Yn=Zn}else Yn=!1;Xn=Yn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Qn=qn=null)}function nr(e){if("value"===e.propertyName&&Jn(Qn)){var t=[];$n(t,Qn,e,we(e)),Me(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Qn)}function sr(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var ar="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(ar(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,br=null,vr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==K(r)||(r="selectionStart"in(r=gr)&&pr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=qr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Pr={};function Tr(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Pr)return kr[e]=n[t];return e}u&&(Pr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Or=Tr("animationend"),Cr=Tr("animationiteration"),Ar=Tr("animationstart"),Er=Tr("transitionend"),Nr=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){Nr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Mr.length;Dr++){var Rr=Mr[Dr];Ir(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Ir(Or,"onAnimationEnd"),Ir(Cr,"onAnimationIteration"),Ir(Ar,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_r=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),_e){if(!_e)throw Error(s(198));var u=Be;_e=!1,Be=null,Fe||(Fe=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Br(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Br(i,a,c),s=l}}}if(Fe)throw e=je,Fe=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(_r.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Gt(t)){case 1:var i=$t;break;case 4:i=qt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=bi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Me((function(){var r=s,i=we(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Or:case Cr:case Ar:l=yn;break;case Er:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!=(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&null!=(m=Ie(f,d))&&u.push($r(f,m,p))),h)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!bi(c)&&!c[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bi(c):null)&&(c!==(h=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:xi(l),p=null==c?a:xi(c),(a=new u(m,f+"leave",l,n,i)).target=h,a.relatedTarget=p,m=null,bi(i)===r&&((u=new u(d,f+"enter",c,n,i)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=Qr(p))f++;for(p=0,m=d;m;m=Qr(m))p++;for(;0<f-p;)u=Qr(u),f--;for(;0<p-f;)d=Qr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Qr(u),d=Qr(d)}u=null}else u=null;null!==l&&Kr(o,a,l,u,!1),null!==c&&null!==h&&Kr(o,h,c,u,!0)}if("select"===(l=(a=r?xi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Gn;else if(Wn(a))if(Xn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?$n(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?xi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,br=null);break;case"focusout":br=yr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,xr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,i)}var b;if(Rn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Un?Vn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Bn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==v?"onCompositionEnd"===v&&Un&&(b=en()):(Yt="value"in(Xt=i)?Xt.value:Xt.textContent,Un=!0)),0<(y=qr(r,v)).length&&(v=new xn(v,e,null,n,i),o.push({event:v,listeners:y}),(b||null!==(b=zn(n)))&&(v.data=b))),(b=_n?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Fn);case"textInput":return(e=t.data)===Fn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Zt=Yt=Xt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=qr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=b)}Fr(o,t)}))}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ie(e,n))&&r.unshift($r(e,s,i)),null!=(s=Ie(e,t))&&r.push($r(e,s,i))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ie(n,s))&&o.unshift($r(n,l,a)):i||null!=(l=Ie(n,s))&&o.push($r(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Jr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Xr(e){return("string"==typeof e?e:""+e).replace(Jr,"\n").replace(Gr,"")}function Yr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,si="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ut(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function bi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function vi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[pi]||null}var Si=[],ki=-1;function Pi(e){return{current:e}}function Ti(e){0>ki||(e.current=Si[ki],Si[ki]=null,ki--)}function Oi(e,t){ki++,Si[ki]=e.current,e.current=t}var Ci={},Ai=Pi(Ci),Ei=Pi(!1),Ni=Ci;function Mi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ii(e){return null!=e.childContextTypes}function Di(){Ti(Ei),Ti(Ai)}function Ri(e,t,n){if(Ai.current!==Ci)throw Error(s(168));Oi(Ai,t),Oi(Ei,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,H(e)||"Unknown",i));return B({},n,r)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ni=Ai.current,Oi(Ai,e),Oi(Ei,Ei.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ei),Ti(Ai),Oi(Ai,e)):Ti(Ei),Oi(Ei,n)}var Fi=null,ji=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Ui(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=vt;try{var n=Fi;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,ji=!1}catch(t){throw null!==Fi&&(Fi=Fi.slice(e+1)),Qe(Ze,Ui),t}finally{vt=t,Vi=!1}}return null}var Hi=[],Wi=0,$i=null,qi=0,Qi=[],Ki=0,Ji=null,Gi=1,Xi="";function Yi(e,t){Hi[Wi++]=qi,Hi[Wi++]=$i,$i=e,qi=t}function Zi(e,t,n){Qi[Ki++]=Gi,Qi[Ki++]=Xi,Qi[Ki++]=Ji,Ji=e;var r=Gi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gi=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else Gi=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Yi(e,1),Zi(e,1,0))}function ts(e){for(;e===$i;)$i=Hi[--Wi],Hi[Wi]=null,qi=Hi[--Wi],Hi[Wi]=null;for(;e===Ji;)Ji=Qi[--Ki],Qi[Ki]=null,Xi=Qi[--Ki],Qi[Ki]=null,Gi=Qi[--Ki],Qi[Ki]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Gi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function ps(){rs=ns=null,is=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ms=x.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Pi(null),bs=null,vs=null,xs=null;function ws(){xs=vs=bs=null}function Ss(e){var t=ys.current;Ti(ys),e._currentValue=t}function ks(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){bs=e,xs=vs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(xa=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(xs!==e)if(e={context:e,memoizedValue:t,next:null},null===vs){if(null===bs)throw Error(s(308));vs=e,bs.dependencies={lanes:0,firstContext:e}}else vs=vs.next=e;return t}var Os=null;function Cs(e){null===Os?Os=[e]:Os.push(e)}function As(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Es(e,r)}function Es(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ns=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Is(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Es(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Es(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function _s(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&(a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l)}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,p=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(d=t,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(d="function"==typeof(f=m.payload)?f.call(p,h,d):f))break e;h=B({},h,d);break e;case 2:Ns=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);_l|=o,e.lanes=o,e.memoizedState=h}}function Fs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var js=(new r.Component).refs;function Vs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Ds(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=Rs(e,s,i))&&(nc(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Ds(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Rs(e,s,i))&&(nc(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ds(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Rs(e,i,r))&&(nc(t,e,r,n),Ls(t,e,r))}};function Us(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(i,s))}function Hs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"==typeof s&&null!==s?s=Ts(s):(i=Ii(t)?Ni:Ai.current,s=(r=null!=(r=t.contextTypes))?Mi(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function $s(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=js,Ms(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=Ts(s):(s=Ii(t)?Ni:Ai.current,i.context=Mi(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function qs(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Qs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ks(e){return(0,e._init)(e._payload)}function Js(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===I&&Ks(s)===t.type)?((r=i(t,n.props)).ref=qs(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=qs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=qs(e,null,t),n.return=e,n;case S:return(t=Fc(t,e.mode,n)).return=e,t;case I:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Qs(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case I:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Qs(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Qs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Yi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Yi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=f(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Yi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var v=p(i,m,b.value,c);if(null===v){null===m&&(m=y);break}e&&m&&null===v.alternate&&t(i,m),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v,m=y}if(b.done)return n(i,m),is&&Yi(i,g),u;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=d(i,b.value,c))&&(a=o(b,a,g),null===h?u=b:h.sibling=b,h=b);return is&&Yi(i,g),u}for(m=r(i,m);!b.done;g++,b=l.next())null!==(b=f(m,i,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),a=o(b,a,g),null===h?u=b:h.sibling=b,h=b);return e&&m.forEach((function(e){return t(i,e)})),is&&Yi(i,g),u}return function e(r,s,o,l){if("object"==typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===I&&Ks(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=qs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===k?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Rc(o.type,o.key,o.props,null,r.mode,l)).ref=qs(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(o,r.mode,l)).return=r,r=s}return a(r);case I:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Qs(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Bc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Gs=Js(!0),Xs=Js(!1),Ys={},Zs=Pi(Ys),eo=Pi(Ys),to=Pi(Ys);function no(e){if(e===Ys)throw Error(s(174));return e}function ro(e,t){switch(Oi(to,t),Oi(eo,e),Oi(Zs,Ys),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Zs),Oi(Zs,t)}function io(){Ti(Zs),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(Oi(eo,e),Oi(Zs,n))}function oo(e){eo.current===e&&(Ti(Zs),Ti(eo))}var ao=Pi(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=x.ReactCurrentDispatcher,po=x.ReactCurrentBatchConfig,fo=0,mo=null,go=null,yo=null,bo=!1,vo=!1,xo=0,wo=0;function So(){throw Error(s(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Po(e,t,n,r,i,o){if(fo=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),vo){o=0;do{if(vo=!1,xo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(vo)}if(ho.current=oa,t=null!==go&&null!==go.next,fo=0,yo=go=mo=null,bo=!1,t)throw Error(s(300));return e}function To(){var e=0!==xo;return xo=0,e}function Oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function Ao(e,t){return"function"==typeof t?t(e):t}function Eo(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((fo&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,mo.lanes|=h,_l|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(xa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,_l|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(xa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Mo(){}function Io(e,t){var n=mo,r=Co(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,xa=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Ro.bind(null,n,r,i,t),void 0,null),null===El)throw Error(s(349));0!=(30&fo)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,_o(t)&&Bo(e)}function Lo(e,t,n){return n((function(){_o(t)&&Bo(e)}))}function _o(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(e){return!0}}function Bo(e){var t=Es(e,1);null!==t&&nc(t,e,1,-1)}function Fo(e){var t=Oo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Co().memoizedState}function zo(e,t,n,r){var i=Oo();mo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Uo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=jo(t,n,s,r))}mo.flags|=e,i.memoizedState=jo(1|t,n,s,r)}function Ho(e,t){return zo(8390656,8,e,t)}function Wo(e,t){return Uo(2048,8,e,t)}function $o(e,t){return Uo(4,2,e,t)}function qo(e,t){return Uo(4,4,e,t)}function Qo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!=n?n.concat([e]):null,Uo(4,4,Qo.bind(null,t,e),n)}function Jo(){}function Go(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Yo(e,t,n){return 0==(21&fo)?(e.baseState&&(e.baseState=!1,xa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,_l|=n,e.baseState=!0),t)}function Zo(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=po.transition;po.transition={};try{e(!1),t()}finally{vt=n,po.transition=r}}function ea(){return Co().memoizedState}function ta(e,t,n){var r=tc(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e)?ia(t,n):null!==(n=As(e,t,n,r))&&(nc(n,e,r,ec()),sa(n,t,r))}function na(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Cs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=As(e,t,i,r))&&(nc(n,e,r,i=ec()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){vo=bo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var oa={readContext:Ts,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return Oo().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:Ho,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,zo(4194308,4,Qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Oo().memoizedState=e},useState:Fo,useDebugValue:Jo,useDeferredValue:function(e){return Oo().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),Oo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=Oo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===El)throw Error(s(349));0!=(30&fo)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ho(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Oo(),t=El.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Gi&~(1<<32-ot(Gi)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:Go,useContext:Ts,useEffect:Wo,useImperativeHandle:Ko,useInsertionEffect:$o,useLayoutEffect:qo,useMemo:Xo,useReducer:Eo,useRef:Vo,useState:function(){return Eo(Ao)},useDebugValue:Jo,useDeferredValue:function(e){return Yo(Co(),go.memoizedState,e)},useTransition:function(){return[Eo(Ao)[0],Co().memoizedState]},useMutableSource:Mo,useSyncExternalStore:Io,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:Go,useContext:Ts,useEffect:Wo,useImperativeHandle:Ko,useInsertionEffect:$o,useLayoutEffect:qo,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Ao)},useDebugValue:Jo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:Yo(t,go.memoizedState,e)},useTransition:function(){return[No(Ao)[0],Co().memoizedState]},useMutableSource:Mo,useSyncExternalStore:Io,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var pa="function"==typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Ds(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,$l=r),da(0,t)},n}function ma(e,t,n){(n=Ds(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!=typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ba(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ds(-1,1)).tag=2,Rs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=x.ReactCurrentOwner,xa=!1;function wa(e,t,n,r){t.child=null===e?Xs(t,null,n,r):Gs(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Ps(t,i),r=Po(e,t,n,r,s,i),n=To(),null===e||xa?(is&&n&&es(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function ka(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Ic(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Pa(e,t,s,r,i))}if(s=e.child,0==(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function Pa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(xa=!1,t.pendingProps=r=s,0==(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!=(131072&e.flags)&&(xa=!0)}}return Ca(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oi(Dl,Il),Il|=n;else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oi(Dl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Oi(Dl,Il),Il|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Oi(Dl,Il),Il|=r;return wa(e,t,i,n),t.child}function Oa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Ii(n)?Ni:Ai.current;return s=Mi(t,s),Ps(t,i),n=Po(e,t,n,r,s,i),r=To(),null===e||xa?(is&&r&&es(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Aa(e,t,n,r,i){if(Ii(n)){var s=!0;_i(t)}else s=!1;if(Ps(t,i),null===t.stateNode)Ha(e,t),Hs(t,n,r),$s(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;c="object"==typeof c&&null!==c?Ts(c):Mi(t,c=Ii(n)?Ni:Ai.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Ws(t,o,r,c),Ns=!1;var d=t.memoizedState;o.state=d,Bs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ei.current||Ns?("function"==typeof u&&(Vs(t,n,u,r),l=t.memoizedState),(a=Ns||Us(t,n,a,r,d,l,c))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Is(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:gs(t.type,a),o.props=c,h=t.pendingProps,d=o.context,l="object"==typeof(l=n.contextType)&&null!==l?Ts(l):Mi(t,l=Ii(n)?Ni:Ai.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ws(t,o,r,l),Ns=!1,d=t.memoizedState,o.state=d,Bs(t,r,o,i);var f=t.memoizedState;a!==h||d!==f||Ei.current||Ns?("function"==typeof p&&(Vs(t,n,p,r),f=t.memoizedState),(c=Ns||Us(t,n,c,r,d,f,l)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ea(e,t,n,r,s,i)}function Ea(e,t,n,r,i,s){Oa(e,t);var o=0!=(128&t.flags);if(!r&&!o)return i&&Bi(t,n,!1),Wa(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Gs(t,e.child,null,s),t.child=Gs(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ro(e,t.containerInfo)}function Ma(e,t,n,r,i){return ps(),fs(i),t.flags|=256,wa(e,t,n,r),t.child}var Ia,Da,Ra,La={dehydrated:null,treeContext:null,retryLane:0};function _a(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Oi(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0==(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=_c(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=_a(n),t.memoizedState=La,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=_c({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!=(1&t.mode)&&Gs(t,e.child,null,a),t.child.memoizedState=_a(a),t.memoizedState=La,o);if(0==(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,ja(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!=(a&e.childLanes),xa||l){if(null!==(r=El)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Es(e,i),nc(r,e,i,-1))}return mc(),ja(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Qi[Ki++]=Gi,Qi[Ki++]=Xi,Qi[Ki++]=Ji,Gi=e.id,Xi=e.overflow,Ji=t),(t=Fa(t,r.children)).flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0==(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?_a(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Dc(a,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=_c({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,r){return null!==r&&fs(r),Gs(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ks(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ua(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),0!=(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Oi(ao,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),_l|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qa(t),null;case 1:case 17:return Ii(t.type)&&Di(),qa(t),null;case 3:return r=t.stateNode,io(),Ti(Ei),Ti(Ai),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),qa(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return qa(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[pi]=o,e=0!=(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":G(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var l in be(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"==typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Yr(r.textContent,c,e),i=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Yr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":q(r),Z(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[pi]=r,Ia(e,t),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":G(e,r),i=J(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in be(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"==typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&v(e,o,u,l))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qa(t),null;case 6:if(e&&null!=t.stateNode)Ra(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Yr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yr(r.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return qa(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!=(1&t.mode)&&0==(128&t.flags))ds(),ps(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else ps(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qa(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ao.current)?0===Rl&&(Rl=3):mc())),null!==t.updateQueue&&(t.flags|=4),qa(t),null);case 4:return io(),null===e&&Ur(t.stateNode.containerInfo),qa(t),null;case 10:return Ss(t.type._context),qa(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return qa(t),null;if(r=0!=(128&t.flags),null===(l=o.rendering))if(r)$a(o,!1);else{if(0!==Rl||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,$a(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oi(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Ul&&(t.flags|=128,r=!0,$a(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$a(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return qa(t),null}else 2*Xe()-o.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,$a(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ao.current,Oi(ao,r?1&n|2:1&n),t):(qa(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Il)&&(qa(t),6&t.subtreeFlags&&(t.flags|=8192)):qa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ka(e,t){switch(ts(t),t.tag){case 1:return Ii(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ei),Ti(Ai),uo(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ia=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=J(e,i),r=J(e,r),o=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(u in be(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ra=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ja=!1,Ga=!1,Xa="function"==typeof WeakSet?WeakSet:Set,Ya=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Pc(e,t,n)}else n.current=null}function el(e,t,n){try{n()}catch(n){Pc(e,t,n)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[mi],delete t[gi],delete t[yi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"==typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:Ga||Za(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ut(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ga&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!=(2&s)||0!=(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ga&&(Za(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Pc(n,t,e)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ga=(r=Ga)||null!==n.memoizedState,dl(e,t,n),Ga=r):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));pl(o,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(e){Pc(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(t){Pc(e,e.return,t)}try{nl(5,e,e.return)}catch(t){Pc(e,e.return,t)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(t){Pc(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),ve(l,a);var u=ve(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):v(i,h,d,u)}switch(l){case"input":Y(i,o);break;case"textarea":se(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(t){Pc(e,e.return,t)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(t){Pc(e,e.return,t)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(t){Pc(e,e.return,t)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Xe())),4&r&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ga=(u=Ga)||h,ml(t,e),Ga=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!=(1&e.mode))for(Ya=e,h=e.child;null!==h;){for(d=Ya=h;null!==Ya;){switch(f=(p=Ya).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Za(p,p.return);var m=p.stateNode;if("function"==typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){Pc(r,n,e)}}break;case 5:Za(p,p.return);break;case 22:if(null!==p.memoizedState){wl(d);continue}}null!==f?(f.return=p,Ya=f):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=null!=(c=d.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(t){Pc(e,e.return,t)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(t){Pc(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(t){Pc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Ya=e,vl(e,t,n)}function vl(e,t,n){for(var r=0!=(1&e.mode);null!==Ya;){var i=Ya,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ja;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ga;a=Ja;var c=Ga;if(Ja=o,(Ga=l)&&!c)for(Ya=i;null!==Ya;)l=(o=Ya).child,22===o.tag&&null!==o.memoizedState?Sl(i):null!==l?(l.return=o,Ya=l):Sl(i);for(;null!==s;)Ya=s,vl(s,t,n),s=s.sibling;Ya=i,Ja=a,Ga=c}xl(e)}else 0!=(8772&i.subtreeFlags)&&null!==s?(s.return=i,Ya=s):xl(e)}}function xl(e){for(;null!==Ya;){var t=Ya;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ga||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ga)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(s(163))}Ga||512&t.flags&&il(t)}catch(e){Pc(t,t.return,e)}}if(t===e){Ya=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ya=n;break}Ya=t.return}}function wl(e){for(;null!==Ya;){var t=Ya;if(t===e){Ya=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ya=n;break}Ya=t.return}}function Sl(e){for(;null!==Ya;){var t=Ya;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(e){Pc(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){Pc(t,i,e)}}var s=t.return;try{il(t)}catch(e){Pc(t,s,e)}break;case 5:var o=t.return;try{il(t)}catch(e){Pc(t,o,e)}}}catch(e){Pc(t,t.return,e)}if(t===e){Ya=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ya=a;break}Ya=t.return}}var kl,Pl=Math.ceil,Tl=x.ReactCurrentDispatcher,Ol=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,Al=0,El=null,Nl=null,Ml=0,Il=0,Dl=Pi(0),Rl=0,Ll=null,_l=0,Bl=0,Fl=0,jl=null,Vl=null,zl=0,Ul=1/0,Hl=null,Wl=!1,$l=null,ql=null,Ql=!1,Kl=null,Jl=0,Gl=0,Xl=null,Yl=-1,Zl=0;function ec(){return 0!=(6&Al)?Xe():-1!==Yl?Yl:Yl=Xe()}function tc(e){return 0==(1&e.mode)?1:0!=(2&Al)&&0!==Ml?Ml&-Ml:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function nc(e,t,n,r){if(50<Gl)throw Gl=0,Xl=null,Error(s(185));yt(e,n,r),0!=(2&Al)&&e===El||(e===El&&(0==(2&Al)&&(Bl|=n),4===Rl&&ac(e,Ml)),rc(e,r),1===n&&0===Al&&0==(1&t.mode)&&(Ul=Xe()+500,ji&&Ui()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!=(a&n)&&0==(a&r)||(i[o]=pt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===El?Ml:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),oi((function(){0==(6&Al)&&Ui()})),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ec(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Yl=-1,Zl=0,0!=(6&Al))throw Error(s(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=dt(e,e===El?Ml:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Al;Al|=2;var o=fc();for(El===e&&Ml===t||(Hl=null,Ul=Xe()+500,dc(e,t));;)try{bc();break}catch(t){pc(e,t)}ws(),Tl.current=o,Al=i,null!==Nl?t=0:(El=null,Ml=0,t=Rl)}if(0!==t){if(2===t&&0!==(i=ft(e))&&(r=i,t=sc(e,i)),1===t)throw n=Ll,dc(e,0),ac(e,r),rc(e,Xe()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&0!==(o=ft(e))&&(r=o,t=sc(e,o)),1===t))throw n=Ll,dc(e,0),ac(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Vl,Hl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=zl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vl,Hl),t);break}wc(e,Vl,Hl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Pl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vl,Hl),r);break}wc(e,Vl,Hl);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function ac(e,t){for(t&=~Fl,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!=(6&Al))throw Error(s(327));Sc();var t=dt(e,0);if(0==(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,dc(e,0),ac(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,Hl),rc(e,Xe()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Ul=Xe()+500,ji&&Ui())}}function uc(e){null!==Kl&&0===Kl.tag&&0==(6&Al)&&Sc();var t=Al;Al|=1;var n=Cl.transition,r=vt;try{if(Cl.transition=null,vt=1,e)return e()}finally{vt=r,Cl.transition=n,0==(6&(Al=t))&&Ui()}}function hc(){Il=Dl.current,Ti(Dl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Di();break;case 3:io(),Ti(Ei),Ti(Ai),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Ss(r.type._context);break;case 22:case 23:hc()}n=n.return}if(El=e,Nl=e=Dc(e.current,null),Ml=Il=t,Rl=0,Ll=null,Fl=Bl=_l=0,Vl=jl=null,null!==Os){for(t=0;t<Os.length;t++)if(null!==(r=(n=Os[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Os=null}return e}function pc(e,t){for(;;){var n=Nl;try{if(ws(),ho.current=oa,bo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}bo=!1}if(fo=0,yo=go=mo=null,vo=!1,xo=0,Ol.current=null,null===n||null===n.return){Rl=1,Ll=t,Nl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,h=l,d=h.tag;if(0==(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ya(a);if(null!==f){f.flags&=-257,ba(f,a,l,0,t),1&f.mode&&ga(o,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0==(1&t)){ga(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),ba(y,a,l,0,t),fs(ua(c,l));break e}}o=c=ua(c,l),4!==Rl&&(Rl=2),null===jl?jl=[o]:jl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,_s(o,fa(0,c,t));break e;case 1:l=c;var b=o.type,v=o.stateNode;if(0==(128&o.flags)&&("function"==typeof b.getDerivedStateFromError||null!==v&&"function"==typeof v.componentDidCatch&&(null===ql||!ql.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t,_s(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}xc(n)}catch(e){t=e,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function fc(){var e=Tl.current;return Tl.current=oa,null===e?oa:e}function mc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===El||0==(268435455&_l)&&0==(268435455&Bl)||ac(El,Ml)}function gc(e,t){var n=Al;Al|=2;var r=fc();for(El===e&&Ml===t||(Hl=null,dc(e,t));;)try{yc();break}catch(t){pc(e,t)}if(ws(),Al=n,Tl.current=r,null!==Nl)throw Error(s(261));return El=null,Ml=0,Rl}function yc(){for(;null!==Nl;)vc(Nl)}function bc(){for(;null!==Nl&&!Je();)vc(Nl)}function vc(e){var t=kl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?xc(e):Nl=t,Ol.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Qa(n,t,Il)))return void(Nl=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Rl=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,n){var r=vt,i=Cl.transition;try{Cl.transition=null,vt=1,function(e,t,n,r){do{Sc()}while(null!==Kl);if(0!=(6&Al))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===El&&(Nl=El=null,Ml=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Ql||(Ql=!0,Ec(tt,(function(){return Sc(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=vt;vt=1;var l=Al;Al|=4,Ol.current=null,function(e,t){if(ei=Wt,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===i&&(l=a),p===o&&++h===r&&(c=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Ya=t;null!==Ya;)if(e=(t=Ya).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Ya=e;else for(;null!==Ya;){t=Ya;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(e){Pc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Ya=e;break}Ya=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),Wt=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Ge(),Al=l,vt=a,Cl.transition=o}else e.current=n;if(Ql&&(Ql=!1,Kl=e,Jl=i),0===(o=e.pendingLanes)&&(ql=null),function(e){if(st&&"function"==typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=$l,$l=null,e;0!=(1&Jl)&&0!==e.tag&&Sc(),0!=(1&(o=e.pendingLanes))?e===Xl?Gl++:(Gl=0,Xl=e):Gl=0,Ui()}(e,t,n,r)}finally{Cl.transition=i,vt=r}return null}function Sc(){if(null!==Kl){var e=xt(Jl),t=Cl.transition,n=vt;try{if(Cl.transition=null,vt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Jl=0,0!=(6&Al))throw Error(s(331));var i=Al;for(Al|=4,Ya=e.current;null!==Ya;){var o=Ya,a=o.child;if(0!=(16&Ya.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ya=u;null!==Ya;){var h=Ya;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ya=d;else for(;null!==Ya;){var p=(h=Ya).sibling,f=h.return;if(sl(h),h===u){Ya=null;break}if(null!==p){p.return=f,Ya=p;break}Ya=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Ya=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,Ya=a;else e:for(;null!==Ya;){if(0!=(2048&(o=Ya).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Ya=b;break e}Ya=o.return}}var v=e.current;for(Ya=v;null!==Ya;){var x=(a=Ya).child;if(0!=(2064&a.subtreeFlags)&&null!==x)x.return=a,Ya=x;else e:for(a=v;null!==Ya;){if(0!=(2048&(l=Ya).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){Pc(l,l.return,e)}if(l===a){Ya=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Ya=w;break e}Ya=l.return}}if(Al=i,Ui(),st&&"function"==typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{vt=n,Cl.transition=t}}return!1}function kc(e,t,n){e=Rs(e,t=fa(0,t=ua(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Pc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Rs(t,e=ma(t,e=ua(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Ml&n)===n&&(4===Rl||3===Rl&&(130023424&Ml)===Ml&&500>Xe()-zl?dc(e,0):Fl|=n),rc(e,t)}function Oc(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ut,0==(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Es(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Oc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Oc(e,n)}function Ec(e,t){return Qe(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new Nc(e,t,n,r)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Ic(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case k:return Lc(n.children,i,o,t);case P:a=8,i|=8;break;case T:return(e=Mc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case E:return(e=Mc(13,n,t,i)).elementType=E,e.lanes=o,e;case N:return(e=Mc(19,n,t,i)).elementType=N,e.lanes=o,e;case D:return _c(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case O:a=10;break e;case C:a=9;break e;case A:a=11;break e;case M:a=14;break e;case I:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Mc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function _c(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,o,a,l){return e=new jc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Mc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function zc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Uc(e){if(!e)return Ci;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ii(n))return Li(e,n,t)}return t}function Hc(e,t,n,r,i,s,o,a,l){return(e=Vc(n,r,!0,e,0,s,0,a,l)).context=Uc(null),n=e.current,(s=Ds(r=ec(),i=tc(n))).callback=null!=t?t:null,Rs(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ds(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Rs(i,t,o))&&(nc(e,i,o,s),Ls(e,i,o)),o}function $c(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ei.current)xa=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return xa=!1,function(e,t,n){switch(t.tag){case 3:Na(t),ps();break;case 5:so(t);break;case 1:Ii(t.type)&&_i(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Oi(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Oi(ao,1&ao.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Ba(e,t,n):(Oi(ao,1&ao.current),null!==(e=Wa(e,t,n))?e.sibling:null);Oi(ao,1&ao.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Ua(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Oi(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Wa(e,t,n)}(e,t,n);xa=0!=(131072&e.flags)}else xa=!1,is&&0!=(1048576&t.flags)&&Zi(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Mi(t,Ai.current);Ps(t,n),i=Po(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ii(r)?(o=!0,_i(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,$s(t,r,e,n),t=Ea(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Ic(e)?1:0;if(null!=e){if((e=e.$$typeof)===A)return 11;if(e===M)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=Aa(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=ka(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Is(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ma(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Ma(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Wa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Oa(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ba(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Gs(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Oi(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ei.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ds(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),ks(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ks(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ps(t,n),r=r(i=Ts(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),ka(e,t,r,i=gs(r.type,i),n);case 15:return Pa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ha(e,t),t.tag=1,Ii(r)?(e=!0,_i(t)):e=!1,Ps(t,n),Hs(t,r,i),$s(t,r,i,n),Ea(null,t,r,!0,e,n);case 19:return Ua(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Kc="function"==typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"==typeof i){var a=i;i=function(){var e=$c(o);a.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=$c(o);s.call(e)}}var o=Hc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[fi]=o.current,Ur(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var a=r;r=function(){var e=$c(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fi]=l.current,Ur(8===e.nodeType?e.parentNode:e),uc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return $c(o)}Gc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Gc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Wc(null,e,null,null)})),t[fi]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Bt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(bt(t,1|n),rc(t,Xe()),0==(6&Al)&&(Ul=Xe()+500,Ui()))}break;case 13:uc((function(){var t=Es(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Qc(e,1)}},St=function(e){if(13===e.tag){var t=Es(e,134217728);null!==t&&nc(t,e,134217728,ec()),Qc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Es(e,t);null!==n&&nc(n,e,t,ec()),Qc(e,t)}},Pt=function(){return vt},Tt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},Se=function(e,t,n){switch(t){case"input":if(Y(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));Q(r),Y(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Ee=uc;var tu={usingClientEntryPoint:!1,Events:[vi,xi,wi,Oe,Ce,cc]},nu={findFiberByHostInstance:bi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return zc(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",i=Kc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Kc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,i,0,o,a),e[fi]=t.current,Ur(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},29:(e,t,n)=>{var r=n(316);t.s=r.createRoot,r.hydrateRoot},316:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(967)},391:(e,t,n)=>{t.kQ=t.ZP=void 0;var r=n(280);Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return r.useWebSocket}});n(625);var i=n(673);Object.defineProperty(t,"kQ",{enumerable:!0,get:function(){return i.ReadyState}});n(824),n(958)},991:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.attachListeners=void 0;var i=n(252),s=n(673),o=n(958);t.attachListeners=function(e,t,n,a,l,c){var u,h,d,p=t.setLastMessage,f=t.setReadyState;return n.current.fromSocketIO&&(u=(0,i.setUpSocketIOPing)(c)),function(e,t,n){e.onmessage=function(e){t.current.onMessage&&t.current.onMessage(e),"function"==typeof t.current.filter&&!0!==t.current.filter(e)||n(e)}}(e,n,p),function(e,t,n,r){e.onopen=function(e){t.current.onOpen&&t.current.onOpen(e),r.current=0,n(s.ReadyState.OPEN)}}(e,n,f,l),h=function(e,t,n,r,i){return s.isEventSourceSupported&&e instanceof EventSource?function(){}:((0,o.assertIsWebSocket)(e,t.current.skipAssert),e.onclose=function(e){var o,l;if(t.current.onClose&&t.current.onClose(e),n(s.ReadyState.CLOSED),t.current.shouldReconnect&&t.current.shouldReconnect(e)){var c=null!==(o=t.current.reconnectAttempts)&&void 0!==o?o:s.DEFAULT_RECONNECT_LIMIT;i.current<c?a=window.setTimeout((function(){i.current++,r()}),null!==(l=t.current.reconnectInterval)&&void 0!==l?l:s.DEFAULT_RECONNECT_INTERVAL_MS):(t.current.onReconnectStop&&t.current.onReconnectStop(c),console.warn("Max reconnect attempts of ".concat(c," exceeded")))}},function(){return a&&window.clearTimeout(a)});var a}(e,n,f,a,l),d=function(e,t,n,i,o){var a;return e.onerror=function(l){var c,u;t.current.onError&&t.current.onError(l),s.isEventSourceSupported&&e instanceof EventSource&&(t.current.onClose&&t.current.onClose(r(r({},l),{code:1006,reason:"An error occurred with the EventSource: ".concat(l),wasClean:!1})),n(s.ReadyState.CLOSED),e.close()),t.current.retryOnError&&(o.current<(null!==(c=t.current.reconnectAttempts)&&void 0!==c?c:s.DEFAULT_RECONNECT_LIMIT)?a=window.setTimeout((function(){o.current++,i()}),null!==(u=t.current.reconnectInterval)&&void 0!==u?u:s.DEFAULT_RECONNECT_INTERVAL_MS):(t.current.onReconnectStop&&t.current.onReconnectStop(t.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(t.current.reconnectAttempts," exceeded"))))},function(){return a&&window.clearTimeout(a)}}(e,n,f,a,l),function(){f(s.ReadyState.CLOSING),h(),d(),e.close(),u&&clearInterval(u)}}},394:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.attachSharedListeners=void 0;var i=n(390),s=n(673),o=n(750),a=n(252);t.attachSharedListeners=function(e,t,n,l){var c;return n.current.fromSocketIO&&(c=(0,a.setUpSocketIOPing)(l)),function(e,t){e.onmessage=function(e){(0,o.getSubscribers)(t).forEach((function(t){t.optionsRef.current.onMessage&&t.optionsRef.current.onMessage(e),"function"==typeof t.optionsRef.current.filter&&!0!==t.optionsRef.current.filter(e)||t.setLastMessage(e)}))}}(e,t),function(e,t){e instanceof WebSocket&&(e.onclose=function(e){(0,o.getSubscribers)(t).forEach((function(t){t.optionsRef.current.onClose&&t.optionsRef.current.onClose(e),t.setReadyState(s.ReadyState.CLOSED)})),delete i.sharedWebSockets[t],(0,o.getSubscribers)(t).forEach((function(t){var n,r;if(t.optionsRef.current.shouldReconnect&&t.optionsRef.current.shouldReconnect(e)){var i=null!==(n=t.optionsRef.current.reconnectAttempts)&&void 0!==n?n:s.DEFAULT_RECONNECT_LIMIT;t.reconnectCount.current<i?setTimeout((function(){t.reconnectCount.current++,t.reconnect.current()}),null!==(r=t.optionsRef.current.reconnectInterval)&&void 0!==r?r:s.DEFAULT_RECONNECT_INTERVAL_MS):(t.optionsRef.current.onReconnectStop&&t.optionsRef.current.onReconnectStop(t.optionsRef.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(i," exceeded")))}}))})}(e,t),function(e,t){e.onopen=function(e){(0,o.getSubscribers)(t).forEach((function(t){t.reconnectCount.current=0,t.optionsRef.current.onOpen&&t.optionsRef.current.onOpen(e),t.setReadyState(s.ReadyState.OPEN)}))}}(e,t),function(e,t){e.onerror=function(n){(0,o.getSubscribers)(t).forEach((function(t){t.optionsRef.current.onError&&t.optionsRef.current.onError(n),s.isEventSourceSupported&&e instanceof EventSource&&(t.optionsRef.current.onClose&&t.optionsRef.current.onClose(r(r({},n),{code:1006,reason:"An error occurred with the EventSource: ".concat(n),wasClean:!1})),t.setReadyState(s.ReadyState.CLOSED))})),s.isEventSourceSupported&&e instanceof EventSource&&e.close()}}(e,t),function(){c&&clearInterval(c)}}},673:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.isEventSourceSupported=t.isReactNative=t.ReadyState=t.UNPARSABLE_JSON_OBJECT=t.DEFAULT_RECONNECT_INTERVAL_MS=t.DEFAULT_RECONNECT_LIMIT=t.SOCKET_IO_PING_CODE=t.SOCKET_IO_PATH=t.SOCKET_IO_PING_INTERVAL=t.DEFAULT_EVENT_SOURCE_OPTIONS=t.EMPTY_EVENT_HANDLERS=t.DEFAULT_OPTIONS=void 0,t.DEFAULT_OPTIONS={},t.EMPTY_EVENT_HANDLERS={},t.DEFAULT_EVENT_SOURCE_OPTIONS={withCredentials:!1,events:t.EMPTY_EVENT_HANDLERS},t.SOCKET_IO_PING_INTERVAL=25e3,t.SOCKET_IO_PATH="/socket.io/?EIO=3&transport=websocket",t.SOCKET_IO_PING_CODE="2",t.DEFAULT_RECONNECT_LIMIT=20,t.DEFAULT_RECONNECT_INTERVAL_MS=5e3,t.UNPARSABLE_JSON_OBJECT={},(n=t.ReadyState||(t.ReadyState={}))[n.UNINSTANTIATED=-1]="UNINSTANTIATED",n[n.CONNECTING=0]="CONNECTING",n[n.OPEN=1]="OPEN",n[n.CLOSING=2]="CLOSING",n[n.CLOSED=3]="CLOSED",t.isReactNative="undefined"!=typeof navigator&&"ReactNative"===navigator.product,t.isEventSourceSupported=!t.isReactNative&&function(){try{return"EventSource"in globalThis}catch(e){return!1}}()},284:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createOrJoinSocket=void 0;var r=n(390),i=n(673),s=n(991),o=n(394),a=n(750);t.createOrJoinSocket=function(e,t,n,l,c,u,h,d){if(!i.isEventSourceSupported&&l.current.eventSourceOptions)throw i.isReactNative?new Error("EventSource is not supported in ReactNative"):new Error("EventSource is not supported");if(l.current.share){var p=null;void 0===r.sharedWebSockets[t]?(r.sharedWebSockets[t]=l.current.eventSourceOptions?new EventSource(t,l.current.eventSourceOptions):new WebSocket(t,l.current.protocols),e.current=r.sharedWebSockets[t],n(i.ReadyState.CONNECTING),p=(0,o.attachSharedListeners)(r.sharedWebSockets[t],t,l,d)):(e.current=r.sharedWebSockets[t],n(r.sharedWebSockets[t].readyState));var f={setLastMessage:c,setReadyState:n,optionsRef:l,reconnectCount:h,reconnect:u};return(0,a.addSubscriber)(t,f),function(e,t,n,s,o){return function(){if((0,a.removeSubscriber)(e,t),!(0,a.hasSubscribers)(e)){try{var l=r.sharedWebSockets[e];l instanceof WebSocket&&(l.onclose=function(e){n.current.onClose&&n.current.onClose(e),s(i.ReadyState.CLOSED)}),l.close()}catch(e){}o&&o(),delete r.sharedWebSockets[e]}}}(t,f,l,n,p)}if(e.current=l.current.eventSourceOptions?new EventSource(t,l.current.eventSourceOptions):new WebSocket(t,l.current.protocols),n(i.ReadyState.CONNECTING),!e.current)throw new Error("WebSocket failed to be created");return(0,s.attachListeners)(e.current,{setLastMessage:c,setReadyState:n},l,u.current,h,d)}},722:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getUrl=void 0;var s=n(252);t.getUrl=function(e,t){return r(void 0,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return"function"!=typeof e?[3,2]:[4,e()];case 1:return n=i.sent(),[3,3];case 2:n=e,i.label=3;case 3:return r=t.current.fromSocketIO?(0,s.parseSocketIOUrl)(n):n,[2,t.current.queryParams?(0,s.appendQueryParams)(r,t.current.queryParams):r]}}))}))}},390:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetWebSockets=t.sharedWebSockets=void 0,t.sharedWebSockets={},t.resetWebSockets=function(e){if(e&&t.sharedWebSockets.hasOwnProperty(e))delete t.sharedWebSockets[e];else for(var n in t.sharedWebSockets)t.sharedWebSockets.hasOwnProperty(n)&&delete t.sharedWebSockets[n]}},750:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetSubscribers=t.removeSubscriber=t.addSubscriber=t.hasSubscribers=t.getSubscribers=void 0;var n={},r=[];t.getSubscribers=function(e){return(0,t.hasSubscribers)(e)?Array.from(n[e]):r},t.hasSubscribers=function(e){var t;return(null===(t=n[e])||void 0===t?void 0:t.size)>0},t.addSubscriber=function(e,t){n[e]=n[e]||new Set,n[e].add(t)},t.removeSubscriber=function(e,t){n[e].delete(t)},t.resetSubscribers=function(e){if(e&&n.hasOwnProperty(e))delete n[e];else for(var t in n)n.hasOwnProperty(t)&&delete n[t]}},761:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.websocketWrapper=void 0,t.websocketWrapper=function(e,t){return new Proxy(e,{get:function(e,n){var r=e[n];return"reconnect"===n?t:"function"==typeof r?(console.error("Calling methods directly on the websocket is not supported at this moment. You must use the methods returned by useWebSocket."),function(){}):r},set:function(e,t,n){return/^on/.test(t)?(console.warn("The websocket's event handlers should be defined through the options object passed into useWebSocket."),!1):(e[t]=n,!0)}})},t.default=t.websocketWrapper},252:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setUpSocketIOPing=t.appendQueryParams=t.parseSocketIOUrl=void 0;var r=n(673);t.parseSocketIOUrl=function(e){if(e){var t=/^https|wss/.test(e),n=e.replace(/^(https?|wss?)(:\/\/)?/,"").replace(/\/$/,"");return"".concat(i=t?"wss":"ws","://").concat(n).concat(r.SOCKET_IO_PATH)}if(""===e){var i=(t=/^https/.test(window.location.protocol))?"wss":"ws",s=window.location.port?":".concat(window.location.port):"";return"".concat(i,"://").concat(window.location.hostname).concat(s).concat(r.SOCKET_IO_PATH)}return e},t.appendQueryParams=function(e,t){void 0===t&&(t={});var n=/\?([\w]+=[\w]+)/.test(e),r="".concat(Object.entries(t).reduce((function(e,t){var n=t[0],r=t[1];return e+"".concat(n,"=").concat(r,"&")}),"").slice(0,-1));return"".concat(e).concat(n?"&":"?").concat(r)},t.setUpSocketIOPing=function(e,t){return void 0===t&&(t=r.SOCKET_IO_PING_INTERVAL),window.setInterval((function(){return e(r.SOCKET_IO_PING_CODE)}),t)}},824:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.useEventSource=void 0;var s=n(784),o=n(280),a=n(673);t.useEventSource=function(e,t,n){void 0===t&&(t=a.DEFAULT_EVENT_SOURCE_OPTIONS);var l=t.withCredentials,c=t.events,u=i(t,["withCredentials","events"]);void 0===n&&(n=!0);var h=r(r({},u),{eventSourceOptions:{withCredentials:l}}),d=(0,s.useRef)(a.EMPTY_EVENT_HANDLERS);c&&(d.current=c);var p=(0,o.useWebSocket)(e,h,n),f=p.lastMessage,m=p.readyState,g=p.getWebSocket;return(0,s.useEffect)((function(){(null==f?void 0:f.type)&&Object.entries(d.current).forEach((function(e){var t=e[0],n=e[1];t===f.type&&n(f)}))}),[f]),{lastEvent:f,readyState:m,getEventSource:g}}},625:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useSocketIO=void 0;var i=n(784),s=n(280),o=n(673),a={type:"empty",payload:null};t.useSocketIO=function(e,t,n){void 0===t&&(t=o.DEFAULT_OPTIONS),void 0===n&&(n=!0);var l=(0,i.useMemo)((function(){return r(r({},t),{fromSocketIO:!0})}),[]),c=(0,s.useWebSocket)(e,l,n),u=c.sendMessage,h=c.sendJsonMessage,d=c.lastMessage,p=c.readyState,f=c.getWebSocket,m=(0,i.useMemo)((function(){return function(e){if(!e||!e.data)return a;var t=e.data.match(/\[.*]/);if(!t)return a;var n=JSON.parse(t);return Array.isArray(n)&&n[1]?{type:n[0],payload:n[1]}:a}(d)}),[d]);return{sendMessage:u,sendJsonMessage:h,lastMessage:m,lastJsonMessage:m,readyState:p,getWebSocket:f}}},280:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useWebSocket=void 0;var a=n(784),l=n(316),c=n(673),u=n(284),h=n(722),d=o(n(761)),p=n(958);t.useWebSocket=function(e,t,n){void 0===t&&(t=c.DEFAULT_OPTIONS),void 0===n&&(n=!0);var o=(0,a.useState)(null),f=o[0],m=o[1],g=(0,a.useState)({}),y=g[0],b=g[1],v=(0,a.useMemo)((function(){if(f)try{return JSON.parse(f.data)}catch(e){return c.UNPARSABLE_JSON_OBJECT}return null}),[f]),x=(0,a.useRef)(null),w=(0,a.useRef)(null),S=(0,a.useRef)((function(){})),k=(0,a.useRef)(0),P=(0,a.useRef)([]),T=(0,a.useRef)(null),O=(0,a.useRef)(t);O.current=t;var C=x.current&&void 0!==y[x.current]?y[x.current]:null!==e&&!0===n?c.ReadyState.CONNECTING:c.ReadyState.UNINSTANTIATED,A=t.queryParams?JSON.stringify(t.queryParams):null,E=(0,a.useCallback)((function(e,t){var n;void 0===t&&(t=!0),c.isEventSourceSupported&&w.current instanceof EventSource?console.warn("Unable to send a message from an eventSource"):(null===(n=w.current)||void 0===n?void 0:n.readyState)===c.ReadyState.OPEN?((0,p.assertIsWebSocket)(w.current,O.current.skipAssert),w.current.send(e)):t&&P.current.push(e)}),[]),N=(0,a.useCallback)((function(e,t){void 0===t&&(t=!0),E(JSON.stringify(e),t)}),[E]),M=(0,a.useCallback)((function(){return!0!==O.current.share||c.isEventSourceSupported&&w.current instanceof EventSource?w.current:(null===T.current&&w.current&&((0,p.assertIsWebSocket)(w.current,O.current.skipAssert),T.current=(0,d.default)(w.current,S)),T.current)}),[]);return(0,a.useEffect)((function(){if(null!==e&&!0===n){var t,o=!1,a=!0,d=function(){return i(void 0,void 0,void 0,(function(){var n,i,c;return s(this,(function(s){switch(s.label){case 0:return n=x,[4,(0,h.getUrl)(e,O)];case 1:return n.current=s.sent(),i=function(e){o||(0,l.flushSync)((function(){return m(e)}))},c=function(e){o||(0,l.flushSync)((function(){return b((function(t){var n;return r(r({},t),x.current&&((n={})[x.current]=e,n))}))}))},a&&(t=(0,u.createOrJoinSocket)(w,x.current,c,O,i,S,k,E)),[2]}}))}))};return S.current=function(){o||(T.current&&(T.current=null),null==t||t(),d())},d(),function(){o=!0,a=!1,T.current&&(T.current=null),null==t||t(),m(null)}}null!==e&&!1!==n||(k.current=0,b((function(e){var t;return r(r({},e),x.current&&((t={})[x.current]=c.ReadyState.CLOSED,t))})))}),[e,n,A,E]),(0,a.useEffect)((function(){C===c.ReadyState.OPEN&&P.current.splice(0).forEach((function(e){E(e)}))}),[C]),{sendMessage:E,sendJsonMessage:N,lastMessage:f,lastJsonMessage:v,readyState:C,getWebSocket:M}}},958:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetGlobalState=t.assertIsWebSocket=void 0;var r=n(390),i=n(750);t.assertIsWebSocket=function(e,t){if(!t&&e instanceof WebSocket==0)throw new Error("")},t.resetGlobalState=function(e){(0,i.resetSubscribers)(e),(0,r.resetWebSockets)(e)}},837:(e,t,n)=>{var r=n(784),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},426:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator,f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var x=v.prototype=new b;x.constructor=v,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!P.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function O(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+A(l,0):s,w(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),E(o,t,i,"",(function(e){return e}))):null!=o&&(O(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+A(a=e[c],c);l+=E(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=E(a=a.value,t,i,u=s+A(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return E(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},D={transition:null},R={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!O(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=v,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!P.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.2.0"},784:(e,t,n)=>{e.exports=n(426)},322:(e,t,n)=>{e.exports=n(837)},475:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,D(S);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,b(O),O=-1),f=!0;var s=p;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!E());){var o=d.callback;if("function"==typeof o){d.callback=null,p=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?d.callback=a:d===r(c)&&i(c),x(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&R(w,h.startTime-n),l=!1}return l}finally{d=null,p=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,P=!1,T=null,O=-1,C=5,A=-1;function E(){return!(t.unstable_now()-A<C)}function N(){if(null!==T){var e=t.unstable_now();A=e;var n=!0;try{n=T(!0,e)}finally{n?k():(P=!1,T=null)}}else P=!1}if("function"==typeof v)k=function(){v(N)};else if("undefined"!=typeof MessageChannel){var M=new MessageChannel,I=M.port2;M.port1.onmessage=N,k=function(){I.postMessage(null)}}else k=function(){y(N,0)};function D(e){T=e,P||(P=!0,k())}function R(e,n){O=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(b(O),O=-1):g=!0,R(w,s-o))):(e.sortIndex=a,n(c,e),m||f||(m=!0,D(S))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},616:(e,t,n)=>{e.exports=n(475)},786:()=>{},806:()=>{},874:(e,t)=>{function n(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}class r{constructor(e,t,n){this.line=void 0,this.column=void 0,this.index=void 0,this.line=e,this.column=t,this.index=n}}class i{constructor(e,t){this.start=void 0,this.end=void 0,this.filename=void 0,this.identifierName=void 0,this.start=e,this.end=t}}var s="BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED";const o=(e,t=e.length-1)=>({get(){return e.reduce(((e,t)=>e[t]),this)},set(n){e.reduce(((e,r,i)=>i===t?e[r]=n:e[r]),this)}});var a={ImportMetaOutsideModule:{message:"import.meta may appear only with 'sourceType: \"module\"'",code:s},ImportOutsideModule:{message:"'import' and 'export' may appear only with 'sourceType: \"module\"'",code:s}};const l={ArrayPattern:"array destructuring pattern",AssignmentExpression:"assignment expression",AssignmentPattern:"assignment expression",ArrowFunctionExpression:"arrow function expression",ConditionalExpression:"conditional expression",CatchClause:"catch clause",ForOfStatement:"for-of statement",ForInStatement:"for-in statement",ForStatement:"for-loop",FormalParameters:"function parameter list",Identifier:"identifier",ImportSpecifier:"import specifier",ImportDefaultSpecifier:"import default specifier",ImportNamespaceSpecifier:"import namespace specifier",ObjectPattern:"object destructuring pattern",ParenthesizedExpression:"parenthesized expression",RestElement:"rest element",UpdateExpression:{true:"prefix operation",false:"postfix operation"},VariableDeclarator:"variable declaration",YieldExpression:"yield expression"},c=({type:e,prefix:t})=>"UpdateExpression"===e?l.UpdateExpression[String(t)]:l[e];var u={AccessorIsGenerator:({kind:e})=>`A ${e}ter cannot be a generator.`,ArgumentsInClass:"'arguments' is only allowed in functions and class methods.",AsyncFunctionInSingleStatementContext:"Async functions can only be declared at the top level or inside a block.",AwaitBindingIdentifier:"Can not use 'await' as identifier inside an async function.",AwaitBindingIdentifierInStaticBlock:"Can not use 'await' as identifier inside a static block.",AwaitExpressionFormalParameter:"'await' is not allowed in async function parameters.",AwaitNotInAsyncContext:"'await' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncFunction:"'await' is only allowed within async functions.",BadGetterArity:"A 'get' accesor must not have any formal parameters.",BadSetterArity:"A 'set' accesor must have exactly one formal parameter.",BadSetterRestParameter:"A 'set' accesor function argument must not be a rest parameter.",ConstructorClassField:"Classes may not have a field named 'constructor'.",ConstructorClassPrivateField:"Classes may not have a private field named '#constructor'.",ConstructorIsAccessor:"Class constructor may not be an accessor.",ConstructorIsAsync:"Constructor can't be an async function.",ConstructorIsGenerator:"Constructor can't be a generator.",DeclarationMissingInitializer:({kind:e})=>`Missing initializer in ${e} declaration.`,DecoratorBeforeExport:"Decorators must be placed *before* the 'export' keyword. You can set the 'decoratorsBeforeExport' option to false to use the 'export @decorator class {}' syntax.",DecoratorConstructor:"Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?",DecoratorExportClass:"Using the export keyword between a decorator and a class is not allowed. Please use `export @dec class` instead.",DecoratorSemicolon:"Decorators must not be followed by a semicolon.",DecoratorStaticBlock:"Decorators can't be used with a static block.",DeletePrivateField:"Deleting a private field is not allowed.",DestructureNamedImport:"ES2015 named imports do not destructure. Use another statement for destructuring after the import.",DuplicateConstructor:"Duplicate constructor in the same class.",DuplicateDefaultExport:"Only one default export allowed per module.",DuplicateExport:({exportName:e})=>`\`${e}\` has already been exported. Exported identifiers must be unique.`,DuplicateProto:"Redefinition of __proto__ property.",DuplicateRegExpFlags:"Duplicate regular expression flag.",ElementAfterRest:"Rest element must be last element.",EscapedCharNotAnIdentifier:"Invalid Unicode escape.",ExportBindingIsString:({localName:e,exportName:t})=>`A string literal cannot be used as an exported binding without \`from\`.\n- Did you mean \`export { '${e}' as '${t}' } from 'some-module'\`?`,ExportDefaultFromAsIdentifier:"'from' is not allowed as an identifier after 'export default'.",ForInOfLoopInitializer:({type:e})=>`'${"ForInStatement"===e?"for-in":"for-of"}' loop variable declaration may not have an initializer.`,ForOfAsync:"The left-hand side of a for-of loop may not be 'async'.",ForOfLet:"The left-hand side of a for-of loop may not start with 'let'.",GeneratorInSingleStatementContext:"Generators can only be declared at the top level or inside a block.",IllegalBreakContinue:({type:e})=>`Unsyntactic ${"BreakStatement"===e?"break":"continue"}.`,IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list.",IllegalReturn:"'return' outside of function.",ImportBindingIsString:({importName:e})=>`A string literal cannot be used as an imported binding.\n- Did you mean \`import { "${e}" as foo }\`?`,ImportCallArgumentTrailingComma:"Trailing comma is disallowed inside import(...) arguments.",ImportCallArity:({maxArgumentCount:e})=>`\`import()\` requires exactly ${1===e?"one argument":"one or two arguments"}.`,ImportCallNotNewExpression:"Cannot use new with import(...).",ImportCallSpreadArgument:"`...` is not allowed in `import()`.",ImportJSONBindingNotDefault:"A JSON module can only be imported with `default`.",IncompatibleRegExpUVFlags:"The 'u' and 'v' regular expression flags cannot be enabled at the same time.",InvalidBigIntLiteral:"Invalid BigIntLiteral.",InvalidCodePoint:"Code point out of bounds.",InvalidCoverInitializedName:"Invalid shorthand property initializer.",InvalidDecimal:"Invalid decimal.",InvalidDigit:({radix:e})=>`Expected number in radix ${e}.`,InvalidEscapeSequence:"Bad character escape sequence.",InvalidEscapeSequenceTemplate:"Invalid escape sequence in template.",InvalidEscapedReservedWord:({reservedWord:e})=>`Escape sequence in keyword ${e}.`,InvalidIdentifier:({identifierName:e})=>`Invalid identifier ${e}.`,InvalidLhs:({ancestor:e})=>`Invalid left-hand side in ${c(e)}.`,InvalidLhsBinding:({ancestor:e})=>`Binding invalid left-hand side in ${c(e)}.`,InvalidNumber:"Invalid number.",InvalidOrMissingExponent:"Floating-point numbers require a valid exponent after the 'e'.",InvalidOrUnexpectedToken:({unexpected:e})=>`Unexpected character '${e}'.`,InvalidParenthesizedAssignment:"Invalid parenthesized assignment pattern.",InvalidPrivateFieldResolution:({identifierName:e})=>`Private name #${e} is not defined.`,InvalidPropertyBindingPattern:"Binding member expression.",InvalidRecordProperty:"Only properties and spread elements are allowed in record definitions.",InvalidRestAssignmentPattern:"Invalid rest operator's argument.",LabelRedeclaration:({labelName:e})=>`Label '${e}' is already declared.`,LetInLexicalBinding:"'let' is not allowed to be used as a name in 'let' or 'const' declarations.",LineTerminatorBeforeArrow:"No line break is allowed before '=>'.",MalformedRegExpFlags:"Invalid regular expression flag.",MissingClassName:"A class name is required.",MissingEqInAssignment:"Only '=' operator can be used for specifying default value.",MissingSemicolon:"Missing semicolon.",MissingPlugin:({missingPlugin:e})=>`This experimental syntax requires enabling the parser plugin: ${e.map((e=>JSON.stringify(e))).join(", ")}.`,MissingOneOfPlugins:({missingPlugin:e})=>`This experimental syntax requires enabling one of the following parser plugin(s): ${e.map((e=>JSON.stringify(e))).join(", ")}.`,MissingUnicodeEscape:"Expecting Unicode escape sequence \\uXXXX.",MixingCoalesceWithLogical:"Nullish coalescing operator(??) requires parens when mixing with logical operators.",ModuleAttributeDifferentFromType:"The only accepted module attribute is `type`.",ModuleAttributeInvalidValue:"Only string literals are allowed as module attribute values.",ModuleAttributesWithDuplicateKeys:({key:e})=>`Duplicate key "${e}" is not allowed in module attributes.`,ModuleExportNameHasLoneSurrogate:({surrogateCharCode:e})=>`An export name cannot include a lone surrogate, found '\\u${e.toString(16)}'.`,ModuleExportUndefined:({localName:e})=>`Export '${e}' is not defined.`,MultipleDefaultsInSwitch:"Multiple default clauses.",NewlineAfterThrow:"Illegal newline after throw.",NoCatchOrFinally:"Missing catch or finally clause.",NumberIdentifier:"Identifier directly after number.",NumericSeparatorInEscapeSequence:"Numeric separators are not allowed inside unicode escape sequences or hex escape sequences.",ObsoleteAwaitStar:"'await*' has been removed from the async functions proposal. Use Promise.all() instead.",OptionalChainingNoNew:"Constructors in/after an Optional Chain are not allowed.",OptionalChainingNoTemplate:"Tagged Template Literals are not allowed in optionalChain.",OverrideOnConstructor:"'override' modifier cannot appear on a constructor declaration.",ParamDupe:"Argument name clash.",PatternHasAccessor:"Object pattern can't contain getter or setter.",PatternHasMethod:"Object pattern can't contain methods.",PrivateInExpectedIn:({identifierName:e})=>`Private names are only allowed in property accesses (\`obj.#${e}\`) or in \`in\` expressions (\`#${e} in obj\`).`,PrivateNameRedeclaration:({identifierName:e})=>`Duplicate private name #${e}.`,RecordExpressionBarIncorrectEndSyntaxType:"Record expressions ending with '|}' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionBarIncorrectStartSyntaxType:"Record expressions starting with '{|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionHashIncorrectStartSyntaxType:"Record expressions starting with '#{' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",RecordNoProto:"'__proto__' is not allowed in Record expressions.",RestTrailingComma:"Unexpected trailing comma after rest element.",SloppyFunction:"In non-strict mode code, functions can only be declared at top level, inside a block, or as the body of an if statement.",StaticPrototype:"Classes may not have static property named prototype.",SuperNotAllowed:"`super()` is only valid inside a class constructor of a subclass. Maybe a typo in the method name ('constructor') or not extending another class?",SuperPrivateField:"Private fields can't be accessed on super.",TrailingDecorator:"Decorators must be attached to a class element.",TupleExpressionBarIncorrectEndSyntaxType:"Tuple expressions ending with '|]' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionBarIncorrectStartSyntaxType:"Tuple expressions starting with '[|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionHashIncorrectStartSyntaxType:"Tuple expressions starting with '#[' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",UnexpectedArgumentPlaceholder:"Unexpected argument placeholder.",UnexpectedAwaitAfterPipelineBody:'Unexpected "await" after pipeline body; await must have parentheses in minimal proposal.',UnexpectedDigitAfterHash:"Unexpected digit after hash token.",UnexpectedImportExport:"'import' and 'export' may only appear at the top level.",UnexpectedKeyword:({keyword:e})=>`Unexpected keyword '${e}'.`,UnexpectedLeadingDecorator:"Leading decorators must be attached to a class declaration.",UnexpectedLexicalDeclaration:"Lexical declaration cannot appear in a single-statement context.",UnexpectedNewTarget:"`new.target` can only be used in functions or class properties.",UnexpectedNumericSeparator:"A numeric separator is only allowed between two digits.",UnexpectedPrivateField:"Unexpected private name.",UnexpectedReservedWord:({reservedWord:e})=>`Unexpected reserved word '${e}'.`,UnexpectedSuper:"'super' is only allowed in object methods and classes.",UnexpectedToken:({expected:e,unexpected:t})=>`Unexpected token${t?` '${t}'.`:""}${e?`, expected "${e}"`:""}`,UnexpectedTokenUnaryExponentiation:"Illegal expression. Wrap left hand side or entire exponentiation in parentheses.",UnsupportedBind:"Binding should be performed on object property.",UnsupportedDecoratorExport:"A decorated export must export a class declaration.",UnsupportedDefaultExport:"Only expressions, functions or classes are allowed as the `default` export.",UnsupportedImport:"`import` can only be used in `import()` or `import.meta`.",UnsupportedMetaProperty:({target:e,onlyValidPropertyName:t})=>`The only valid meta property for ${e} is ${e}.${t}.`,UnsupportedParameterDecorator:"Decorators cannot be used to decorate parameters.",UnsupportedPropertyDecorator:"Decorators cannot be used to decorate object literal properties.",UnsupportedSuper:"'super' can only be used with function calls (i.e. super()) or in property accesses (i.e. super.prop or super[prop]).",UnterminatedComment:"Unterminated comment.",UnterminatedRegExp:"Unterminated regular expression.",UnterminatedString:"Unterminated string constant.",UnterminatedTemplate:"Unterminated template.",VarRedeclaration:({identifierName:e})=>`Identifier '${e}' has already been declared.`,YieldBindingIdentifier:"Can not use 'yield' as identifier inside a generator.",YieldInParameter:"Yield expression is not allowed in formal parameters.",ZeroDigitNumericSeparator:"Numeric separator can not be used after leading 0."};new Set(["ArrowFunctionExpression","AssignmentExpression","ConditionalExpression","YieldExpression"]);var h={PipeBodyIsTighter:"Unexpected yield after pipeline body; any yield expression acting as Hack-style pipe body must be parenthesized due to its loose operator precedence.",PipeTopicRequiresHackPipes:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.',PipeTopicUnbound:"Topic reference is unbound; it must be inside a pipe body.",PipeTopicUnconfiguredToken:({token:e})=>`Invalid topic token ${e}. In order to use ${e} as a topic reference, the pipelineOperator plugin must be configured with { "proposal": "hack", "topicToken": "${e}" }.`,PipeTopicUnused:"Hack-style pipe body does not contain a topic reference; Hack-style pipes must use topic at least once.",PipeUnparenthesizedBody:({type:e})=>`Hack-style pipe body cannot be an unparenthesized ${c({type:e})}; please wrap it in parentheses.`,PipelineBodyNoArrow:'Unexpected arrow "=>" after pipeline body; arrow function in pipeline body must be parenthesized.',PipelineBodySequenceExpression:"Pipeline body may not be a comma-separated sequence expression.",PipelineHeadSequenceExpression:"Pipeline head should not be a comma-separated sequence expression.",PipelineTopicUnused:"Pipeline is in topic style but does not use topic reference.",PrimaryTopicNotAllowed:"Topic reference was used in a lexical context without topic binding.",PrimaryTopicRequiresSmartPipeline:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.'};const d=["toMessage"],p=["message"];function f(e){let{toMessage:t}=e,i=n(e,d);return function e({loc:n,details:s}){return((e,t,n)=>Object.keys(n).map((e=>[e,n[e]])).filter((([,e])=>!!e)).map((([e,t])=>[e,"function"==typeof t?{value:t,enumerable:!1}:"string"==typeof t.reflect?Object.assign({},t,o(t.reflect.split("."))):t])).reduce(((e,[t,n])=>Object.defineProperty(e,t,Object.assign({configurable:!0},n))),Object.assign(new e,t)))(SyntaxError,Object.assign({},i,{loc:n}),{clone(t={}){const n=t.loc||{};return e({loc:new r("line"in n?n.line:this.loc.line,"column"in n?n.column:this.loc.column,"index"in n?n.index:this.loc.index),details:Object.assign({},this.details,t.details)})},details:{value:s,enumerable:!1},message:{get(){return`${t(this.details)} (${this.loc.line}:${this.loc.column})`},set(e){Object.defineProperty(this,"message",{value:e})}},pos:{reflect:"loc.index",enumerable:!0},missingPlugin:"missingPlugin"in s&&{reflect:"details.missingPlugin",enumerable:!0}})}}function m(e,t){if(Array.isArray(e))return t=>m(t,e[0]);const r={};for(const i of Object.keys(e)){const s=e[i],o="string"==typeof s?{message:()=>s}:"function"==typeof s?{message:s}:s,{message:a}=o,l=n(o,p),c="string"==typeof a?()=>a:a;r[i]=f(Object.assign({code:"BABEL_PARSER_SYNTAX_ERROR",reasonCode:i,toMessage:c},t?{syntaxPlugin:t}:{},l))}return r}const g=Object.assign({},m(a),m(u),m({StrictDelete:"Deleting local variable in strict mode.",StrictEvalArguments:({referenceName:e})=>`Assigning to '${e}' in strict mode.`,StrictEvalArgumentsBinding:({bindingName:e})=>`Binding '${e}' in strict mode.`,StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block.",StrictNumericEscape:"The only valid numeric escape in strict mode is '\\0'.",StrictOctalLiteral:"Legacy octal literals are not allowed in strict mode.",StrictWith:"'with' in strict mode."}),m`pipelineOperator`(h)),{defineProperty:y}=Object,b=(e,t)=>y(e,t,{enumerable:!1,value:e[t]});function v(e){return e.loc.start&&b(e.loc.start,"index"),e.loc.end&&b(e.loc.end,"index"),e}class x{constructor(e,t){this.token=void 0,this.preserveSpace=void 0,this.token=e,this.preserveSpace=!!t}}const w={brace:new x("{"),j_oTag:new x("<tag"),j_cTag:new x("</tag"),j_expr:new x("<tag>...</tag>",!0)};w.template=new x("`",!0);const S=!0,k=!0,P=!0,T=!0,O=!0;class C{constructor(e,t={}){this.label=void 0,this.keyword=void 0,this.beforeExpr=void 0,this.startsExpr=void 0,this.rightAssociative=void 0,this.isLoop=void 0,this.isAssign=void 0,this.prefix=void 0,this.postfix=void 0,this.binop=void 0,this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.rightAssociative=!!t.rightAssociative,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=null!=t.binop?t.binop:null,this.updateContext=null}}const A=new Map;function E(e,t={}){t.keyword=e;const n=F(e,t);return A.set(e,n),n}function N(e,t){return F(e,{beforeExpr:S,binop:t})}let M=-1;const I=[],D=[],R=[],L=[],_=[],B=[];function F(e,t={}){var n,r,i,s;return++M,D.push(e),R.push(null!=(n=t.binop)?n:-1),L.push(null!=(r=t.beforeExpr)&&r),_.push(null!=(i=t.startsExpr)&&i),B.push(null!=(s=t.prefix)&&s),I.push(new C(e,t)),M}function j(e,t={}){var n,r,i,s;return++M,A.set(e,M),D.push(e),R.push(null!=(n=t.binop)?n:-1),L.push(null!=(r=t.beforeExpr)&&r),_.push(null!=(i=t.startsExpr)&&i),B.push(null!=(s=t.prefix)&&s),I.push(new C("name",t)),M}const V={bracketL:F("[",{beforeExpr:S,startsExpr:k}),bracketHashL:F("#[",{beforeExpr:S,startsExpr:k}),bracketBarL:F("[|",{beforeExpr:S,startsExpr:k}),bracketR:F("]"),bracketBarR:F("|]"),braceL:F("{",{beforeExpr:S,startsExpr:k}),braceBarL:F("{|",{beforeExpr:S,startsExpr:k}),braceHashL:F("#{",{beforeExpr:S,startsExpr:k}),braceR:F("}"),braceBarR:F("|}"),parenL:F("(",{beforeExpr:S,startsExpr:k}),parenR:F(")"),comma:F(",",{beforeExpr:S}),semi:F(";",{beforeExpr:S}),colon:F(":",{beforeExpr:S}),doubleColon:F("::",{beforeExpr:S}),dot:F("."),question:F("?",{beforeExpr:S}),questionDot:F("?."),arrow:F("=>",{beforeExpr:S}),template:F("template"),ellipsis:F("...",{beforeExpr:S}),backQuote:F("`",{startsExpr:k}),dollarBraceL:F("${",{beforeExpr:S,startsExpr:k}),templateTail:F("...`",{startsExpr:k}),templateNonTail:F("...${",{beforeExpr:S,startsExpr:k}),at:F("@"),hash:F("#",{startsExpr:k}),interpreterDirective:F("#!..."),eq:F("=",{beforeExpr:S,isAssign:T}),assign:F("_=",{beforeExpr:S,isAssign:T}),slashAssign:F("_=",{beforeExpr:S,isAssign:T}),xorAssign:F("_=",{beforeExpr:S,isAssign:T}),moduloAssign:F("_=",{beforeExpr:S,isAssign:T}),incDec:F("++/--",{prefix:O,postfix:!0,startsExpr:k}),bang:F("!",{beforeExpr:S,prefix:O,startsExpr:k}),tilde:F("~",{beforeExpr:S,prefix:O,startsExpr:k}),doubleCaret:F("^^",{startsExpr:k}),doubleAt:F("@@",{startsExpr:k}),pipeline:N("|>",0),nullishCoalescing:N("??",1),logicalOR:N("||",1),logicalAND:N("&&",2),bitwiseOR:N("|",3),bitwiseXOR:N("^",4),bitwiseAND:N("&",5),equality:N("==/!=/===/!==",6),lt:N("</>/<=/>=",7),gt:N("</>/<=/>=",7),relational:N("</>/<=/>=",7),bitShift:N("<</>>/>>>",8),bitShiftL:N("<</>>/>>>",8),bitShiftR:N("<</>>/>>>",8),plusMin:F("+/-",{beforeExpr:S,binop:9,prefix:O,startsExpr:k}),modulo:F("%",{binop:10,startsExpr:k}),star:F("*",{binop:10}),slash:N("/",10),exponent:F("**",{beforeExpr:S,binop:11,rightAssociative:!0}),_in:E("in",{beforeExpr:S,binop:7}),_instanceof:E("instanceof",{beforeExpr:S,binop:7}),_break:E("break"),_case:E("case",{beforeExpr:S}),_catch:E("catch"),_continue:E("continue"),_debugger:E("debugger"),_default:E("default",{beforeExpr:S}),_else:E("else",{beforeExpr:S}),_finally:E("finally"),_function:E("function",{startsExpr:k}),_if:E("if"),_return:E("return",{beforeExpr:S}),_switch:E("switch"),_throw:E("throw",{beforeExpr:S,prefix:O,startsExpr:k}),_try:E("try"),_var:E("var"),_const:E("const"),_with:E("with"),_new:E("new",{beforeExpr:S,startsExpr:k}),_this:E("this",{startsExpr:k}),_super:E("super",{startsExpr:k}),_class:E("class",{startsExpr:k}),_extends:E("extends",{beforeExpr:S}),_export:E("export"),_import:E("import",{startsExpr:k}),_null:E("null",{startsExpr:k}),_true:E("true",{startsExpr:k}),_false:E("false",{startsExpr:k}),_typeof:E("typeof",{beforeExpr:S,prefix:O,startsExpr:k}),_void:E("void",{beforeExpr:S,prefix:O,startsExpr:k}),_delete:E("delete",{beforeExpr:S,prefix:O,startsExpr:k}),_do:E("do",{isLoop:P,beforeExpr:S}),_for:E("for",{isLoop:P}),_while:E("while",{isLoop:P}),_as:j("as",{startsExpr:k}),_assert:j("assert",{startsExpr:k}),_async:j("async",{startsExpr:k}),_await:j("await",{startsExpr:k}),_from:j("from",{startsExpr:k}),_get:j("get",{startsExpr:k}),_let:j("let",{startsExpr:k}),_meta:j("meta",{startsExpr:k}),_of:j("of",{startsExpr:k}),_sent:j("sent",{startsExpr:k}),_set:j("set",{startsExpr:k}),_static:j("static",{startsExpr:k}),_yield:j("yield",{startsExpr:k}),_asserts:j("asserts",{startsExpr:k}),_checks:j("checks",{startsExpr:k}),_exports:j("exports",{startsExpr:k}),_global:j("global",{startsExpr:k}),_implements:j("implements",{startsExpr:k}),_intrinsic:j("intrinsic",{startsExpr:k}),_infer:j("infer",{startsExpr:k}),_is:j("is",{startsExpr:k}),_mixins:j("mixins",{startsExpr:k}),_proto:j("proto",{startsExpr:k}),_require:j("require",{startsExpr:k}),_keyof:j("keyof",{startsExpr:k}),_readonly:j("readonly",{startsExpr:k}),_unique:j("unique",{startsExpr:k}),_abstract:j("abstract",{startsExpr:k}),_declare:j("declare",{startsExpr:k}),_enum:j("enum",{startsExpr:k}),_module:j("module",{startsExpr:k}),_namespace:j("namespace",{startsExpr:k}),_interface:j("interface",{startsExpr:k}),_type:j("type",{startsExpr:k}),_opaque:j("opaque",{startsExpr:k}),name:F("name",{startsExpr:k}),string:F("string",{startsExpr:k}),num:F("num",{startsExpr:k}),bigint:F("bigint",{startsExpr:k}),decimal:F("decimal",{startsExpr:k}),regexp:F("regexp",{startsExpr:k}),privateName:F("#name",{startsExpr:k}),eof:F("eof"),jsxName:F("jsxName"),jsxText:F("jsxText",{beforeExpr:!0}),jsxTagStart:F("jsxTagStart",{startsExpr:!0}),jsxTagEnd:F("jsxTagEnd"),placeholder:F("%%",{startsExpr:!0})};function z(e){return e>=93&&e<=128}function U(e){return e>=58&&e<=128}function H(e){return e>=58&&e<=132}function W(e){return _[e]}function $(e){return e>=125&&e<=127}function q(e){return e>=58&&e<=92}function Q(e){return D[e]}function K(e){return R[e]}function J(e){return e>=24&&e<=25}function G(e){return I[e]}I[8].updateContext=e=>{e.pop()},I[5].updateContext=I[7].updateContext=I[23].updateContext=e=>{e.push(w.brace)},I[22].updateContext=e=>{e[e.length-1]===w.template?e.pop():e.push(w.template)},I[138].updateContext=e=>{e.push(w.j_expr,w.j_oTag)};let X="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Y="-----------------------------------------------------------------------------------------------------------------------------------------------------";const Z=new RegExp("["+X+"]"),ee=new RegExp("["+X+Y+"]");X=Y=null;const te=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2637,96,16,1070,4050,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,46,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,482,44,11,6,17,0,322,29,19,43,1269,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4152,8,221,3,5761,15,7472,3104,541,1507,4938],ne=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,357,0,62,13,1495,6,110,6,6,9,4759,9,787719,239];function re(e,t){let n=65536;for(let r=0,i=t.length;r<i;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function ie(e){return e<65?36===e:e<=90||(e<97?95===e:e<=122||(e<=65535?e>=170&&Z.test(String.fromCharCode(e)):re(e,te)))}function se(e){return e<48?36===e:e<58||!(e<65)&&(e<=90||(e<97?95===e:e<=122||(e<=65535?e>=170&&ee.test(String.fromCharCode(e)):re(e,te)||re(e,ne))))}new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"]),new Set(["implements","interface","let","package","private","protected","public","static","yield"]),new Set(["eval","arguments"]);new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete","implements","interface","let","package","private","protected","public","static","yield","eval","arguments","enum","await"]);const oe=64;const ae=/\r\n?|[\n\u2028\u2029]/;new RegExp(ae.source,"g");function le(e){switch(e){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}new RegExp("(?=("+/(?:[^\S\n\r\u2028\u2029]|\/\/.*|\/\*.*?\*\/)*/y.source+"))\\1"+/(?=[\n\r\u2028\u2029]|\/\*(?!.*?\*\/)|$)/.source,"y");new Set([46,66,69,79,95,98,101,111]),new Set([46,88,95,120]);new Set([103,109,115,105,121,117,100,118]);class ce{constructor(e){this.var=new Set,this.lexical=new Set,this.functions=new Set,this.flags=e}}class ue{constructor(e,t){this.parser=void 0,this.scopeStack=[],this.inModule=void 0,this.undefinedExports=new Map,this.parser=e,this.inModule=t}get inFunction(){return(2&this.currentVarScopeFlags())>0}get allowSuper(){return(16&this.currentThisScopeFlags())>0}get allowDirectSuper(){return(32&this.currentThisScopeFlags())>0}get inClass(){return(64&this.currentThisScopeFlags())>0}get inClassAndNotInNonArrowFunction(){const e=this.currentThisScopeFlags();return(64&e)>0&&0==(2&e)}get inStaticBlock(){for(let e=this.scopeStack.length-1;;e--){const{flags:t}=this.scopeStack[e];if(128&t)return!0;if(323&t)return!1}}get inNonArrowFunction(){return(2&this.currentThisScopeFlags())>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}createScope(e){return new ce(e)}enter(e){this.scopeStack.push(this.createScope(e))}exit(){this.scopeStack.pop()}treatFunctionsAsVarInScope(e){return!!(130&e.flags||!this.parser.inModule&&1&e.flags)}declareName(e,t,n){let r=this.currentScope();if(8&t||16&t)this.checkRedeclarationInScope(r,e,t,n),16&t?r.functions.add(e):r.lexical.add(e),8&t&&this.maybeExportDefined(r,e);else if(4&t)for(let i=this.scopeStack.length-1;i>=0&&(r=this.scopeStack[i],this.checkRedeclarationInScope(r,e,t,n),r.var.add(e),this.maybeExportDefined(r,e),!(259&r.flags));--i);this.parser.inModule&&1&r.flags&&this.undefinedExports.delete(e)}maybeExportDefined(e,t){this.parser.inModule&&1&e.flags&&this.undefinedExports.delete(t)}checkRedeclarationInScope(e,t,n,r){this.isRedeclaredInScope(e,t,n)&&this.parser.raise(g.VarRedeclaration,{at:r,identifierName:t})}isRedeclaredInScope(e,t,n){return!!(1&n)&&(8&n?e.lexical.has(t)||e.functions.has(t)||e.var.has(t):16&n?e.lexical.has(t)||!this.treatFunctionsAsVarInScope(e)&&e.var.has(t):e.lexical.has(t)&&!(8&e.flags&&e.lexical.values().next().value===t)||!this.treatFunctionsAsVarInScope(e)&&e.functions.has(t))}checkLocalExport(e){const{name:t}=e,n=this.scopeStack[0];n.lexical.has(t)||n.var.has(t)||n.functions.has(t)||this.undefinedExports.set(t,e.loc.start)}currentScope(){return this.scopeStack[this.scopeStack.length-1]}currentVarScopeFlags(){for(let e=this.scopeStack.length-1;;e--){const{flags:t}=this.scopeStack[e];if(259&t)return t}}currentThisScopeFlags(){for(let e=this.scopeStack.length-1;;e--){const{flags:t}=this.scopeStack[e];if(323&t&&!(4&t))return t}}}class he extends ce{constructor(...e){super(...e),this.declareFunctions=new Set}}class de extends ue{createScope(e){return new he(e)}declareName(e,t,n){const r=this.currentScope();if(2048&t)return this.checkRedeclarationInScope(r,e,t,n),this.maybeExportDefined(r,e),void r.declareFunctions.add(e);super.declareName(e,t,n)}isRedeclaredInScope(e,t,n){return!!super.isRedeclaredInScope(e,t,n)||!!(2048&n)&&!e.declareFunctions.has(t)&&(e.lexical.has(t)||e.functions.has(t))}checkLocalExport(e){this.scopeStack[0].declareFunctions.has(e.name)||super.checkLocalExport(e)}}class pe{constructor(e,t,n){this.type="",this.start=t,this.end=0,this.loc=new i(n),null!=e&&e.options.ranges&&(this.range=[t,0]),null!=e&&e.filename&&(this.loc.filename=e.filename)}}const fe=pe.prototype;function me(e){const{type:t,start:n,end:r,loc:i,range:s,extra:o,name:a}=e,l=Object.create(fe);return l.type=t,l.start=n,l.end=r,l.loc=i,l.range=s,l.extra=o,l.name=a,"Placeholder"===t&&(l.expectedNode=e.expectedNode),l}fe.__clone=function(){const e=new pe,t=Object.keys(this);for(let n=0,r=t.length;n<r;n++){const r=t[n];"leadingComments"!==r&&"trailingComments"!==r&&"innerComments"!==r&&(e[r]=this[r])}return e};const ge=new Set(["_","any","bool","boolean","empty","extends","false","interface","mixed","null","number","static","string","true","typeof","void"]),ye=m`flow`({AmbiguousConditionalArrow:"Ambiguous expression: wrap the arrow functions in parentheses to disambiguate.",AmbiguousDeclareModuleKind:"Found both `declare module.exports` and `declare export` in the same module. Modules can only have 1 since they are either an ES module or they are a CommonJS module.",AssignReservedType:({reservedType:e})=>`Cannot overwrite reserved type ${e}.`,DeclareClassElement:"The `declare` modifier can only appear on class fields.",DeclareClassFieldInitializer:"Initializers are not allowed in fields with the `declare` modifier.",DuplicateDeclareModuleExports:"Duplicate `declare module.exports` statement.",EnumBooleanMemberNotInitialized:({memberName:e,enumName:t})=>`Boolean enum members need to be initialized. Use either \`${e} = true,\` or \`${e} = false,\` in enum \`${t}\`.`,EnumDuplicateMemberName:({memberName:e,enumName:t})=>`Enum member names need to be unique, but the name \`${e}\` has already been used before in enum \`${t}\`.`,EnumInconsistentMemberValues:({enumName:e})=>`Enum \`${e}\` has inconsistent member initializers. Either use no initializers, or consistently use literals (either booleans, numbers, or strings) for all member initializers.`,EnumInvalidExplicitType:({invalidEnumType:e,enumName:t})=>`Enum type \`${e}\` is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${t}\`.`,EnumInvalidExplicitTypeUnknownSupplied:({enumName:e})=>`Supplied enum type is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${e}\`.`,EnumInvalidMemberInitializerPrimaryType:({enumName:e,memberName:t,explicitType:n})=>`Enum \`${e}\` has type \`${n}\`, so the initializer of \`${t}\` needs to be a ${n} literal.`,EnumInvalidMemberInitializerSymbolType:({enumName:e,memberName:t})=>`Symbol enum members cannot be initialized. Use \`${t},\` in enum \`${e}\`.`,EnumInvalidMemberInitializerUnknownType:({enumName:e,memberName:t})=>`The enum member initializer for \`${t}\` needs to be a literal (either a boolean, number, or string) in enum \`${e}\`.`,EnumInvalidMemberName:({enumName:e,memberName:t,suggestion:n})=>`Enum member names cannot start with lowercase 'a' through 'z'. Instead of using \`${t}\`, consider using \`${n}\`, in enum \`${e}\`.`,EnumNumberMemberNotInitialized:({enumName:e,memberName:t})=>`Number enum members need to be initialized, e.g. \`${t} = 1\` in enum \`${e}\`.`,EnumStringMemberInconsistentlyInitailized:({enumName:e})=>`String enum members need to consistently either all use initializers, or use no initializers, in enum \`${e}\`.`,GetterMayNotHaveThisParam:"A getter cannot have a `this` parameter.",ImportTypeShorthandOnlyInPureImport:"The `type` and `typeof` keywords on named imports can only be used on regular `import` statements. It cannot be used with `import type` or `import typeof` statements.",InexactInsideExact:"Explicit inexact syntax cannot appear inside an explicit exact object type.",InexactInsideNonObject:"Explicit inexact syntax cannot appear in class or interface definitions.",InexactVariance:"Explicit inexact syntax cannot have variance.",InvalidNonTypeImportInDeclareModule:"Imports within a `declare module` body must always be `import type` or `import typeof`.",MissingTypeParamDefault:"Type parameter declaration needs a default, since a preceding type parameter declaration has a default.",NestedDeclareModule:"`declare module` cannot be used inside another `declare module`.",NestedFlowComment:"Cannot have a flow comment inside another flow comment.",PatternIsOptional:Object.assign({message:"A binding pattern parameter cannot be optional in an implementation signature."},{reasonCode:"OptionalBindingPattern"}),SetterMayNotHaveThisParam:"A setter cannot have a `this` parameter.",SpreadVariance:"Spread properties cannot have variance.",ThisParamAnnotationRequired:"A type annotation is required for the `this` parameter.",ThisParamBannedInConstructor:"Constructors cannot have a `this` parameter; constructors don't bind `this` like other functions.",ThisParamMayNotBeOptional:"The `this` parameter cannot be optional.",ThisParamMustBeFirst:"The `this` parameter must be the first function parameter.",ThisParamNoDefault:"The `this` parameter may not have a default value.",TypeBeforeInitializer:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeCastInPattern:"The type cast expression is expected to be wrapped with parenthesis.",UnexpectedExplicitInexactInObject:"Explicit inexact syntax must appear at the end of an inexact object.",UnexpectedReservedType:({reservedType:e})=>`Unexpected reserved type ${e}.`,UnexpectedReservedUnderscore:"`_` is only allowed as a type argument to call or new.",UnexpectedSpaceBetweenModuloChecks:"Spaces between `%` and `checks` are not allowed here.",UnexpectedSpreadType:"Spread operator cannot appear in class or interface definitions.",UnexpectedSubtractionOperand:'Unexpected token, expected "number" or "bigint".',UnexpectedTokenAfterTypeParameter:"Expected an arrow function after this type parameter declaration.",UnexpectedTypeParameterBeforeAsyncArrowFunction:"Type parameters must come after the async keyword, e.g. instead of `<T> async () => {}`, use `async <T>() => {}`.",UnsupportedDeclareExportKind:({unsupportedExportKind:e,suggestion:t})=>`\`declare export ${e}\` is not supported. Use \`${t}\` instead.`,UnsupportedStatementInDeclareModule:"Only declares and type imports are allowed inside declare module.",UnterminatedFlowComment:"Unterminated flow-comment."});function be(e){return"type"===e.importKind||"typeof"===e.importKind}function ve(e){return U(e)&&97!==e}const xe={const:"declare export var",let:"declare export var",type:"export type",interface:"export interface"},we=/\*?\s*@((?:no)?flow)\b/,Se={__proto__:null,quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:""},ke=m`jsx`({AttributeIsEmpty:"JSX attributes must only be assigned a non-empty expression.",MissingClosingTagElement:({openingTagName:e})=>`Expected corresponding JSX closing tag for <${e}>.`,MissingClosingTagFragment:"Expected corresponding JSX closing tag for <>.",UnexpectedSequenceExpression:"Sequence expressions cannot be directly nested inside JSX. Did you mean to wrap it in parentheses (...)?",UnexpectedToken:({unexpected:e,HTMLEntity:t})=>`Unexpected token \`${e}\`. Did you mean \`${t}\` or \`{'${e}'}\`?`,UnsupportedJsxValue:"JSX value should be either an expression or a quoted JSX text.",UnterminatedJsxContent:"Unterminated JSX contents.",UnwrappedAdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>?"});function Pe(e){return!!e&&("JSXOpeningFragment"===e.type||"JSXClosingFragment"===e.type)}function Te(e){if("JSXIdentifier"===e.type)return e.name;if("JSXNamespacedName"===e.type)return e.namespace.name+":"+e.name.name;if("JSXMemberExpression"===e.type)return Te(e.object)+"."+Te(e.property);throw new Error("Node had unexpected type: "+e.type)}class Oe extends ce{constructor(...e){super(...e),this.types=new Set,this.enums=new Set,this.constEnums=new Set,this.classes=new Set,this.exportOnlyBindings=new Set}}class Ce extends ue{createScope(e){return new Oe(e)}declareName(e,t,n){const r=this.currentScope();if(1024&t)return this.maybeExportDefined(r,e),void r.exportOnlyBindings.add(e);super.declareName(e,t,n),2&t&&(1&t||(this.checkRedeclarationInScope(r,e,t,n),this.maybeExportDefined(r,e)),r.types.add(e)),256&t&&r.enums.add(e),512&t&&r.constEnums.add(e),128&t&&r.classes.add(e)}isRedeclaredInScope(e,t,n){return e.enums.has(t)?!(256&n)||!!(512&n)!==e.constEnums.has(t):128&n&&e.classes.has(t)?!!e.lexical.has(t)&&!!(1&n):!!(2&n&&e.types.has(t))||super.isRedeclaredInScope(e,t,n)}checkLocalExport(e){const t=this.scopeStack[0],{name:n}=e;t.types.has(n)||t.exportOnlyBindings.has(n)||super.checkLocalExport(e)}}function Ae(e){if(!e)throw new Error("Assert fail")}const Ee=m`typescript`({AbstractMethodHasImplementation:({methodName:e})=>`Method '${e}' cannot have an implementation because it is marked abstract.`,AbstractPropertyHasInitializer:({propertyName:e})=>`Property '${e}' cannot have an initializer because it is marked abstract.`,AccesorCannotDeclareThisParameter:"'get' and 'set' accessors cannot declare 'this' parameters.",AccesorCannotHaveTypeParameters:"An accessor cannot have type parameters.",CannotFindName:({name:e})=>`Cannot find name '${e}'.`,ClassMethodHasDeclare:"Class methods cannot have the 'declare' modifier.",ClassMethodHasReadonly:"Class methods cannot have the 'readonly' modifier.",ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference:"A 'const' initializer in an ambient context must be a string or numeric literal or literal enum reference.",ConstructorHasTypeParameters:"Type parameters cannot appear on a constructor declaration.",DeclareAccessor:({kind:e})=>`'declare' is not allowed in ${e}ters.`,DeclareClassFieldHasInitializer:"Initializers are not allowed in ambient contexts.",DeclareFunctionHasImplementation:"An implementation cannot be declared in ambient contexts.",DuplicateAccessibilityModifier:({modifier:e})=>"Accessibility modifier already seen.",DuplicateModifier:({modifier:e})=>`Duplicate modifier: '${e}'.`,EmptyHeritageClauseType:({token:e})=>`'${e}' list cannot be empty.`,EmptyTypeArguments:"Type argument list cannot be empty.",EmptyTypeParameters:"Type parameter list cannot be empty.",ExpectedAmbientAfterExportDeclare:"'export declare' must be followed by an ambient declaration.",ImportAliasHasImportType:"An import alias can not use 'import type'.",IncompatibleModifiers:({modifiers:e})=>`'${e[0]}' modifier cannot be used with '${e[1]}' modifier.`,IndexSignatureHasAbstract:"Index signatures cannot have the 'abstract' modifier.",IndexSignatureHasAccessibility:({modifier:e})=>`Index signatures cannot have an accessibility modifier ('${e}').`,IndexSignatureHasDeclare:"Index signatures cannot have the 'declare' modifier.",IndexSignatureHasOverride:"'override' modifier cannot appear on an index signature.",IndexSignatureHasStatic:"Index signatures cannot have the 'static' modifier.",InitializerNotAllowedInAmbientContext:"Initializers are not allowed in ambient contexts.",InvalidModifierOnTypeMember:({modifier:e})=>`'${e}' modifier cannot appear on a type member.`,InvalidModifierOnTypeParameter:({modifier:e})=>`'${e}' modifier cannot appear on a type parameter.`,InvalidModifierOnTypeParameterPositions:({modifier:e})=>`'${e}' modifier can only appear on a type parameter of a class, interface or type alias.`,InvalidModifiersOrder:({orderedModifiers:e})=>`'${e[0]}' modifier must precede '${e[1]}' modifier.`,InvalidPropertyAccessAfterInstantiationExpression:"Invalid property access after an instantiation expression. You can either wrap the instantiation expression in parentheses, or delete the type arguments.",InvalidTupleMemberLabel:"Tuple members must be labeled with a simple identifier.",MissingInterfaceName:"'interface' declarations must be followed by an identifier.",MixedLabeledAndUnlabeledElements:"Tuple members must all have names or all not have names.",NonAbstractClassHasAbstractMethod:"Abstract methods can only appear within an abstract class.",NonClassMethodPropertyHasAbstractModifer:"'abstract' modifier can only appear on a class, method, or property declaration.",OptionalTypeBeforeRequired:"A required element cannot follow an optional element.",OverrideNotInSubClass:"This member cannot have an 'override' modifier because its containing class does not extend another class.",PatternIsOptional:"A binding pattern parameter cannot be optional in an implementation signature.",PrivateElementHasAbstract:"Private elements cannot have the 'abstract' modifier.",PrivateElementHasAccessibility:({modifier:e})=>`Private elements cannot have an accessibility modifier ('${e}').`,ReadonlyForMethodSignature:"'readonly' modifier can only appear on a property declaration or index signature.",ReservedArrowTypeParam:"This syntax is reserved in files with the .mts or .cts extension. Add a trailing comma, as in `<T,>() => ...`.",ReservedTypeAssertion:"This syntax is reserved in files with the .mts or .cts extension. Use an `as` expression instead.",SetAccesorCannotHaveOptionalParameter:"A 'set' accessor cannot have an optional parameter.",SetAccesorCannotHaveRestParameter:"A 'set' accessor cannot have rest parameter.",SetAccesorCannotHaveReturnType:"A 'set' accessor cannot have a return type annotation.",SingleTypeParameterWithoutTrailingComma:({typeParameterName:e})=>`Single type parameter ${e} should have a trailing comma. Example usage: <${e},>.`,StaticBlockCannotHaveModifier:"Static class blocks cannot have any modifier.",TypeAnnotationAfterAssign:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeImportCannotSpecifyDefaultAndNamed:"A type-only import can specify a default import or named bindings, but not both.",TypeModifierIsUsedInTypeExports:"The 'type' modifier cannot be used on a named export when 'export type' is used on its export statement.",TypeModifierIsUsedInTypeImports:"The 'type' modifier cannot be used on a named import when 'import type' is used on its import statement.",UnexpectedParameterModifier:"A parameter property is only allowed in a constructor implementation.",UnexpectedReadonly:"'readonly' type modifier is only permitted on array and tuple literal types.",UnexpectedTypeAnnotation:"Did not expect a type annotation here.",UnexpectedTypeCastInParameter:"Unexpected type cast in parameter position.",UnsupportedImportTypeArgument:"Argument in a type import must be a string literal.",UnsupportedParameterPropertyKind:"A parameter property may not be declared using a binding pattern.",UnsupportedSignatureParameterKind:({type:e})=>`Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got ${e}.`});function Ne(e){return"private"===e||"public"===e||"protected"===e}function Me(e){return"in"===e||"out"===e}function Ie(e){if("MemberExpression"!==e.type)return!1;const{computed:t,property:n}=e;return(!t||"StringLiteral"===n.type||!("TemplateLiteral"!==n.type||n.expressions.length>0))&&De(e.object)}function De(e){return"Identifier"===e.type||"MemberExpression"===e.type&&!e.computed&&De(e.object)}const Re=m`placeholders`({ClassNameIsRequired:"A class name is required.",UnexpectedSpace:"Unexpected space in placeholder."});const Le={estree:e=>class extends e{parse(){const e=v(super.parse());return this.options.tokens&&(e.tokens=e.tokens.map(v)),e}parseRegExpLiteral({pattern:e,flags:t}){let n=null;try{n=new RegExp(e,t)}catch(e){}const r=this.estreeParseLiteral(n);return r.regex={pattern:e,flags:t},r}parseBigIntLiteral(e){let t;try{t=BigInt(e)}catch(e){t=null}const n=this.estreeParseLiteral(t);return n.bigint=String(n.value||e),n}parseDecimalLiteral(e){const t=this.estreeParseLiteral(null);return t.decimal=String(t.value||e),t}estreeParseLiteral(e){return this.parseLiteral(e,"Literal")}parseStringLiteral(e){return this.estreeParseLiteral(e)}parseNumericLiteral(e){return this.estreeParseLiteral(e)}parseNullLiteral(){return this.estreeParseLiteral(null)}parseBooleanLiteral(e){return this.estreeParseLiteral(e)}directiveToStmt(e){const t=e.value,n=this.startNodeAt(e.start,e.loc.start),r=this.startNodeAt(t.start,t.loc.start);return r.value=t.extra.expressionValue,r.raw=t.extra.raw,n.expression=this.finishNodeAt(r,"Literal",t.loc.end),n.directive=t.extra.raw.slice(1,-1),this.finishNodeAt(n,"ExpressionStatement",e.loc.end)}initFunction(e,t){super.initFunction(e,t),e.expression=!1}checkDeclaration(e){null!=e&&this.isObjectProperty(e)?this.checkDeclaration(e.value):super.checkDeclaration(e)}getObjectOrClassMethodParams(e){return e.value.params}isValidDirective(e){var t;return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&!(null!=(t=e.expression.extra)&&t.parenthesized)}parseBlockBody(e,...t){super.parseBlockBody(e,...t);const n=e.directives.map((e=>this.directiveToStmt(e)));e.body=n.concat(e.body),delete e.directives}pushClassMethod(e,t,n,r,i,s){this.parseMethod(t,n,r,i,s,"ClassMethod",!0),t.typeParameters&&(t.value.typeParameters=t.typeParameters,delete t.typeParameters),e.body.push(t)}parsePrivateName(){const e=super.parsePrivateName();return this.getPluginOption("estree","classFeatures")?this.convertPrivateNameToPrivateIdentifier(e):e}convertPrivateNameToPrivateIdentifier(e){const t=super.getPrivateNameSV(e);return delete e.id,e.name=t,e.type="PrivateIdentifier",e}isPrivateName(e){return this.getPluginOption("estree","classFeatures")?"PrivateIdentifier"===e.type:super.isPrivateName(e)}getPrivateNameSV(e){return this.getPluginOption("estree","classFeatures")?e.name:super.getPrivateNameSV(e)}parseLiteral(e,t){const n=super.parseLiteral(e,t);return n.raw=n.extra.raw,delete n.extra,n}parseFunctionBody(e,t,n=!1){super.parseFunctionBody(e,t,n),e.expression="BlockStatement"!==e.body.type}parseMethod(e,t,n,r,i,s,o=!1){let a=this.startNode();return a.kind=e.kind,a=super.parseMethod(a,t,n,r,i,s,o),a.type="FunctionExpression",delete a.kind,e.value=a,"ClassPrivateMethod"===s&&(e.computed=!1),this.finishNode(e,"MethodDefinition")}parseClassProperty(...e){const t=super.parseClassProperty(...e);return this.getPluginOption("estree","classFeatures")?(t.type="PropertyDefinition",t):t}parseClassPrivateProperty(...e){const t=super.parseClassPrivateProperty(...e);return this.getPluginOption("estree","classFeatures")?(t.type="PropertyDefinition",t.computed=!1,t):t}parseObjectMethod(e,t,n,r,i){const s=super.parseObjectMethod(e,t,n,r,i);return s&&(s.type="Property","method"===s.kind&&(s.kind="init"),s.shorthand=!1),s}parseObjectProperty(e,t,n,r,i){const s=super.parseObjectProperty(e,t,n,r,i);return s&&(s.kind="init",s.type="Property"),s}isValidLVal(e,t,n){return"Property"===e?"value":super.isValidLVal(e,t,n)}isAssignable(e,t){return null!=e&&this.isObjectProperty(e)?this.isAssignable(e.value,t):super.isAssignable(e,t)}toAssignable(e,t=!1){if(null!=e&&this.isObjectProperty(e)){const{key:n,value:r}=e;this.isPrivateName(n)&&this.classScope.usePrivateName(this.getPrivateNameSV(n),n.loc.start),this.toAssignable(r,t)}else super.toAssignable(e,t)}toAssignableObjectExpressionProp(e,t,n){"get"===e.kind||"set"===e.kind?this.raise(g.PatternHasAccessor,{at:e.key}):e.method?this.raise(g.PatternHasMethod,{at:e.key}):super.toAssignableObjectExpressionProp(e,t,n)}finishCallExpression(e,t){const n=super.finishCallExpression(e,t);var r;"Import"===n.callee.type&&(n.type="ImportExpression",n.source=n.arguments[0],this.hasPlugin("importAssertions")&&(n.attributes=null!=(r=n.arguments[1])?r:null),delete n.arguments,delete n.callee);return n}toReferencedArguments(e){"ImportExpression"!==e.type&&super.toReferencedArguments(e)}parseExport(e){const t=super.parseExport(e);switch(t.type){case"ExportAllDeclaration":t.exported=null;break;case"ExportNamedDeclaration":1===t.specifiers.length&&"ExportNamespaceSpecifier"===t.specifiers[0].type&&(t.type="ExportAllDeclaration",t.exported=t.specifiers[0].exported,delete t.specifiers)}return t}parseSubscript(e,t,n,r,i){const s=super.parseSubscript(e,t,n,r,i);if(i.optionalChainMember){if("OptionalMemberExpression"!==s.type&&"OptionalCallExpression"!==s.type||(s.type=s.type.substring(8)),i.stop){const e=this.startNodeAtNode(s);return e.expression=s,this.finishNode(e,"ChainExpression")}}else"MemberExpression"!==s.type&&"CallExpression"!==s.type||(s.optional=!1);return s}hasPropertyAsPrivateName(e){return"ChainExpression"===e.type&&(e=e.expression),super.hasPropertyAsPrivateName(e)}isOptionalChain(e){return"ChainExpression"===e.type}isObjectProperty(e){return"Property"===e.type&&"init"===e.kind&&!e.method}isObjectMethod(e){return e.method||"get"===e.kind||"set"===e.kind}finishNodeAt(e,t,n){return v(super.finishNodeAt(e,t,n))}resetStartLocation(e,t,n){super.resetStartLocation(e,t,n),v(e)}resetEndLocation(e,t=this.state.lastTokEndLoc){super.resetEndLocation(e,t),v(e)}},jsx:e=>class extends e{jsxReadToken(){let e="",t=this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(ke.UnterminatedJsxContent,{at:this.state.startLoc});const n=this.input.charCodeAt(this.state.pos);switch(n){case 60:case 123:return this.state.pos===this.state.start?60===n&&this.state.canStartJSXElement?(++this.state.pos,this.finishToken(138)):super.getTokenFromCode(n):(e+=this.input.slice(t,this.state.pos),this.finishToken(137,e));case 38:e+=this.input.slice(t,this.state.pos),e+=this.jsxReadEntity(),t=this.state.pos;break;default:le(n)?(e+=this.input.slice(t,this.state.pos),e+=this.jsxReadNewLine(!0),t=this.state.pos):++this.state.pos}}}jsxReadNewLine(e){const t=this.input.charCodeAt(this.state.pos);let n;return++this.state.pos,13===t&&10===this.input.charCodeAt(this.state.pos)?(++this.state.pos,n=e?"\n":"\r\n"):n=String.fromCharCode(t),++this.state.curLine,this.state.lineStart=this.state.pos,n}jsxReadString(e){let t="",n=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(g.UnterminatedString,{at:this.state.startLoc});const r=this.input.charCodeAt(this.state.pos);if(r===e)break;38===r?(t+=this.input.slice(n,this.state.pos),t+=this.jsxReadEntity(),n=this.state.pos):le(r)?(t+=this.input.slice(n,this.state.pos),t+=this.jsxReadNewLine(!1),n=this.state.pos):++this.state.pos}return t+=this.input.slice(n,this.state.pos++),this.finishToken(129,t)}jsxReadEntity(){const e=++this.state.pos;if(35===this.codePointAtPos(this.state.pos)){++this.state.pos;let e=10;120===this.codePointAtPos(this.state.pos)&&(e=16,++this.state.pos);const t=this.readInt(e,void 0,!1,"bail");if(null!==t&&59===this.codePointAtPos(this.state.pos))return++this.state.pos,String.fromCodePoint(t)}else{let t=0,n=!1;for(;t++<10&&this.state.pos<this.length&&!(n=59==this.codePointAtPos(this.state.pos));)++this.state.pos;if(n){const t=this.input.slice(e,this.state.pos),n=Se[t];if(++this.state.pos,n)return n}}return this.state.pos=e,"&"}jsxReadWord(){let e;const t=this.state.pos;do{e=this.input.charCodeAt(++this.state.pos)}while(se(e)||45===e);return this.finishToken(136,this.input.slice(t,this.state.pos))}jsxParseIdentifier(){const e=this.startNode();return this.match(136)?e.name=this.state.value:q(this.state.type)?e.name=Q(this.state.type):this.unexpected(),this.next(),this.finishNode(e,"JSXIdentifier")}jsxParseNamespacedName(){const e=this.state.start,t=this.state.startLoc,n=this.jsxParseIdentifier();if(!this.eat(14))return n;const r=this.startNodeAt(e,t);return r.namespace=n,r.name=this.jsxParseIdentifier(),this.finishNode(r,"JSXNamespacedName")}jsxParseElementName(){const e=this.state.start,t=this.state.startLoc;let n=this.jsxParseNamespacedName();if("JSXNamespacedName"===n.type)return n;for(;this.eat(16);){const r=this.startNodeAt(e,t);r.object=n,r.property=this.jsxParseIdentifier(),n=this.finishNode(r,"JSXMemberExpression")}return n}jsxParseAttributeValue(){let e;switch(this.state.type){case 5:return e=this.startNode(),this.setContext(w.brace),this.next(),e=this.jsxParseExpressionContainer(e,w.j_oTag),"JSXEmptyExpression"===e.expression.type&&this.raise(ke.AttributeIsEmpty,{at:e}),e;case 138:case 129:return this.parseExprAtom();default:throw this.raise(ke.UnsupportedJsxValue,{at:this.state.startLoc})}}jsxParseEmptyExpression(){const e=this.startNodeAt(this.state.lastTokEndLoc.index,this.state.lastTokEndLoc);return this.finishNodeAt(e,"JSXEmptyExpression",this.state.startLoc)}jsxParseSpreadChild(e){return this.next(),e.expression=this.parseExpression(),this.setContext(w.j_oTag),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(e,"JSXSpreadChild")}jsxParseExpressionContainer(e,t){if(this.match(8))e.expression=this.jsxParseEmptyExpression();else{const t=this.parseExpression();e.expression=t}return this.setContext(t),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(e,"JSXExpressionContainer")}jsxParseAttribute(){const e=this.startNode();return this.match(5)?(this.setContext(w.brace),this.next(),this.expect(21),e.argument=this.parseMaybeAssignAllowIn(),this.setContext(w.j_oTag),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(e,"JSXSpreadAttribute")):(e.name=this.jsxParseNamespacedName(),e.value=this.eat(29)?this.jsxParseAttributeValue():null,this.finishNode(e,"JSXAttribute"))}jsxParseOpeningElementAt(e,t){const n=this.startNodeAt(e,t);return this.eat(139)?this.finishNode(n,"JSXOpeningFragment"):(n.name=this.jsxParseElementName(),this.jsxParseOpeningElementAfterName(n))}jsxParseOpeningElementAfterName(e){const t=[];for(;!this.match(56)&&!this.match(139);)t.push(this.jsxParseAttribute());return e.attributes=t,e.selfClosing=this.eat(56),this.expect(139),this.finishNode(e,"JSXOpeningElement")}jsxParseClosingElementAt(e,t){const n=this.startNodeAt(e,t);return this.eat(139)?this.finishNode(n,"JSXClosingFragment"):(n.name=this.jsxParseElementName(),this.expect(139),this.finishNode(n,"JSXClosingElement"))}jsxParseElementAt(e,t){const n=this.startNodeAt(e,t),r=[],i=this.jsxParseOpeningElementAt(e,t);let s=null;if(!i.selfClosing){e:for(;;)switch(this.state.type){case 138:if(e=this.state.start,t=this.state.startLoc,this.next(),this.eat(56)){s=this.jsxParseClosingElementAt(e,t);break e}r.push(this.jsxParseElementAt(e,t));break;case 137:r.push(this.parseExprAtom());break;case 5:{const e=this.startNode();this.setContext(w.brace),this.next(),this.match(21)?r.push(this.jsxParseSpreadChild(e)):r.push(this.jsxParseExpressionContainer(e,w.j_expr));break}default:throw this.unexpected()}Pe(i)&&!Pe(s)&&null!==s?this.raise(ke.MissingClosingTagFragment,{at:s}):!Pe(i)&&Pe(s)?this.raise(ke.MissingClosingTagElement,{at:s,openingTagName:Te(i.name)}):Pe(i)||Pe(s)||Te(s.name)!==Te(i.name)&&this.raise(ke.MissingClosingTagElement,{at:s,openingTagName:Te(i.name)})}if(Pe(i)?(n.openingFragment=i,n.closingFragment=s):(n.openingElement=i,n.closingElement=s),n.children=r,this.match(47))throw this.raise(ke.UnwrappedAdjacentJSXElements,{at:this.state.startLoc});return Pe(i)?this.finishNode(n,"JSXFragment"):this.finishNode(n,"JSXElement")}jsxParseElement(){const e=this.state.start,t=this.state.startLoc;return this.next(),this.jsxParseElementAt(e,t)}setContext(e){const{context:t}=this.state;t[t.length-1]=e}parseExprAtom(e){return this.match(137)?this.parseLiteral(this.state.value,"JSXText"):this.match(138)?this.jsxParseElement():this.match(47)&&33!==this.input.charCodeAt(this.state.pos)?(this.replaceToken(138),this.jsxParseElement()):super.parseExprAtom(e)}skipSpace(){this.curContext().preserveSpace||super.skipSpace()}getTokenFromCode(e){const t=this.curContext();if(t===w.j_expr)return this.jsxReadToken();if(t===w.j_oTag||t===w.j_cTag){if(ie(e))return this.jsxReadWord();if(62===e)return++this.state.pos,this.finishToken(139);if((34===e||39===e)&&t===w.j_oTag)return this.jsxReadString(e)}return 60===e&&this.state.canStartJSXElement&&33!==this.input.charCodeAt(this.state.pos+1)?(++this.state.pos,this.finishToken(138)):super.getTokenFromCode(e)}updateContext(e){const{context:t,type:n}=this.state;if(56===n&&138===e)t.splice(-2,2,w.j_cTag),this.state.canStartJSXElement=!1;else if(138===n)t.push(w.j_oTag);else if(139===n){const n=t[t.length-1];n===w.j_oTag&&56===e||n===w.j_cTag?(t.pop(),this.state.canStartJSXElement=t[t.length-1]===w.j_expr):(this.setContext(w.j_expr),this.state.canStartJSXElement=!0)}else this.state.canStartJSXElement=L[n]}},flow:e=>class extends e{constructor(...e){super(...e),this.flowPragma=void 0}getScopeHandler(){return de}shouldParseTypes(){return this.getPluginOption("flow","all")||"flow"===this.flowPragma}shouldParseEnums(){return!!this.getPluginOption("flow","enums")}finishToken(e,t){return 129!==e&&13!==e&&28!==e&&void 0===this.flowPragma&&(this.flowPragma=null),super.finishToken(e,t)}addComment(e){if(void 0===this.flowPragma){const t=we.exec(e.value);if(t)if("flow"===t[1])this.flowPragma="flow";else{if("noflow"!==t[1])throw new Error("Unexpected flow pragma");this.flowPragma="noflow"}}return super.addComment(e)}flowParseTypeInitialiser(e){const t=this.state.inType;this.state.inType=!0,this.expect(e||14);const n=this.flowParseType();return this.state.inType=t,n}flowParsePredicate(){const e=this.startNode(),t=this.state.startLoc;return this.next(),this.expectContextual(107),this.state.lastTokStart>t.index+1&&this.raise(ye.UnexpectedSpaceBetweenModuloChecks,{at:t}),this.eat(10)?(e.value=super.parseExpression(),this.expect(11),this.finishNode(e,"DeclaredPredicate")):this.finishNode(e,"InferredPredicate")}flowParseTypeAndPredicateInitialiser(){const e=this.state.inType;this.state.inType=!0,this.expect(14);let t=null,n=null;return this.match(54)?(this.state.inType=e,n=this.flowParsePredicate()):(t=this.flowParseType(),this.state.inType=e,this.match(54)&&(n=this.flowParsePredicate())),[t,n]}flowParseDeclareClass(e){return this.next(),this.flowParseInterfaceish(e,!0),this.finishNode(e,"DeclareClass")}flowParseDeclareFunction(e){this.next();const t=e.id=this.parseIdentifier(),n=this.startNode(),r=this.startNode();this.match(47)?n.typeParameters=this.flowParseTypeParameterDeclaration():n.typeParameters=null,this.expect(10);const i=this.flowParseFunctionTypeParams();return n.params=i.params,n.rest=i.rest,n.this=i._this,this.expect(11),[n.returnType,e.predicate]=this.flowParseTypeAndPredicateInitialiser(),r.typeAnnotation=this.finishNode(n,"FunctionTypeAnnotation"),t.typeAnnotation=this.finishNode(r,"TypeAnnotation"),this.resetEndLocation(t),this.semicolon(),this.scope.declareName(e.id.name,2048,e.id.loc.start),this.finishNode(e,"DeclareFunction")}flowParseDeclare(e,t){if(this.match(80))return this.flowParseDeclareClass(e);if(this.match(68))return this.flowParseDeclareFunction(e);if(this.match(74))return this.flowParseDeclareVariable(e);if(this.eatContextual(123))return this.match(16)?this.flowParseDeclareModuleExports(e):(t&&this.raise(ye.NestedDeclareModule,{at:this.state.lastTokStartLoc}),this.flowParseDeclareModule(e));if(this.isContextual(126))return this.flowParseDeclareTypeAlias(e);if(this.isContextual(127))return this.flowParseDeclareOpaqueType(e);if(this.isContextual(125))return this.flowParseDeclareInterface(e);if(this.match(82))return this.flowParseDeclareExportDeclaration(e,t);throw this.unexpected()}flowParseDeclareVariable(e){return this.next(),e.id=this.flowParseTypeAnnotatableIdentifier(!0),this.scope.declareName(e.id.name,5,e.id.loc.start),this.semicolon(),this.finishNode(e,"DeclareVariable")}flowParseDeclareModule(e){this.scope.enter(0),this.match(129)?e.id=super.parseExprAtom():e.id=this.parseIdentifier();const t=e.body=this.startNode(),n=t.body=[];for(this.expect(5);!this.match(8);){let e=this.startNode();this.match(83)?(this.next(),this.isContextual(126)||this.match(87)||this.raise(ye.InvalidNonTypeImportInDeclareModule,{at:this.state.lastTokStartLoc}),super.parseImport(e)):(this.expectContextual(121,ye.UnsupportedStatementInDeclareModule),e=this.flowParseDeclare(e,!0)),n.push(e)}this.scope.exit(),this.expect(8),this.finishNode(t,"BlockStatement");let r=null,i=!1;return n.forEach((e=>{!function(e){return"DeclareExportAllDeclaration"===e.type||"DeclareExportDeclaration"===e.type&&(!e.declaration||"TypeAlias"!==e.declaration.type&&"InterfaceDeclaration"!==e.declaration.type)}(e)?"DeclareModuleExports"===e.type&&(i&&this.raise(ye.DuplicateDeclareModuleExports,{at:e}),"ES"===r&&this.raise(ye.AmbiguousDeclareModuleKind,{at:e}),r="CommonJS",i=!0):("CommonJS"===r&&this.raise(ye.AmbiguousDeclareModuleKind,{at:e}),r="ES")})),e.kind=r||"CommonJS",this.finishNode(e,"DeclareModule")}flowParseDeclareExportDeclaration(e,t){if(this.expect(82),this.eat(65))return this.match(68)||this.match(80)?e.declaration=this.flowParseDeclare(this.startNode()):(e.declaration=this.flowParseType(),this.semicolon()),e.default=!0,this.finishNode(e,"DeclareExportDeclaration");if(this.match(75)||this.isLet()||(this.isContextual(126)||this.isContextual(125))&&!t){const e=this.state.value;throw this.raise(ye.UnsupportedDeclareExportKind,{at:this.state.startLoc,unsupportedExportKind:e,suggestion:xe[e]})}if(this.match(74)||this.match(68)||this.match(80)||this.isContextual(127))return e.declaration=this.flowParseDeclare(this.startNode()),e.default=!1,this.finishNode(e,"DeclareExportDeclaration");if(this.match(55)||this.match(5)||this.isContextual(125)||this.isContextual(126)||this.isContextual(127))return"ExportNamedDeclaration"===(e=this.parseExport(e)).type&&(e.type="ExportDeclaration",e.default=!1,delete e.exportKind),e.type="Declare"+e.type,e;throw this.unexpected()}flowParseDeclareModuleExports(e){return this.next(),this.expectContextual(108),e.typeAnnotation=this.flowParseTypeAnnotation(),this.semicolon(),this.finishNode(e,"DeclareModuleExports")}flowParseDeclareTypeAlias(e){this.next();const t=this.flowParseTypeAlias(e);return t.type="DeclareTypeAlias",t}flowParseDeclareOpaqueType(e){this.next();const t=this.flowParseOpaqueType(e,!0);return t.type="DeclareOpaqueType",t}flowParseDeclareInterface(e){return this.next(),this.flowParseInterfaceish(e),this.finishNode(e,"DeclareInterface")}flowParseInterfaceish(e,t=!1){if(e.id=this.flowParseRestrictedIdentifier(!t,!0),this.scope.declareName(e.id.name,t?17:9,e.id.loc.start),this.match(47)?e.typeParameters=this.flowParseTypeParameterDeclaration():e.typeParameters=null,e.extends=[],e.implements=[],e.mixins=[],this.eat(81))do{e.extends.push(this.flowParseInterfaceExtends())}while(!t&&this.eat(12));if(this.isContextual(114)){this.next();do{e.mixins.push(this.flowParseInterfaceExtends())}while(this.eat(12))}if(this.isContextual(110)){this.next();do{e.implements.push(this.flowParseInterfaceExtends())}while(this.eat(12))}e.body=this.flowParseObjectType({allowStatic:t,allowExact:!1,allowSpread:!1,allowProto:t,allowInexact:!1})}flowParseInterfaceExtends(){const e=this.startNode();return e.id=this.flowParseQualifiedTypeIdentifier(),this.match(47)?e.typeParameters=this.flowParseTypeParameterInstantiation():e.typeParameters=null,this.finishNode(e,"InterfaceExtends")}flowParseInterface(e){return this.flowParseInterfaceish(e),this.finishNode(e,"InterfaceDeclaration")}checkNotUnderscore(e){"_"===e&&this.raise(ye.UnexpectedReservedUnderscore,{at:this.state.startLoc})}checkReservedType(e,t,n){ge.has(e)&&this.raise(n?ye.AssignReservedType:ye.UnexpectedReservedType,{at:t,reservedType:e})}flowParseRestrictedIdentifier(e,t){return this.checkReservedType(this.state.value,this.state.startLoc,t),this.parseIdentifier(e)}flowParseTypeAlias(e){return e.id=this.flowParseRestrictedIdentifier(!1,!0),this.scope.declareName(e.id.name,9,e.id.loc.start),this.match(47)?e.typeParameters=this.flowParseTypeParameterDeclaration():e.typeParameters=null,e.right=this.flowParseTypeInitialiser(29),this.semicolon(),this.finishNode(e,"TypeAlias")}flowParseOpaqueType(e,t){return this.expectContextual(126),e.id=this.flowParseRestrictedIdentifier(!0,!0),this.scope.declareName(e.id.name,9,e.id.loc.start),this.match(47)?e.typeParameters=this.flowParseTypeParameterDeclaration():e.typeParameters=null,e.supertype=null,this.match(14)&&(e.supertype=this.flowParseTypeInitialiser(14)),e.impltype=null,t||(e.impltype=this.flowParseTypeInitialiser(29)),this.semicolon(),this.finishNode(e,"OpaqueType")}flowParseTypeParameter(e=!1){const t=this.state.startLoc,n=this.startNode(),r=this.flowParseVariance(),i=this.flowParseTypeAnnotatableIdentifier();return n.name=i.name,n.variance=r,n.bound=i.typeAnnotation,this.match(29)?(this.eat(29),n.default=this.flowParseType()):e&&this.raise(ye.MissingTypeParamDefault,{at:t}),this.finishNode(n,"TypeParameter")}flowParseTypeParameterDeclaration(){const e=this.state.inType,t=this.startNode();t.params=[],this.state.inType=!0,this.match(47)||this.match(138)?this.next():this.unexpected();let n=!1;do{const e=this.flowParseTypeParameter(n);t.params.push(e),e.default&&(n=!0),this.match(48)||this.expect(12)}while(!this.match(48));return this.expect(48),this.state.inType=e,this.finishNode(t,"TypeParameterDeclaration")}flowParseTypeParameterInstantiation(){const e=this.startNode(),t=this.state.inType;e.params=[],this.state.inType=!0,this.expect(47);const n=this.state.noAnonFunctionType;for(this.state.noAnonFunctionType=!1;!this.match(48);)e.params.push(this.flowParseType()),this.match(48)||this.expect(12);return this.state.noAnonFunctionType=n,this.expect(48),this.state.inType=t,this.finishNode(e,"TypeParameterInstantiation")}flowParseTypeParameterInstantiationCallOrNew(){const e=this.startNode(),t=this.state.inType;for(e.params=[],this.state.inType=!0,this.expect(47);!this.match(48);)e.params.push(this.flowParseTypeOrImplicitInstantiation()),this.match(48)||this.expect(12);return this.expect(48),this.state.inType=t,this.finishNode(e,"TypeParameterInstantiation")}flowParseInterfaceType(){const e=this.startNode();if(this.expectContextual(125),e.extends=[],this.eat(81))do{e.extends.push(this.flowParseInterfaceExtends())}while(this.eat(12));return e.body=this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!1,allowProto:!1,allowInexact:!1}),this.finishNode(e,"InterfaceTypeAnnotation")}flowParseObjectPropertyKey(){return this.match(130)||this.match(129)?super.parseExprAtom():this.parseIdentifier(!0)}flowParseObjectTypeIndexer(e,t,n){return e.static=t,14===this.lookahead().type?(e.id=this.flowParseObjectPropertyKey(),e.key=this.flowParseTypeInitialiser()):(e.id=null,e.key=this.flowParseType()),this.expect(3),e.value=this.flowParseTypeInitialiser(),e.variance=n,this.finishNode(e,"ObjectTypeIndexer")}flowParseObjectTypeInternalSlot(e,t){return e.static=t,e.id=this.flowParseObjectPropertyKey(),this.expect(3),this.expect(3),this.match(47)||this.match(10)?(e.method=!0,e.optional=!1,e.value=this.flowParseObjectTypeMethodish(this.startNodeAt(e.start,e.loc.start))):(e.method=!1,this.eat(17)&&(e.optional=!0),e.value=this.flowParseTypeInitialiser()),this.finishNode(e,"ObjectTypeInternalSlot")}flowParseObjectTypeMethodish(e){for(e.params=[],e.rest=null,e.typeParameters=null,e.this=null,this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),this.expect(10),this.match(78)&&(e.this=this.flowParseFunctionTypeParam(!0),e.this.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)e.params.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(e.rest=this.flowParseFunctionTypeParam(!1)),this.expect(11),e.returnType=this.flowParseTypeInitialiser(),this.finishNode(e,"FunctionTypeAnnotation")}flowParseObjectTypeCallProperty(e,t){const n=this.startNode();return e.static=t,e.value=this.flowParseObjectTypeMethodish(n),this.finishNode(e,"ObjectTypeCallProperty")}flowParseObjectType({allowStatic:e,allowExact:t,allowSpread:n,allowProto:r,allowInexact:i}){const s=this.state.inType;this.state.inType=!0;const o=this.startNode();let a,l;o.callProperties=[],o.properties=[],o.indexers=[],o.internalSlots=[];let c=!1;for(t&&this.match(6)?(this.expect(6),a=9,l=!0):(this.expect(5),a=8,l=!1),o.exact=l;!this.match(a);){let t=!1,s=null,a=null;const u=this.startNode();if(r&&this.isContextual(115)){const t=this.lookahead();14!==t.type&&17!==t.type&&(this.next(),s=this.state.startLoc,e=!1)}if(e&&this.isContextual(104)){const e=this.lookahead();14!==e.type&&17!==e.type&&(this.next(),t=!0)}const h=this.flowParseVariance();if(this.eat(0))null!=s&&this.unexpected(s),this.eat(0)?(h&&this.unexpected(h.loc.start),o.internalSlots.push(this.flowParseObjectTypeInternalSlot(u,t))):o.indexers.push(this.flowParseObjectTypeIndexer(u,t,h));else if(this.match(10)||this.match(47))null!=s&&this.unexpected(s),h&&this.unexpected(h.loc.start),o.callProperties.push(this.flowParseObjectTypeCallProperty(u,t));else{let e="init";(this.isContextual(98)||this.isContextual(103))&&H(this.lookahead().type)&&(e=this.state.value,this.next());const r=this.flowParseObjectTypeProperty(u,t,s,h,e,n,null!=i?i:!l);null===r?(c=!0,a=this.state.lastTokStartLoc):o.properties.push(r)}this.flowObjectTypeSemicolon(),!a||this.match(8)||this.match(9)||this.raise(ye.UnexpectedExplicitInexactInObject,{at:a})}this.expect(a),n&&(o.inexact=c);const u=this.finishNode(o,"ObjectTypeAnnotation");return this.state.inType=s,u}flowParseObjectTypeProperty(e,t,n,r,i,s,o){if(this.eat(21))return this.match(12)||this.match(13)||this.match(8)||this.match(9)?(s?o||this.raise(ye.InexactInsideExact,{at:this.state.lastTokStartLoc}):this.raise(ye.InexactInsideNonObject,{at:this.state.lastTokStartLoc}),r&&this.raise(ye.InexactVariance,{at:r}),null):(s||this.raise(ye.UnexpectedSpreadType,{at:this.state.lastTokStartLoc}),null!=n&&this.unexpected(n),r&&this.raise(ye.SpreadVariance,{at:r}),e.argument=this.flowParseType(),this.finishNode(e,"ObjectTypeSpreadProperty"));{e.key=this.flowParseObjectPropertyKey(),e.static=t,e.proto=null!=n,e.kind=i;let o=!1;return this.match(47)||this.match(10)?(e.method=!0,null!=n&&this.unexpected(n),r&&this.unexpected(r.loc.start),e.value=this.flowParseObjectTypeMethodish(this.startNodeAt(e.start,e.loc.start)),"get"!==i&&"set"!==i||this.flowCheckGetterSetterParams(e),!s&&"constructor"===e.key.name&&e.value.this&&this.raise(ye.ThisParamBannedInConstructor,{at:e.value.this})):("init"!==i&&this.unexpected(),e.method=!1,this.eat(17)&&(o=!0),e.value=this.flowParseTypeInitialiser(),e.variance=r),e.optional=o,this.finishNode(e,"ObjectTypeProperty")}}flowCheckGetterSetterParams(e){const t="get"===e.kind?0:1,n=e.value.params.length+(e.value.rest?1:0);e.value.this&&this.raise("get"===e.kind?ye.GetterMayNotHaveThisParam:ye.SetterMayNotHaveThisParam,{at:e.value.this}),n!==t&&this.raise("get"===e.kind?g.BadGetterArity:g.BadSetterArity,{at:e}),"set"===e.kind&&e.value.rest&&this.raise(g.BadSetterRestParameter,{at:e})}flowObjectTypeSemicolon(){this.eat(13)||this.eat(12)||this.match(8)||this.match(9)||this.unexpected()}flowParseQualifiedTypeIdentifier(e,t,n){e=e||this.state.start,t=t||this.state.startLoc;let r=n||this.flowParseRestrictedIdentifier(!0);for(;this.eat(16);){const n=this.startNodeAt(e,t);n.qualification=r,n.id=this.flowParseRestrictedIdentifier(!0),r=this.finishNode(n,"QualifiedTypeIdentifier")}return r}flowParseGenericType(e,t,n){const r=this.startNodeAt(e,t);return r.typeParameters=null,r.id=this.flowParseQualifiedTypeIdentifier(e,t,n),this.match(47)&&(r.typeParameters=this.flowParseTypeParameterInstantiation()),this.finishNode(r,"GenericTypeAnnotation")}flowParseTypeofType(){const e=this.startNode();return this.expect(87),e.argument=this.flowParsePrimaryType(),this.finishNode(e,"TypeofTypeAnnotation")}flowParseTupleType(){const e=this.startNode();for(e.types=[],this.expect(0);this.state.pos<this.length&&!this.match(3)&&(e.types.push(this.flowParseType()),!this.match(3));)this.expect(12);return this.expect(3),this.finishNode(e,"TupleTypeAnnotation")}flowParseFunctionTypeParam(e){let t=null,n=!1,r=null;const i=this.startNode(),s=this.lookahead(),o=78===this.state.type;return 14===s.type||17===s.type?(o&&!e&&this.raise(ye.ThisParamMustBeFirst,{at:i}),t=this.parseIdentifier(o),this.eat(17)&&(n=!0,o&&this.raise(ye.ThisParamMayNotBeOptional,{at:i})),r=this.flowParseTypeInitialiser()):r=this.flowParseType(),i.name=t,i.optional=n,i.typeAnnotation=r,this.finishNode(i,"FunctionTypeParam")}reinterpretTypeAsFunctionTypeParam(e){const t=this.startNodeAt(e.start,e.loc.start);return t.name=null,t.optional=!1,t.typeAnnotation=e,this.finishNode(t,"FunctionTypeParam")}flowParseFunctionTypeParams(e=[]){let t=null,n=null;for(this.match(78)&&(n=this.flowParseFunctionTypeParam(!0),n.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)e.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(t=this.flowParseFunctionTypeParam(!1)),{params:e,rest:t,_this:n}}flowIdentToTypeAnnotation(e,t,n,r){switch(r.name){case"any":return this.finishNode(n,"AnyTypeAnnotation");case"bool":case"boolean":return this.finishNode(n,"BooleanTypeAnnotation");case"mixed":return this.finishNode(n,"MixedTypeAnnotation");case"empty":return this.finishNode(n,"EmptyTypeAnnotation");case"number":return this.finishNode(n,"NumberTypeAnnotation");case"string":return this.finishNode(n,"StringTypeAnnotation");case"symbol":return this.finishNode(n,"SymbolTypeAnnotation");default:return this.checkNotUnderscore(r.name),this.flowParseGenericType(e,t,r)}}flowParsePrimaryType(){const e=this.state.start,t=this.state.startLoc,n=this.startNode();let r,i,s=!1;const o=this.state.noAnonFunctionType;switch(this.state.type){case 5:return this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!0,allowProto:!1,allowInexact:!0});case 6:return this.flowParseObjectType({allowStatic:!1,allowExact:!0,allowSpread:!0,allowProto:!1,allowInexact:!1});case 0:return this.state.noAnonFunctionType=!1,i=this.flowParseTupleType(),this.state.noAnonFunctionType=o,i;case 47:return n.typeParameters=this.flowParseTypeParameterDeclaration(),this.expect(10),r=this.flowParseFunctionTypeParams(),n.params=r.params,n.rest=r.rest,n.this=r._this,this.expect(11),this.expect(19),n.returnType=this.flowParseType(),this.finishNode(n,"FunctionTypeAnnotation");case 10:if(this.next(),!this.match(11)&&!this.match(21))if(z(this.state.type)||this.match(78)){const e=this.lookahead().type;s=17!==e&&14!==e}else s=!0;if(s){if(this.state.noAnonFunctionType=!1,i=this.flowParseType(),this.state.noAnonFunctionType=o,this.state.noAnonFunctionType||!(this.match(12)||this.match(11)&&19===this.lookahead().type))return this.expect(11),i;this.eat(12)}return r=i?this.flowParseFunctionTypeParams([this.reinterpretTypeAsFunctionTypeParam(i)]):this.flowParseFunctionTypeParams(),n.params=r.params,n.rest=r.rest,n.this=r._this,this.expect(11),this.expect(19),n.returnType=this.flowParseType(),n.typeParameters=null,this.finishNode(n,"FunctionTypeAnnotation");case 129:return this.parseLiteral(this.state.value,"StringLiteralTypeAnnotation");case 85:case 86:return n.value=this.match(85),this.next(),this.finishNode(n,"BooleanLiteralTypeAnnotation");case 53:if("-"===this.state.value){if(this.next(),this.match(130))return this.parseLiteralAtNode(-this.state.value,"NumberLiteralTypeAnnotation",n);if(this.match(131))return this.parseLiteralAtNode(-this.state.value,"BigIntLiteralTypeAnnotation",n);throw this.raise(ye.UnexpectedSubtractionOperand,{at:this.state.startLoc})}throw this.unexpected();case 130:return this.parseLiteral(this.state.value,"NumberLiteralTypeAnnotation");case 131:return this.parseLiteral(this.state.value,"BigIntLiteralTypeAnnotation");case 88:return this.next(),this.finishNode(n,"VoidTypeAnnotation");case 84:return this.next(),this.finishNode(n,"NullLiteralTypeAnnotation");case 78:return this.next(),this.finishNode(n,"ThisTypeAnnotation");case 55:return this.next(),this.finishNode(n,"ExistsTypeAnnotation");case 87:return this.flowParseTypeofType();default:if(q(this.state.type)){const e=Q(this.state.type);return this.next(),super.createIdentifier(n,e)}if(z(this.state.type))return this.isContextual(125)?this.flowParseInterfaceType():this.flowIdentToTypeAnnotation(e,t,n,this.parseIdentifier())}throw this.unexpected()}flowParsePostfixType(){const e=this.state.start,t=this.state.startLoc;let n=this.flowParsePrimaryType(),r=!1;for(;(this.match(0)||this.match(18))&&!this.canInsertSemicolon();){const i=this.startNodeAt(e,t),s=this.eat(18);r=r||s,this.expect(0),!s&&this.match(3)?(i.elementType=n,this.next(),n=this.finishNode(i,"ArrayTypeAnnotation")):(i.objectType=n,i.indexType=this.flowParseType(),this.expect(3),r?(i.optional=s,n=this.finishNode(i,"OptionalIndexedAccessType")):n=this.finishNode(i,"IndexedAccessType"))}return n}flowParsePrefixType(){const e=this.startNode();return this.eat(17)?(e.typeAnnotation=this.flowParsePrefixType(),this.finishNode(e,"NullableTypeAnnotation")):this.flowParsePostfixType()}flowParseAnonFunctionWithoutParens(){const e=this.flowParsePrefixType();if(!this.state.noAnonFunctionType&&this.eat(19)){const t=this.startNodeAt(e.start,e.loc.start);return t.params=[this.reinterpretTypeAsFunctionTypeParam(e)],t.rest=null,t.this=null,t.returnType=this.flowParseType(),t.typeParameters=null,this.finishNode(t,"FunctionTypeAnnotation")}return e}flowParseIntersectionType(){const e=this.startNode();this.eat(45);const t=this.flowParseAnonFunctionWithoutParens();for(e.types=[t];this.eat(45);)e.types.push(this.flowParseAnonFunctionWithoutParens());return 1===e.types.length?t:this.finishNode(e,"IntersectionTypeAnnotation")}flowParseUnionType(){const e=this.startNode();this.eat(43);const t=this.flowParseIntersectionType();for(e.types=[t];this.eat(43);)e.types.push(this.flowParseIntersectionType());return 1===e.types.length?t:this.finishNode(e,"UnionTypeAnnotation")}flowParseType(){const e=this.state.inType;this.state.inType=!0;const t=this.flowParseUnionType();return this.state.inType=e,t}flowParseTypeOrImplicitInstantiation(){if(128===this.state.type&&"_"===this.state.value){const e=this.state.start,t=this.state.startLoc,n=this.parseIdentifier();return this.flowParseGenericType(e,t,n)}return this.flowParseType()}flowParseTypeAnnotation(){const e=this.startNode();return e.typeAnnotation=this.flowParseTypeInitialiser(),this.finishNode(e,"TypeAnnotation")}flowParseTypeAnnotatableIdentifier(e){const t=e?this.parseIdentifier():this.flowParseRestrictedIdentifier();return this.match(14)&&(t.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(t)),t}typeCastToParameter(e){return e.expression.typeAnnotation=e.typeAnnotation,this.resetEndLocation(e.expression,e.typeAnnotation.loc.end),e.expression}flowParseVariance(){let e=null;return this.match(53)?(e=this.startNode(),"+"===this.state.value?e.kind="plus":e.kind="minus",this.next(),this.finishNode(e,"Variance")):e}parseFunctionBody(e,t,n=!1){return t?this.forwardNoArrowParamsConversionAt(e,(()=>super.parseFunctionBody(e,!0,n))):super.parseFunctionBody(e,!1,n)}parseFunctionBodyAndFinish(e,t,n=!1){if(this.match(14)){const t=this.startNode();[t.typeAnnotation,e.predicate]=this.flowParseTypeAndPredicateInitialiser(),e.returnType=t.typeAnnotation?this.finishNode(t,"TypeAnnotation"):null}return super.parseFunctionBodyAndFinish(e,t,n)}parseStatement(e,t){if(this.state.strict&&this.isContextual(125)){if(U(this.lookahead().type)){const e=this.startNode();return this.next(),this.flowParseInterface(e)}}else if(this.shouldParseEnums()&&this.isContextual(122)){const e=this.startNode();return this.next(),this.flowParseEnumDeclaration(e)}const n=super.parseStatement(e,t);return void 0!==this.flowPragma||this.isValidDirective(n)||(this.flowPragma=null),n}parseExpressionStatement(e,t){if("Identifier"===t.type)if("declare"===t.name){if(this.match(80)||z(this.state.type)||this.match(68)||this.match(74)||this.match(82))return this.flowParseDeclare(e)}else if(z(this.state.type)){if("interface"===t.name)return this.flowParseInterface(e);if("type"===t.name)return this.flowParseTypeAlias(e);if("opaque"===t.name)return this.flowParseOpaqueType(e,!1)}return super.parseExpressionStatement(e,t)}shouldParseExportDeclaration(){const{type:e}=this.state;return $(e)||this.shouldParseEnums()&&122===e?!this.state.containsEsc:super.shouldParseExportDeclaration()}isExportDefaultSpecifier(){const{type:e}=this.state;return $(e)||this.shouldParseEnums()&&122===e?this.state.containsEsc:super.isExportDefaultSpecifier()}parseExportDefaultExpression(){if(this.shouldParseEnums()&&this.isContextual(122)){const e=this.startNode();return this.next(),this.flowParseEnumDeclaration(e)}return super.parseExportDefaultExpression()}parseConditional(e,t,n,r){if(!this.match(17))return e;if(this.state.maybeInArrowParameters){const t=this.lookaheadCharCode();if(44===t||61===t||58===t||41===t)return this.setOptionalParametersError(r),e}this.expect(17);const i=this.state.clone(),s=this.state.noArrowAt,o=this.startNodeAt(t,n);let{consequent:a,failed:l}=this.tryParseConditionalConsequent(),[c,u]=this.getArrowLikeExpressions(a);if(l||u.length>0){const e=[...s];if(u.length>0){this.state=i,this.state.noArrowAt=e;for(let t=0;t<u.length;t++)e.push(u[t].start);({consequent:a,failed:l}=this.tryParseConditionalConsequent()),[c,u]=this.getArrowLikeExpressions(a)}l&&c.length>1&&this.raise(ye.AmbiguousConditionalArrow,{at:i.startLoc}),l&&1===c.length&&(this.state=i,e.push(c[0].start),this.state.noArrowAt=e,({consequent:a,failed:l}=this.tryParseConditionalConsequent()))}return this.getArrowLikeExpressions(a,!0),this.state.noArrowAt=s,this.expect(14),o.test=e,o.consequent=a,o.alternate=this.forwardNoArrowParamsConversionAt(o,(()=>this.parseMaybeAssign(void 0,void 0))),this.finishNode(o,"ConditionalExpression")}tryParseConditionalConsequent(){this.state.noArrowParamsConversionAt.push(this.state.start);const e=this.parseMaybeAssignAllowIn(),t=!this.match(14);return this.state.noArrowParamsConversionAt.pop(),{consequent:e,failed:t}}getArrowLikeExpressions(e,t){const n=[e],r=[];for(;0!==n.length;){const e=n.pop();"ArrowFunctionExpression"===e.type?(e.typeParameters||!e.returnType?this.finishArrowValidation(e):r.push(e),n.push(e.body)):"ConditionalExpression"===e.type&&(n.push(e.consequent),n.push(e.alternate))}return t?(r.forEach((e=>this.finishArrowValidation(e))),[r,[]]):function(e,t){const n=[],r=[];for(let i=0;i<e.length;i++)(t(e[i])?n:r).push(e[i]);return[n,r]}(r,(e=>e.params.every((e=>this.isAssignable(e,!0)))))}finishArrowValidation(e){var t;this.toAssignableList(e.params,null==(t=e.extra)?void 0:t.trailingCommaLoc,!1),this.scope.enter(6),super.checkParams(e,!1,!0),this.scope.exit()}forwardNoArrowParamsConversionAt(e,t){let n;return-1!==this.state.noArrowParamsConversionAt.indexOf(e.start)?(this.state.noArrowParamsConversionAt.push(this.state.start),n=t(),this.state.noArrowParamsConversionAt.pop()):n=t(),n}parseParenItem(e,t,n){if(e=super.parseParenItem(e,t,n),this.eat(17)&&(e.optional=!0,this.resetEndLocation(e)),this.match(14)){const r=this.startNodeAt(t,n);return r.expression=e,r.typeAnnotation=this.flowParseTypeAnnotation(),this.finishNode(r,"TypeCastExpression")}return e}assertModuleNodeAllowed(e){"ImportDeclaration"===e.type&&("type"===e.importKind||"typeof"===e.importKind)||"ExportNamedDeclaration"===e.type&&"type"===e.exportKind||"ExportAllDeclaration"===e.type&&"type"===e.exportKind||super.assertModuleNodeAllowed(e)}parseExport(e){const t=super.parseExport(e);return"ExportNamedDeclaration"!==t.type&&"ExportAllDeclaration"!==t.type||(t.exportKind=t.exportKind||"value"),t}parseExportDeclaration(e){if(this.isContextual(126)){e.exportKind="type";const t=this.startNode();return this.next(),this.match(5)?(e.specifiers=this.parseExportSpecifiers(!0),super.parseExportFrom(e),null):this.flowParseTypeAlias(t)}if(this.isContextual(127)){e.exportKind="type";const t=this.startNode();return this.next(),this.flowParseOpaqueType(t,!1)}if(this.isContextual(125)){e.exportKind="type";const t=this.startNode();return this.next(),this.flowParseInterface(t)}if(this.shouldParseEnums()&&this.isContextual(122)){e.exportKind="value";const t=this.startNode();return this.next(),this.flowParseEnumDeclaration(t)}return super.parseExportDeclaration(e)}eatExportStar(e){return!!super.eatExportStar(e)||!(!this.isContextual(126)||55!==this.lookahead().type)&&(e.exportKind="type",this.next(),this.next(),!0)}maybeParseExportNamespaceSpecifier(e){const{startLoc:t}=this.state,n=super.maybeParseExportNamespaceSpecifier(e);return n&&"type"===e.exportKind&&this.unexpected(t),n}parseClassId(e,t,n){super.parseClassId(e,t,n),this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration())}parseClassMember(e,t,n){const{startLoc:r}=this.state;if(this.isContextual(121)){if(super.parseClassMemberFromModifier(e,t))return;t.declare=!0}super.parseClassMember(e,t,n),t.declare&&("ClassProperty"!==t.type&&"ClassPrivateProperty"!==t.type&&"PropertyDefinition"!==t.type?this.raise(ye.DeclareClassElement,{at:r}):t.value&&this.raise(ye.DeclareClassFieldInitializer,{at:t.value}))}isIterator(e){return"iterator"===e||"asyncIterator"===e}readIterator(){const e=super.readWord1(),t="@@"+e;this.isIterator(e)&&this.state.inType||this.raise(g.InvalidIdentifier,{at:this.state.curPosition(),identifierName:t}),this.finishToken(128,t)}getTokenFromCode(e){const t=this.input.charCodeAt(this.state.pos+1);return 123===e&&124===t?this.finishOp(6,2):!this.state.inType||62!==e&&60!==e?this.state.inType&&63===e?46===t?this.finishOp(18,2):this.finishOp(17,1):function(e,t,n){return 64===e&&64===t&&ie(n)}(e,t,this.input.charCodeAt(this.state.pos+2))?(this.state.pos+=2,this.readIterator()):super.getTokenFromCode(e):this.finishOp(62===e?48:47,1)}isAssignable(e,t){return"TypeCastExpression"===e.type?this.isAssignable(e.expression,t):super.isAssignable(e,t)}toAssignable(e,t=!1){t||"AssignmentExpression"!==e.type||"TypeCastExpression"!==e.left.type||(e.left=this.typeCastToParameter(e.left)),super.toAssignable(e,t)}toAssignableList(e,t,n){for(let t=0;t<e.length;t++){const n=e[t];"TypeCastExpression"===(null==n?void 0:n.type)&&(e[t]=this.typeCastToParameter(n))}super.toAssignableList(e,t,n)}toReferencedList(e,t){for(let r=0;r<e.length;r++){var n;const i=e[r];!i||"TypeCastExpression"!==i.type||null!=(n=i.extra)&&n.parenthesized||!(e.length>1)&&t||this.raise(ye.TypeCastInPattern,{at:i.typeAnnotation})}return e}parseArrayLike(e,t,n,r){const i=super.parseArrayLike(e,t,n,r);return t&&!this.state.maybeInArrowParameters&&this.toReferencedList(i.elements),i}isValidLVal(e,...t){return"TypeCastExpression"===e||super.isValidLVal(e,...t)}parseClassProperty(e){return this.match(14)&&(e.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassProperty(e)}parseClassPrivateProperty(e){return this.match(14)&&(e.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassPrivateProperty(e)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(14)||super.isClassProperty()}isNonstaticConstructor(e){return!this.match(14)&&super.isNonstaticConstructor(e)}pushClassMethod(e,t,n,r,i,s){if(t.variance&&this.unexpected(t.variance.loc.start),delete t.variance,this.match(47)&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassMethod(e,t,n,r,i,s),t.params&&i){const e=t.params;e.length>0&&this.isThisParam(e[0])&&this.raise(ye.ThisParamBannedInConstructor,{at:t})}else if("MethodDefinition"===t.type&&i&&t.value.params){const e=t.value.params;e.length>0&&this.isThisParam(e[0])&&this.raise(ye.ThisParamBannedInConstructor,{at:t})}}pushClassPrivateMethod(e,t,n,r){t.variance&&this.unexpected(t.variance.loc.start),delete t.variance,this.match(47)&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassPrivateMethod(e,t,n,r)}parseClassSuper(e){if(super.parseClassSuper(e),e.superClass&&this.match(47)&&(e.superTypeParameters=this.flowParseTypeParameterInstantiation()),this.isContextual(110)){this.next();const t=e.implements=[];do{const e=this.startNode();e.id=this.flowParseRestrictedIdentifier(!0),this.match(47)?e.typeParameters=this.flowParseTypeParameterInstantiation():e.typeParameters=null,t.push(this.finishNode(e,"ClassImplements"))}while(this.eat(12))}}checkGetterSetterParams(e){super.checkGetterSetterParams(e);const t=this.getObjectOrClassMethodParams(e);if(t.length>0){const n=t[0];this.isThisParam(n)&&"get"===e.kind?this.raise(ye.GetterMayNotHaveThisParam,{at:n}):this.isThisParam(n)&&this.raise(ye.SetterMayNotHaveThisParam,{at:n})}}parsePropertyNamePrefixOperator(e){e.variance=this.flowParseVariance()}parseObjPropValue(e,t,n,r,i,s,o,a){let l;e.variance&&this.unexpected(e.variance.loc.start),delete e.variance,this.match(47)&&!o&&(l=this.flowParseTypeParameterDeclaration(),this.match(10)||this.unexpected());const c=super.parseObjPropValue(e,t,n,r,i,s,o,a);return l&&((c.value||c).typeParameters=l),c}parseAssignableListItemTypes(e){return this.eat(17)&&("Identifier"!==e.type&&this.raise(ye.PatternIsOptional,{at:e}),this.isThisParam(e)&&this.raise(ye.ThisParamMayNotBeOptional,{at:e}),e.optional=!0),this.match(14)?e.typeAnnotation=this.flowParseTypeAnnotation():this.isThisParam(e)&&this.raise(ye.ThisParamAnnotationRequired,{at:e}),this.match(29)&&this.isThisParam(e)&&this.raise(ye.ThisParamNoDefault,{at:e}),this.resetEndLocation(e),e}parseMaybeDefault(e,t,n){const r=super.parseMaybeDefault(e,t,n);return"AssignmentPattern"===r.type&&r.typeAnnotation&&r.right.start<r.typeAnnotation.start&&this.raise(ye.TypeBeforeInitializer,{at:r.typeAnnotation}),r}shouldParseDefaultImport(e){return be(e)?ve(this.state.type):super.shouldParseDefaultImport(e)}parseImportSpecifierLocal(e,t,n){t.local=be(e)?this.flowParseRestrictedIdentifier(!0,!0):this.parseIdentifier(),e.specifiers.push(this.finishImportSpecifier(t,n))}maybeParseDefaultImportSpecifier(e){e.importKind="value";let t=null;if(this.match(87)?t="typeof":this.isContextual(126)&&(t="type"),t){const n=this.lookahead(),{type:r}=n;"type"===t&&55===r&&this.unexpected(null,n.type),(ve(r)||5===r||55===r)&&(this.next(),e.importKind=t)}return super.maybeParseDefaultImportSpecifier(e)}parseImportSpecifier(e,t,n,r){const i=e.imported;let s=null;"Identifier"===i.type&&("type"===i.name?s="type":"typeof"===i.name&&(s="typeof"));let o=!1;if(this.isContextual(93)&&!this.isLookaheadContextual("as")){const t=this.parseIdentifier(!0);null===s||U(this.state.type)?(e.imported=i,e.importKind=null,e.local=this.parseIdentifier()):(e.imported=t,e.importKind=s,e.local=me(t))}else{if(null!==s&&U(this.state.type))e.imported=this.parseIdentifier(!0),e.importKind=s;else{if(t)throw this.raise(g.ImportBindingIsString,{at:e,importName:i.value});e.imported=i,e.importKind=null}this.eatContextual(93)?e.local=this.parseIdentifier():(o=!0,e.local=me(e.imported))}const a=be(e);return n&&a&&this.raise(ye.ImportTypeShorthandOnlyInPureImport,{at:e}),(n||a)&&this.checkReservedType(e.local.name,e.local.loc.start,!0),!o||n||a||this.checkReservedWord(e.local.name,e.loc.start,!0,!0),this.finishImportSpecifier(e,"ImportSpecifier")}parseBindingAtom(){return 78===this.state.type?this.parseIdentifier(!0):super.parseBindingAtom()}parseFunctionParams(e,t){const n=e.kind;"get"!==n&&"set"!==n&&this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),super.parseFunctionParams(e,t)}parseVarId(e,t){super.parseVarId(e,t),this.match(14)&&(e.id.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(e.id))}parseAsyncArrowFromCallExpression(e,t){if(this.match(14)){const t=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0,e.returnType=this.flowParseTypeAnnotation(),this.state.noAnonFunctionType=t}return super.parseAsyncArrowFromCallExpression(e,t)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}parseMaybeAssign(e,t){var n;let r,i=null;if(this.hasPlugin("jsx")&&(this.match(138)||this.match(47))){if(i=this.state.clone(),r=this.tryParse((()=>super.parseMaybeAssign(e,t)),i),!r.error)return r.node;const{context:n}=this.state,s=n[n.length-1];s!==w.j_oTag&&s!==w.j_expr||n.pop()}if(null!=(n=r)&&n.error||this.match(47)){var s,o;let n;i=i||this.state.clone();const a=this.tryParse((r=>{var i;n=this.flowParseTypeParameterDeclaration();const s=this.forwardNoArrowParamsConversionAt(n,(()=>{const r=super.parseMaybeAssign(e,t);return this.resetStartLocationFromNode(r,n),r}));null!=(i=s.extra)&&i.parenthesized&&r();const o=this.maybeUnwrapTypeCastExpression(s);return"ArrowFunctionExpression"!==o.type&&r(),o.typeParameters=n,this.resetStartLocationFromNode(o,n),s}),i);let l=null;if(a.node&&"ArrowFunctionExpression"===this.maybeUnwrapTypeCastExpression(a.node).type){if(!a.error&&!a.aborted)return a.node.async&&this.raise(ye.UnexpectedTypeParameterBeforeAsyncArrowFunction,{at:n}),a.node;l=a.node}if(null!=(s=r)&&s.node)return this.state=r.failState,r.node;if(l)return this.state=a.failState,l;if(null!=(o=r)&&o.thrown)throw r.error;if(a.thrown)throw a.error;throw this.raise(ye.UnexpectedTokenAfterTypeParameter,{at:n})}return super.parseMaybeAssign(e,t)}parseArrow(e){if(this.match(14)){const t=this.tryParse((()=>{const t=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0;const n=this.startNode();return[n.typeAnnotation,e.predicate]=this.flowParseTypeAndPredicateInitialiser(),this.state.noAnonFunctionType=t,this.canInsertSemicolon()&&this.unexpected(),this.match(19)||this.unexpected(),n}));if(t.thrown)return null;t.error&&(this.state=t.failState),e.returnType=t.node.typeAnnotation?this.finishNode(t.node,"TypeAnnotation"):null}return super.parseArrow(e)}shouldParseArrow(e){return this.match(14)||super.shouldParseArrow(e)}setArrowFunctionParameters(e,t){-1!==this.state.noArrowParamsConversionAt.indexOf(e.start)?e.params=t:super.setArrowFunctionParameters(e,t)}checkParams(e,t,n){if(!n||-1===this.state.noArrowParamsConversionAt.indexOf(e.start)){for(let t=0;t<e.params.length;t++)this.isThisParam(e.params[t])&&t>0&&this.raise(ye.ThisParamMustBeFirst,{at:e.params[t]});return super.checkParams(e,t,n)}}parseParenAndDistinguishExpression(e){return super.parseParenAndDistinguishExpression(e&&-1===this.state.noArrowAt.indexOf(this.state.start))}parseSubscripts(e,t,n,r){if("Identifier"===e.type&&"async"===e.name&&-1!==this.state.noArrowAt.indexOf(t)){this.next();const r=this.startNodeAt(t,n);r.callee=e,r.arguments=super.parseCallExpressionArguments(11,!1),e=this.finishNode(r,"CallExpression")}else if("Identifier"===e.type&&"async"===e.name&&this.match(47)){const i=this.state.clone(),s=this.tryParse((e=>this.parseAsyncArrowWithTypeParameters(t,n)||e()),i);if(!s.error&&!s.aborted)return s.node;const o=this.tryParse((()=>super.parseSubscripts(e,t,n,r)),i);if(o.node&&!o.error)return o.node;if(s.node)return this.state=s.failState,s.node;if(o.node)return this.state=o.failState,o.node;throw s.error||o.error}return super.parseSubscripts(e,t,n,r)}parseSubscript(e,t,n,r,i){if(this.match(18)&&this.isLookaheadToken_lt()){if(i.optionalChainMember=!0,r)return i.stop=!0,e;this.next();const s=this.startNodeAt(t,n);return s.callee=e,s.typeArguments=this.flowParseTypeParameterInstantiation(),this.expect(10),s.arguments=this.parseCallExpressionArguments(11,!1),s.optional=!0,this.finishCallExpression(s,!0)}if(!r&&this.shouldParseTypes()&&this.match(47)){const r=this.startNodeAt(t,n);r.callee=e;const s=this.tryParse((()=>(r.typeArguments=this.flowParseTypeParameterInstantiationCallOrNew(),this.expect(10),r.arguments=super.parseCallExpressionArguments(11,!1),i.optionalChainMember&&(r.optional=!1),this.finishCallExpression(r,i.optionalChainMember))));if(s.node)return s.error&&(this.state=s.failState),s.node}return super.parseSubscript(e,t,n,r,i)}parseNewCallee(e){super.parseNewCallee(e);let t=null;this.shouldParseTypes()&&this.match(47)&&(t=this.tryParse((()=>this.flowParseTypeParameterInstantiationCallOrNew())).node),e.typeArguments=t}parseAsyncArrowWithTypeParameters(e,t){const n=this.startNodeAt(e,t);if(this.parseFunctionParams(n),this.parseArrow(n))return super.parseArrowExpression(n,void 0,!0)}readToken_mult_modulo(e){const t=this.input.charCodeAt(this.state.pos+1);if(42===e&&47===t&&this.state.hasFlowComment)return this.state.hasFlowComment=!1,this.state.pos+=2,void this.nextToken();super.readToken_mult_modulo(e)}readToken_pipe_amp(e){const t=this.input.charCodeAt(this.state.pos+1);124!==e||125!==t?super.readToken_pipe_amp(e):this.finishOp(9,2)}parseTopLevel(e,t){const n=super.parseTopLevel(e,t);return this.state.hasFlowComment&&this.raise(ye.UnterminatedFlowComment,{at:this.state.curPosition()}),n}skipBlockComment(){if(this.hasPlugin("flowComments")&&this.skipFlowComment()){if(this.state.hasFlowComment)throw this.raise(ye.NestedFlowComment,{at:this.state.startLoc});this.hasFlowCommentCompletion();const e=this.skipFlowComment();e&&(this.state.pos+=e,this.state.hasFlowComment=!0)}else{if(!this.state.hasFlowComment)return super.skipBlockComment();{const e=this.input.indexOf("*-/",this.state.pos+2);if(-1===e)throw this.raise(g.UnterminatedComment,{at:this.state.curPosition()});this.state.pos=e+2+3}}}skipFlowComment(){const{pos:e}=this.state;let t=2;for(;[32,9].includes(this.input.charCodeAt(e+t));)t++;const n=this.input.charCodeAt(t+e),r=this.input.charCodeAt(t+e+1);return 58===n&&58===r?t+2:"flow-include"===this.input.slice(t+e,t+e+12)?t+12:58===n&&58!==r&&t}hasFlowCommentCompletion(){if(-1===this.input.indexOf("*/",this.state.pos))throw this.raise(g.UnterminatedComment,{at:this.state.curPosition()})}flowEnumErrorBooleanMemberNotInitialized(e,{enumName:t,memberName:n}){this.raise(ye.EnumBooleanMemberNotInitialized,{at:e,memberName:n,enumName:t})}flowEnumErrorInvalidMemberInitializer(e,t){return this.raise(t.explicitType?"symbol"===t.explicitType?ye.EnumInvalidMemberInitializerSymbolType:ye.EnumInvalidMemberInitializerPrimaryType:ye.EnumInvalidMemberInitializerUnknownType,Object.assign({at:e},t))}flowEnumErrorNumberMemberNotInitialized(e,{enumName:t,memberName:n}){this.raise(ye.EnumNumberMemberNotInitialized,{at:e,enumName:t,memberName:n})}flowEnumErrorStringMemberInconsistentlyInitailized(e,{enumName:t}){this.raise(ye.EnumStringMemberInconsistentlyInitailized,{at:e,enumName:t})}flowEnumMemberInit(){const e=this.state.startLoc,t=()=>this.match(12)||this.match(8);switch(this.state.type){case 130:{const n=this.parseNumericLiteral(this.state.value);return t()?{type:"number",loc:n.loc.start,value:n}:{type:"invalid",loc:e}}case 129:{const n=this.parseStringLiteral(this.state.value);return t()?{type:"string",loc:n.loc.start,value:n}:{type:"invalid",loc:e}}case 85:case 86:{const n=this.parseBooleanLiteral(this.match(85));return t()?{type:"boolean",loc:n.loc.start,value:n}:{type:"invalid",loc:e}}default:return{type:"invalid",loc:e}}}flowEnumMemberRaw(){const e=this.state.startLoc;return{id:this.parseIdentifier(!0),init:this.eat(29)?this.flowEnumMemberInit():{type:"none",loc:e}}}flowEnumCheckExplicitTypeMismatch(e,t,n){const{explicitType:r}=t;null!==r&&r!==n&&this.flowEnumErrorInvalidMemberInitializer(e,t)}flowEnumMembers({enumName:e,explicitType:t}){const n=new Set,r={booleanMembers:[],numberMembers:[],stringMembers:[],defaultedMembers:[]};let i=!1;for(;!this.match(8);){if(this.eat(21)){i=!0;break}const s=this.startNode(),{id:o,init:a}=this.flowEnumMemberRaw(),l=o.name;if(""===l)continue;/^[a-z]/.test(l)&&this.raise(ye.EnumInvalidMemberName,{at:o,memberName:l,suggestion:l[0].toUpperCase()+l.slice(1),enumName:e}),n.has(l)&&this.raise(ye.EnumDuplicateMemberName,{at:o,memberName:l,enumName:e}),n.add(l);const c={enumName:e,explicitType:t,memberName:l};switch(s.id=o,a.type){case"boolean":this.flowEnumCheckExplicitTypeMismatch(a.loc,c,"boolean"),s.init=a.value,r.booleanMembers.push(this.finishNode(s,"EnumBooleanMember"));break;case"number":this.flowEnumCheckExplicitTypeMismatch(a.loc,c,"number"),s.init=a.value,r.numberMembers.push(this.finishNode(s,"EnumNumberMember"));break;case"string":this.flowEnumCheckExplicitTypeMismatch(a.loc,c,"string"),s.init=a.value,r.stringMembers.push(this.finishNode(s,"EnumStringMember"));break;case"invalid":throw this.flowEnumErrorInvalidMemberInitializer(a.loc,c);case"none":switch(t){case"boolean":this.flowEnumErrorBooleanMemberNotInitialized(a.loc,c);break;case"number":this.flowEnumErrorNumberMemberNotInitialized(a.loc,c);break;default:r.defaultedMembers.push(this.finishNode(s,"EnumDefaultedMember"))}}this.match(8)||this.expect(12)}return{members:r,hasUnknownMembers:i}}flowEnumStringMembers(e,t,{enumName:n}){if(0===e.length)return t;if(0===t.length)return e;if(t.length>e.length){for(const t of e)this.flowEnumErrorStringMemberInconsistentlyInitailized(t,{enumName:n});return t}for(const e of t)this.flowEnumErrorStringMemberInconsistentlyInitailized(e,{enumName:n});return e}flowEnumParseExplicitType({enumName:e}){if(!this.eatContextual(101))return null;if(!z(this.state.type))throw this.raise(ye.EnumInvalidExplicitTypeUnknownSupplied,{at:this.state.startLoc,enumName:e});const{value:t}=this.state;return this.next(),"boolean"!==t&&"number"!==t&&"string"!==t&&"symbol"!==t&&this.raise(ye.EnumInvalidExplicitType,{at:this.state.startLoc,enumName:e,invalidEnumType:t}),t}flowEnumBody(e,t){const n=t.name,r=t.loc.start,i=this.flowEnumParseExplicitType({enumName:n});this.expect(5);const{members:s,hasUnknownMembers:o}=this.flowEnumMembers({enumName:n,explicitType:i});switch(e.hasUnknownMembers=o,i){case"boolean":return e.explicitType=!0,e.members=s.booleanMembers,this.expect(8),this.finishNode(e,"EnumBooleanBody");case"number":return e.explicitType=!0,e.members=s.numberMembers,this.expect(8),this.finishNode(e,"EnumNumberBody");case"string":return e.explicitType=!0,e.members=this.flowEnumStringMembers(s.stringMembers,s.defaultedMembers,{enumName:n}),this.expect(8),this.finishNode(e,"EnumStringBody");case"symbol":return e.members=s.defaultedMembers,this.expect(8),this.finishNode(e,"EnumSymbolBody");default:{const t=()=>(e.members=[],this.expect(8),this.finishNode(e,"EnumStringBody"));e.explicitType=!1;const i=s.booleanMembers.length,o=s.numberMembers.length,a=s.stringMembers.length,l=s.defaultedMembers.length;if(i||o||a||l){if(i||o){if(!o&&!a&&i>=l){for(const e of s.defaultedMembers)this.flowEnumErrorBooleanMemberNotInitialized(e.loc.start,{enumName:n,memberName:e.id.name});return e.members=s.booleanMembers,this.expect(8),this.finishNode(e,"EnumBooleanBody")}if(!i&&!a&&o>=l){for(const e of s.defaultedMembers)this.flowEnumErrorNumberMemberNotInitialized(e.loc.start,{enumName:n,memberName:e.id.name});return e.members=s.numberMembers,this.expect(8),this.finishNode(e,"EnumNumberBody")}return this.raise(ye.EnumInconsistentMemberValues,{at:r,enumName:n}),t()}return e.members=this.flowEnumStringMembers(s.stringMembers,s.defaultedMembers,{enumName:n}),this.expect(8),this.finishNode(e,"EnumStringBody")}return t()}}}flowParseEnumDeclaration(e){const t=this.parseIdentifier();return e.id=t,e.body=this.flowEnumBody(this.startNode(),t),this.finishNode(e,"EnumDeclaration")}isLookaheadToken_lt(){const e=this.nextTokenStart();if(60===this.input.charCodeAt(e)){const t=this.input.charCodeAt(e+1);return 60!==t&&61!==t}return!1}maybeUnwrapTypeCastExpression(e){return"TypeCastExpression"===e.type?e.expression:e}},typescript:e=>class extends e{getScopeHandler(){return Ce}tsIsIdentifier(){return z(this.state.type)}tsTokenCanFollowModifier(){return(this.match(0)||this.match(5)||this.match(55)||this.match(21)||this.match(134)||this.isLiteralPropertyName())&&!this.hasPrecedingLineBreak()}tsNextTokenCanFollowModifier(){return this.next(),this.tsTokenCanFollowModifier()}tsParseModifier(e,t){if(!z(this.state.type)&&58!==this.state.type)return;const n=this.state.value;if(-1!==e.indexOf(n)){if(t&&this.tsIsStartOfStaticBlocks())return;if(this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this)))return n}}tsParseModifiers({modified:e,allowedModifiers:t,disallowedModifiers:n,stopOnStartOfClassStaticBlock:r,errorTemplate:i=Ee.InvalidModifierOnTypeMember}){const s=(t,n,r,i)=>{n===r&&e[i]&&this.raise(Ee.InvalidModifiersOrder,{at:t,orderedModifiers:[r,i]})},o=(t,n,r,i)=>{(e[r]&&n===i||e[i]&&n===r)&&this.raise(Ee.IncompatibleModifiers,{at:t,modifiers:[r,i]})};for(;;){const{startLoc:a}=this.state,l=this.tsParseModifier(t.concat(null!=n?n:[]),r);if(!l)break;Ne(l)?e.accessibility?this.raise(Ee.DuplicateAccessibilityModifier,{at:a,modifier:l}):(s(a,l,l,"override"),s(a,l,l,"static"),s(a,l,l,"readonly"),e.accessibility=l):Me(l)?(e[l]&&this.raise(Ee.DuplicateModifier,{at:a,modifier:l}),e[l]=!0,s(a,l,"in","out")):(Object.hasOwnProperty.call(e,l)?this.raise(Ee.DuplicateModifier,{at:a,modifier:l}):(s(a,l,"static","readonly"),s(a,l,"static","override"),s(a,l,"override","readonly"),s(a,l,"abstract","override"),o(a,l,"declare","override"),o(a,l,"static","abstract")),e[l]=!0),null!=n&&n.includes(l)&&this.raise(i,{at:a,modifier:l})}}tsIsListTerminator(e){switch(e){case"EnumMembers":case"TypeMembers":return this.match(8);case"HeritageClauseElement":return this.match(5);case"TupleElementTypes":return this.match(3);case"TypeParametersOrArguments":return this.match(48)}throw new Error("Unreachable")}tsParseList(e,t){const n=[];for(;!this.tsIsListTerminator(e);)n.push(t());return n}tsParseDelimitedList(e,t,n){return function(e){if(null==e)throw new Error(`Unexpected ${e} value.`);return e}(this.tsParseDelimitedListWorker(e,t,!0,n))}tsParseDelimitedListWorker(e,t,n,r){const i=[];let s=-1;for(;!this.tsIsListTerminator(e);){s=-1;const r=t();if(null==r)return;if(i.push(r),!this.eat(12)){if(this.tsIsListTerminator(e))break;return void(n&&this.expect(12))}s=this.state.lastTokStart}return r&&(r.value=s),i}tsParseBracketedList(e,t,n,r,i){r||(n?this.expect(0):this.expect(47));const s=this.tsParseDelimitedList(e,t,i);return n?this.expect(3):this.expect(48),s}tsParseImportType(){const e=this.startNode();return this.expect(83),this.expect(10),this.match(129)||this.raise(Ee.UnsupportedImportTypeArgument,{at:this.state.startLoc}),e.argument=super.parseExprAtom(),this.expect(11),this.eat(16)&&(e.qualifier=this.tsParseEntityName()),this.match(47)&&(e.typeParameters=this.tsParseTypeArguments()),this.finishNode(e,"TSImportType")}tsParseEntityName(e=!0){let t=this.parseIdentifier(e);for(;this.eat(16);){const n=this.startNodeAtNode(t);n.left=t,n.right=this.parseIdentifier(e),t=this.finishNode(n,"TSQualifiedName")}return t}tsParseTypeReference(){const e=this.startNode();return e.typeName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(e.typeParameters=this.tsParseTypeArguments()),this.finishNode(e,"TSTypeReference")}tsParseThisTypePredicate(e){this.next();const t=this.startNodeAtNode(e);return t.parameterName=e,t.typeAnnotation=this.tsParseTypeAnnotation(!1),t.asserts=!1,this.finishNode(t,"TSTypePredicate")}tsParseThisTypeNode(){const e=this.startNode();return this.next(),this.finishNode(e,"TSThisType")}tsParseTypeQuery(){const e=this.startNode();return this.expect(87),this.match(83)?e.exprName=this.tsParseImportType():e.exprName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(e.typeParameters=this.tsParseTypeArguments()),this.finishNode(e,"TSTypeQuery")}tsParseInOutModifiers(e){this.tsParseModifiers({modified:e,allowedModifiers:["in","out"],disallowedModifiers:["public","private","protected","readonly","declare","abstract","override"],errorTemplate:Ee.InvalidModifierOnTypeParameter})}tsParseNoneModifiers(e){this.tsParseModifiers({modified:e,allowedModifiers:[],disallowedModifiers:["in","out"],errorTemplate:Ee.InvalidModifierOnTypeParameterPositions})}tsParseTypeParameter(e=this.tsParseNoneModifiers.bind(this)){const t=this.startNode();return e(t),t.name=this.tsParseTypeParameterName(),t.constraint=this.tsEatThenParseType(81),t.default=this.tsEatThenParseType(29),this.finishNode(t,"TSTypeParameter")}tsTryParseTypeParameters(e){if(this.match(47))return this.tsParseTypeParameters(e)}tsParseTypeParameters(e){const t=this.startNode();this.match(47)||this.match(138)?this.next():this.unexpected();const n={value:-1};return t.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this,e),!1,!0,n),0===t.params.length&&this.raise(Ee.EmptyTypeParameters,{at:t}),-1!==n.value&&this.addExtra(t,"trailingComma",n.value),this.finishNode(t,"TSTypeParameterDeclaration")}tsTryNextParseConstantContext(){if(75!==this.lookahead().type)return null;this.next();const e=this.tsParseTypeReference();return e.typeParameters&&this.raise(Ee.CannotFindName,{at:e.typeName,name:"const"}),e}tsFillSignature(e,t){const n=19===e;t.typeParameters=this.tsTryParseTypeParameters(),this.expect(10),t.parameters=this.tsParseBindingListForSignature(),(n||this.match(e))&&(t.typeAnnotation=this.tsParseTypeOrTypePredicateAnnotation(e))}tsParseBindingListForSignature(){return super.parseBindingList(11,41).map((e=>("Identifier"!==e.type&&"RestElement"!==e.type&&"ObjectPattern"!==e.type&&"ArrayPattern"!==e.type&&this.raise(Ee.UnsupportedSignatureParameterKind,{at:e,type:e.type}),e)))}tsParseTypeMemberSemicolon(){this.eat(12)||this.isLineTerminator()||this.expect(13)}tsParseSignatureMember(e,t){return this.tsFillSignature(14,t),this.tsParseTypeMemberSemicolon(),this.finishNode(t,e)}tsIsUnambiguouslyIndexSignature(){return this.next(),!!z(this.state.type)&&(this.next(),this.match(14))}tsTryParseIndexSignature(e){if(!this.match(0)||!this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this)))return;this.expect(0);const t=this.parseIdentifier();t.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(t),this.expect(3),e.parameters=[t];const n=this.tsTryParseTypeAnnotation();return n&&(e.typeAnnotation=n),this.tsParseTypeMemberSemicolon(),this.finishNode(e,"TSIndexSignature")}tsParsePropertyOrMethodSignature(e,t){this.eat(17)&&(e.optional=!0);const n=e;if(this.match(10)||this.match(47)){t&&this.raise(Ee.ReadonlyForMethodSignature,{at:e});const r=n;r.kind&&this.match(47)&&this.raise(Ee.AccesorCannotHaveTypeParameters,{at:this.state.curPosition()}),this.tsFillSignature(14,r),this.tsParseTypeMemberSemicolon();const i="parameters",s="typeAnnotation";if("get"===r.kind)r[i].length>0&&(this.raise(g.BadGetterArity,{at:this.state.curPosition()}),this.isThisParam(r[i][0])&&this.raise(Ee.AccesorCannotDeclareThisParameter,{at:this.state.curPosition()}));else if("set"===r.kind){if(1!==r[i].length)this.raise(g.BadSetterArity,{at:this.state.curPosition()});else{const e=r[i][0];this.isThisParam(e)&&this.raise(Ee.AccesorCannotDeclareThisParameter,{at:this.state.curPosition()}),"Identifier"===e.type&&e.optional&&this.raise(Ee.SetAccesorCannotHaveOptionalParameter,{at:this.state.curPosition()}),"RestElement"===e.type&&this.raise(Ee.SetAccesorCannotHaveRestParameter,{at:this.state.curPosition()})}r[s]&&this.raise(Ee.SetAccesorCannotHaveReturnType,{at:r[s]})}else r.kind="method";return this.finishNode(r,"TSMethodSignature")}{const e=n;t&&(e.readonly=!0);const r=this.tsTryParseTypeAnnotation();return r&&(e.typeAnnotation=r),this.tsParseTypeMemberSemicolon(),this.finishNode(e,"TSPropertySignature")}}tsParseTypeMember(){const e=this.startNode();if(this.match(10)||this.match(47))return this.tsParseSignatureMember("TSCallSignatureDeclaration",e);if(this.match(77)){const t=this.startNode();return this.next(),this.match(10)||this.match(47)?this.tsParseSignatureMember("TSConstructSignatureDeclaration",e):(e.key=this.createIdentifier(t,"new"),this.tsParsePropertyOrMethodSignature(e,!1))}this.tsParseModifiers({modified:e,allowedModifiers:["readonly"],disallowedModifiers:["declare","abstract","private","protected","public","static","override"]});return this.tsTryParseIndexSignature(e)||(super.parsePropertyName(e),e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||!this.tsTokenCanFollowModifier()||(e.kind=e.key.name,super.parsePropertyName(e)),this.tsParsePropertyOrMethodSignature(e,!!e.readonly))}tsParseTypeLiteral(){const e=this.startNode();return e.members=this.tsParseObjectTypeMembers(),this.finishNode(e,"TSTypeLiteral")}tsParseObjectTypeMembers(){this.expect(5);const e=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(8),e}tsIsStartOfMappedType(){return this.next(),this.eat(53)?this.isContextual(118):(this.isContextual(118)&&this.next(),!!this.match(0)&&(this.next(),!!this.tsIsIdentifier()&&(this.next(),this.match(58))))}tsParseMappedTypeParameter(){const e=this.startNode();return e.name=this.tsParseTypeParameterName(),e.constraint=this.tsExpectThenParseType(58),this.finishNode(e,"TSTypeParameter")}tsParseMappedType(){const e=this.startNode();return this.expect(5),this.match(53)?(e.readonly=this.state.value,this.next(),this.expectContextual(118)):this.eatContextual(118)&&(e.readonly=!0),this.expect(0),e.typeParameter=this.tsParseMappedTypeParameter(),e.nameType=this.eatContextual(93)?this.tsParseType():null,this.expect(3),this.match(53)?(e.optional=this.state.value,this.next(),this.expect(17)):this.eat(17)&&(e.optional=!0),e.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(8),this.finishNode(e,"TSMappedType")}tsParseTupleType(){const e=this.startNode();e.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);let t=!1,n=null;return e.elementTypes.forEach((e=>{const{type:r}=e;!t||"TSRestType"===r||"TSOptionalType"===r||"TSNamedTupleMember"===r&&e.optional||this.raise(Ee.OptionalTypeBeforeRequired,{at:e}),t||(t="TSNamedTupleMember"===r&&e.optional||"TSOptionalType"===r);let i=r;"TSRestType"===r&&(i=(e=e.typeAnnotation).type);const s="TSNamedTupleMember"===i;null!=n||(n=s),n!==s&&this.raise(Ee.MixedLabeledAndUnlabeledElements,{at:e})})),this.finishNode(e,"TSTupleType")}tsParseTupleElementType(){const{start:e,startLoc:t}=this.state,n=this.eat(21);let r=this.tsParseType();const i=this.eat(17);if(this.eat(14)){const e=this.startNodeAtNode(r);e.optional=i,"TSTypeReference"!==r.type||r.typeParameters||"Identifier"!==r.typeName.type?(this.raise(Ee.InvalidTupleMemberLabel,{at:r}),e.label=r):e.label=r.typeName,e.elementType=this.tsParseType(),r=this.finishNode(e,"TSNamedTupleMember")}else if(i){const e=this.startNodeAtNode(r);e.typeAnnotation=r,r=this.finishNode(e,"TSOptionalType")}if(n){const n=this.startNodeAt(e,t);n.typeAnnotation=r,r=this.finishNode(n,"TSRestType")}return r}tsParseParenthesizedType(){const e=this.startNode();return this.expect(10),e.typeAnnotation=this.tsParseType(),this.expect(11),this.finishNode(e,"TSParenthesizedType")}tsParseFunctionOrConstructorType(e,t){const n=this.startNode();return"TSConstructorType"===e&&(n.abstract=!!t,t&&this.next(),this.next()),this.tsInAllowConditionalTypesContext((()=>this.tsFillSignature(19,n))),this.finishNode(n,e)}tsParseLiteralTypeNode(){const e=this.startNode();return e.literal=(()=>{switch(this.state.type){case 130:case 131:case 129:case 85:case 86:return super.parseExprAtom();default:throw this.unexpected()}})(),this.finishNode(e,"TSLiteralType")}tsParseTemplateLiteralType(){const e=this.startNode();return e.literal=super.parseTemplate(!1),this.finishNode(e,"TSLiteralType")}parseTemplateSubstitution(){return this.state.inType?this.tsParseType():super.parseTemplateSubstitution()}tsParseThisTypeOrThisTypePredicate(){const e=this.tsParseThisTypeNode();return this.isContextual(113)&&!this.hasPrecedingLineBreak()?this.tsParseThisTypePredicate(e):e}tsParseNonArrayType(){switch(this.state.type){case 129:case 130:case 131:case 85:case 86:return this.tsParseLiteralTypeNode();case 53:if("-"===this.state.value){const e=this.startNode(),t=this.lookahead();if(130!==t.type&&131!==t.type)throw this.unexpected();return e.literal=this.parseMaybeUnary(),this.finishNode(e,"TSLiteralType")}break;case 78:return this.tsParseThisTypeOrThisTypePredicate();case 87:return this.tsParseTypeQuery();case 83:return this.tsParseImportType();case 5:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case 0:return this.tsParseTupleType();case 10:return this.tsParseParenthesizedType();case 25:case 24:return this.tsParseTemplateLiteralType();default:{const{type:e}=this.state;if(z(e)||88===e||84===e){const t=88===e?"TSVoidKeyword":84===e?"TSNullKeyword":function(e){switch(e){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}(this.state.value);if(void 0!==t&&46!==this.lookaheadCharCode()){const e=this.startNode();return this.next(),this.finishNode(e,t)}return this.tsParseTypeReference()}}}throw this.unexpected()}tsParseArrayTypeOrHigher(){let e=this.tsParseNonArrayType();for(;!this.hasPrecedingLineBreak()&&this.eat(0);)if(this.match(3)){const t=this.startNodeAtNode(e);t.elementType=e,this.expect(3),e=this.finishNode(t,"TSArrayType")}else{const t=this.startNodeAtNode(e);t.objectType=e,t.indexType=this.tsParseType(),this.expect(3),e=this.finishNode(t,"TSIndexedAccessType")}return e}tsParseTypeOperator(){const e=this.startNode(),t=this.state.value;return this.next(),e.operator=t,e.typeAnnotation=this.tsParseTypeOperatorOrHigher(),"readonly"===t&&this.tsCheckTypeAnnotationForReadOnly(e),this.finishNode(e,"TSTypeOperator")}tsCheckTypeAnnotationForReadOnly(e){switch(e.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(Ee.UnexpectedReadonly,{at:e})}}tsParseInferType(){const e=this.startNode();this.expectContextual(112);const t=this.startNode();return t.name=this.tsParseTypeParameterName(),t.constraint=this.tsTryParse((()=>this.tsParseConstraintForInferType())),e.typeParameter=this.finishNode(t,"TSTypeParameter"),this.finishNode(e,"TSInferType")}tsParseConstraintForInferType(){if(this.eat(81)){const e=this.tsInDisallowConditionalTypesContext((()=>this.tsParseType()));if(this.state.inDisallowConditionalTypesContext||!this.match(17))return e}}tsParseTypeOperatorOrHigher(){var e;return(e=this.state.type)>=117&&e<=119&&!this.state.containsEsc?this.tsParseTypeOperator():this.isContextual(112)?this.tsParseInferType():this.tsInAllowConditionalTypesContext((()=>this.tsParseArrayTypeOrHigher()))}tsParseUnionOrIntersectionType(e,t,n){const r=this.startNode(),i=this.eat(n),s=[];do{s.push(t())}while(this.eat(n));return 1!==s.length||i?(r.types=s,this.finishNode(r,e)):s[0]}tsParseIntersectionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),45)}tsParseUnionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),43)}tsIsStartOfFunctionType(){return!!this.match(47)||this.match(10)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))}tsSkipParameterStart(){if(z(this.state.type)||this.match(78))return this.next(),!0;if(this.match(5)){const{errors:e}=this.state,t=e.length;try{return this.parseObjectLike(8,!0),e.length===t}catch(e){return!1}}if(this.match(0)){this.next();const{errors:e}=this.state,t=e.length;try{return super.parseBindingList(3,93,!0),e.length===t}catch(e){return!1}}return!1}tsIsUnambiguouslyStartOfFunctionType(){if(this.next(),this.match(11)||this.match(21))return!0;if(this.tsSkipParameterStart()){if(this.match(14)||this.match(12)||this.match(17)||this.match(29))return!0;if(this.match(11)&&(this.next(),this.match(19)))return!0}return!1}tsParseTypeOrTypePredicateAnnotation(e){return this.tsInType((()=>{const t=this.startNode();this.expect(e);const n=this.startNode(),r=!!this.tsTryParse(this.tsParseTypePredicateAsserts.bind(this));if(r&&this.match(78)){let e=this.tsParseThisTypeOrThisTypePredicate();return"TSThisType"===e.type?(n.parameterName=e,n.asserts=!0,n.typeAnnotation=null,e=this.finishNode(n,"TSTypePredicate")):(this.resetStartLocationFromNode(e,n),e.asserts=!0),t.typeAnnotation=e,this.finishNode(t,"TSTypeAnnotation")}const i=this.tsIsIdentifier()&&this.tsTryParse(this.tsParseTypePredicatePrefix.bind(this));if(!i)return r?(n.parameterName=this.parseIdentifier(),n.asserts=r,n.typeAnnotation=null,t.typeAnnotation=this.finishNode(n,"TSTypePredicate"),this.finishNode(t,"TSTypeAnnotation")):this.tsParseTypeAnnotation(!1,t);const s=this.tsParseTypeAnnotation(!1);return n.parameterName=i,n.typeAnnotation=s,n.asserts=r,t.typeAnnotation=this.finishNode(n,"TSTypePredicate"),this.finishNode(t,"TSTypeAnnotation")}))}tsTryParseTypeOrTypePredicateAnnotation(){return this.match(14)?this.tsParseTypeOrTypePredicateAnnotation(14):void 0}tsTryParseTypeAnnotation(){return this.match(14)?this.tsParseTypeAnnotation():void 0}tsTryParseType(){return this.tsEatThenParseType(14)}tsParseTypePredicatePrefix(){const e=this.parseIdentifier();if(this.isContextual(113)&&!this.hasPrecedingLineBreak())return this.next(),e}tsParseTypePredicateAsserts(){if(106!==this.state.type)return!1;const e=this.state.containsEsc;return this.next(),!(!z(this.state.type)&&!this.match(78)||(e&&this.raise(g.InvalidEscapedReservedWord,{at:this.state.lastTokStartLoc,reservedWord:"asserts"}),0))}tsParseTypeAnnotation(e=!0,t=this.startNode()){return this.tsInType((()=>{e&&this.expect(14),t.typeAnnotation=this.tsParseType()})),this.finishNode(t,"TSTypeAnnotation")}tsParseType(){Ae(this.state.inType);const e=this.tsParseNonConditionalType();if(this.state.inDisallowConditionalTypesContext||this.hasPrecedingLineBreak()||!this.eat(81))return e;const t=this.startNodeAtNode(e);return t.checkType=e,t.extendsType=this.tsInDisallowConditionalTypesContext((()=>this.tsParseNonConditionalType())),this.expect(17),t.trueType=this.tsInAllowConditionalTypesContext((()=>this.tsParseType())),this.expect(14),t.falseType=this.tsInAllowConditionalTypesContext((()=>this.tsParseType())),this.finishNode(t,"TSConditionalType")}isAbstractConstructorSignature(){return this.isContextual(120)&&77===this.lookahead().type}tsParseNonConditionalType(){return this.tsIsStartOfFunctionType()?this.tsParseFunctionOrConstructorType("TSFunctionType"):this.match(77)?this.tsParseFunctionOrConstructorType("TSConstructorType"):this.isAbstractConstructorSignature()?this.tsParseFunctionOrConstructorType("TSConstructorType",!0):this.tsParseUnionTypeOrHigher()}tsParseTypeAssertion(){this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(Ee.ReservedTypeAssertion,{at:this.state.startLoc});const e=this.startNode(),t=this.tsTryNextParseConstantContext();return e.typeAnnotation=t||this.tsNextThenParseType(),this.expect(48),e.expression=this.parseMaybeUnary(),this.finishNode(e,"TSTypeAssertion")}tsParseHeritageClause(e){const t=this.state.startLoc,n=this.tsParseDelimitedList("HeritageClauseElement",(()=>{const e=this.startNode();return e.expression=this.tsParseEntityName(),this.match(47)&&(e.typeParameters=this.tsParseTypeArguments()),this.finishNode(e,"TSExpressionWithTypeArguments")}));return n.length||this.raise(Ee.EmptyHeritageClauseType,{at:t,token:e}),n}tsParseInterfaceDeclaration(e,t={}){if(this.hasFollowingLineBreak())return null;this.expectContextual(125),t.declare&&(e.declare=!0),z(this.state.type)?(e.id=this.parseIdentifier(),this.checkIdentifier(e.id,130)):(e.id=null,this.raise(Ee.MissingInterfaceName,{at:this.state.startLoc})),e.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutModifiers.bind(this)),this.eat(81)&&(e.extends=this.tsParseHeritageClause("extends"));const n=this.startNode();return n.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),e.body=this.finishNode(n,"TSInterfaceBody"),this.finishNode(e,"TSInterfaceDeclaration")}tsParseTypeAliasDeclaration(e){return e.id=this.parseIdentifier(),this.checkIdentifier(e.id,2),e.typeAnnotation=this.tsInType((()=>{if(e.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutModifiers.bind(this)),this.expect(29),this.isContextual(111)&&16!==this.lookahead().type){const e=this.startNode();return this.next(),this.finishNode(e,"TSIntrinsicKeyword")}return this.tsParseType()})),this.semicolon(),this.finishNode(e,"TSTypeAliasDeclaration")}tsInNoContext(e){const t=this.state.context;this.state.context=[t[0]];try{return e()}finally{this.state.context=t}}tsInType(e){const t=this.state.inType;this.state.inType=!0;try{return e()}finally{this.state.inType=t}}tsInDisallowConditionalTypesContext(e){const t=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!0;try{return e()}finally{this.state.inDisallowConditionalTypesContext=t}}tsInAllowConditionalTypesContext(e){const t=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!1;try{return e()}finally{this.state.inDisallowConditionalTypesContext=t}}tsEatThenParseType(e){return this.match(e)?this.tsNextThenParseType():void 0}tsExpectThenParseType(e){return this.tsDoThenParseType((()=>this.expect(e)))}tsNextThenParseType(){return this.tsDoThenParseType((()=>this.next()))}tsDoThenParseType(e){return this.tsInType((()=>(e(),this.tsParseType())))}tsParseEnumMember(){const e=this.startNode();return e.id=this.match(129)?super.parseStringLiteral(this.state.value):this.parseIdentifier(!0),this.eat(29)&&(e.initializer=super.parseMaybeAssignAllowIn()),this.finishNode(e,"TSEnumMember")}tsParseEnumDeclaration(e,t={}){return t.const&&(e.const=!0),t.declare&&(e.declare=!0),this.expectContextual(122),e.id=this.parseIdentifier(),this.checkIdentifier(e.id,e.const?779:267),this.expect(5),e.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(e,"TSEnumDeclaration")}tsParseModuleBlock(){const e=this.startNode();return this.scope.enter(0),this.expect(5),super.parseBlockOrModuleBlockBody(e.body=[],void 0,!0,8),this.scope.exit(),this.finishNode(e,"TSModuleBlock")}tsParseModuleOrNamespaceDeclaration(e,t=!1){if(e.id=this.parseIdentifier(),t||this.checkIdentifier(e.id,1024),this.eat(16)){const t=this.startNode();this.tsParseModuleOrNamespaceDeclaration(t,!0),e.body=t}else this.scope.enter(256),this.prodParam.enter(0),e.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();return this.finishNode(e,"TSModuleDeclaration")}tsParseAmbientExternalModuleDeclaration(e){return this.isContextual(109)?(e.global=!0,e.id=this.parseIdentifier()):this.match(129)?e.id=super.parseStringLiteral(this.state.value):this.unexpected(),this.match(5)?(this.scope.enter(256),this.prodParam.enter(0),e.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit()):this.semicolon(),this.finishNode(e,"TSModuleDeclaration")}tsParseImportEqualsDeclaration(e,t){e.isExport=t||!1,e.id=this.parseIdentifier(),this.checkIdentifier(e.id,9),this.expect(29);const n=this.tsParseModuleReference();return"type"===e.importKind&&"TSExternalModuleReference"!==n.type&&this.raise(Ee.ImportAliasHasImportType,{at:n}),e.moduleReference=n,this.semicolon(),this.finishNode(e,"TSImportEqualsDeclaration")}tsIsExternalModuleReference(){return this.isContextual(116)&&40===this.lookaheadCharCode()}tsParseModuleReference(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(!1)}tsParseExternalModuleReference(){const e=this.startNode();if(this.expectContextual(116),this.expect(10),!this.match(129))throw this.unexpected();return e.expression=super.parseExprAtom(),this.expect(11),this.finishNode(e,"TSExternalModuleReference")}tsLookAhead(e){const t=this.state.clone(),n=e();return this.state=t,n}tsTryParseAndCatch(e){const t=this.tryParse((t=>e()||t()));if(!t.aborted&&t.node)return t.error&&(this.state=t.failState),t.node}tsTryParse(e){const t=this.state.clone(),n=e();return void 0!==n&&!1!==n?n:void(this.state=t)}tsTryParseDeclare(e){if(this.isLineTerminator())return;let t,n=this.state.type;return this.isContextual(99)&&(n=74,t="let"),this.tsInAmbientContext((()=>{if(68===n)return e.declare=!0,super.parseFunctionStatement(e,!1,!0);if(80===n)return e.declare=!0,this.parseClass(e,!0,!1);if(122===n)return this.tsParseEnumDeclaration(e,{declare:!0});if(109===n)return this.tsParseAmbientExternalModuleDeclaration(e);if(75===n||74===n)return this.match(75)&&this.isLookaheadContextual("enum")?(this.expect(75),this.tsParseEnumDeclaration(e,{const:!0,declare:!0})):(e.declare=!0,this.parseVarStatement(e,t||this.state.value,!0));if(125===n){const t=this.tsParseInterfaceDeclaration(e,{declare:!0});if(t)return t}return z(n)?this.tsParseDeclaration(e,this.state.value,!0):void 0}))}tsTryParseExportDeclaration(){return this.tsParseDeclaration(this.startNode(),this.state.value,!0)}tsParseExpressionStatement(e,t){switch(t.name){case"declare":{const t=this.tsTryParseDeclare(e);if(t)return t.declare=!0,t;break}case"global":if(this.match(5)){this.scope.enter(256),this.prodParam.enter(0);const n=e;return n.global=!0,n.id=t,n.body=this.tsParseModuleBlock(),this.scope.exit(),this.prodParam.exit(),this.finishNode(n,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(e,t.name,!1)}}tsParseDeclaration(e,t,n){switch(t){case"abstract":if(this.tsCheckLineTerminator(n)&&(this.match(80)||z(this.state.type)))return this.tsParseAbstractDeclaration(e);break;case"module":if(this.tsCheckLineTerminator(n)){if(this.match(129))return this.tsParseAmbientExternalModuleDeclaration(e);if(z(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(e)}break;case"namespace":if(this.tsCheckLineTerminator(n)&&z(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(e);break;case"type":if(this.tsCheckLineTerminator(n)&&z(this.state.type))return this.tsParseTypeAliasDeclaration(e)}}tsCheckLineTerminator(e){return e?!this.hasFollowingLineBreak()&&(this.next(),!0):!this.isLineTerminator()}tsTryParseGenericAsyncArrowFunction(e,t){if(!this.match(47))return;const n=this.state.maybeInArrowParameters;this.state.maybeInArrowParameters=!0;const r=this.tsTryParseAndCatch((()=>{const n=this.startNodeAt(e,t);return n.typeParameters=this.tsParseTypeParameters(),super.parseFunctionParams(n),n.returnType=this.tsTryParseTypeOrTypePredicateAnnotation(),this.expect(19),n}));return this.state.maybeInArrowParameters=n,r?super.parseArrowExpression(r,null,!0):void 0}tsParseTypeArgumentsInExpression(){if(47===this.reScan_lt())return this.tsParseTypeArguments()}tsParseTypeArguments(){const e=this.startNode();return e.params=this.tsInType((()=>this.tsInNoContext((()=>(this.expect(47),this.tsParseDelimitedList("TypeParametersOrArguments",this.tsParseType.bind(this))))))),0===e.params.length&&this.raise(Ee.EmptyTypeArguments,{at:e}),this.expect(48),this.finishNode(e,"TSTypeParameterInstantiation")}tsIsDeclarationStart(){return(e=this.state.type)>=120&&e<=126;var e}isExportDefaultSpecifier(){return!this.tsIsDeclarationStart()&&super.isExportDefaultSpecifier()}parseAssignableListItem(e,t){const n=this.state.start,r=this.state.startLoc;let i,s=!1,o=!1;if(void 0!==e){const t={};this.tsParseModifiers({modified:t,allowedModifiers:["public","private","protected","override","readonly"]}),i=t.accessibility,o=t.override,s=t.readonly,!1===e&&(i||s||o)&&this.raise(Ee.UnexpectedParameterModifier,{at:r})}const a=this.parseMaybeDefault();this.parseAssignableListItemTypes(a);const l=this.parseMaybeDefault(a.start,a.loc.start,a);if(i||s||o){const e=this.startNodeAt(n,r);return t.length&&(e.decorators=t),i&&(e.accessibility=i),s&&(e.readonly=s),o&&(e.override=o),"Identifier"!==l.type&&"AssignmentPattern"!==l.type&&this.raise(Ee.UnsupportedParameterPropertyKind,{at:e}),e.parameter=l,this.finishNode(e,"TSParameterProperty")}return t.length&&(a.decorators=t),l}isSimpleParameter(e){return"TSParameterProperty"===e.type&&super.isSimpleParameter(e.parameter)||super.isSimpleParameter(e)}parseFunctionBodyAndFinish(e,t,n=!1){this.match(14)&&(e.returnType=this.tsParseTypeOrTypePredicateAnnotation(14));const r="FunctionDeclaration"===t?"TSDeclareFunction":"ClassMethod"===t||"ClassPrivateMethod"===t?"TSDeclareMethod":void 0;return r&&!this.match(5)&&this.isLineTerminator()?this.finishNode(e,r):"TSDeclareFunction"===r&&this.state.isAmbientContext&&(this.raise(Ee.DeclareFunctionHasImplementation,{at:e}),e.declare)?super.parseFunctionBodyAndFinish(e,r,n):super.parseFunctionBodyAndFinish(e,t,n)}registerFunctionStatementId(e){!e.body&&e.id?this.checkIdentifier(e.id,1024):super.registerFunctionStatementId(e)}tsCheckForInvalidTypeCasts(e){e.forEach((e=>{"TSTypeCastExpression"===(null==e?void 0:e.type)&&this.raise(Ee.UnexpectedTypeAnnotation,{at:e.typeAnnotation})}))}toReferencedList(e,t){return this.tsCheckForInvalidTypeCasts(e),e}parseArrayLike(...e){const t=super.parseArrayLike(...e);return"ArrayExpression"===t.type&&this.tsCheckForInvalidTypeCasts(t.elements),t}parseSubscript(e,t,n,r,i){if(!this.hasPrecedingLineBreak()&&this.match(35)){this.state.canStartJSXElement=!1,this.next();const r=this.startNodeAt(t,n);return r.expression=e,this.finishNode(r,"TSNonNullExpression")}let s=!1;if(this.match(18)&&60===this.lookaheadCharCode()){if(r)return i.stop=!0,e;i.optionalChainMember=s=!0,this.next()}if(this.match(47)||this.match(51)){let o;const a=this.tsTryParseAndCatch((()=>{if(!r&&this.atPossibleAsyncArrow(e)){const e=this.tsTryParseGenericAsyncArrowFunction(t,n);if(e)return e}const a=this.tsParseTypeArgumentsInExpression();if(!a)return;if(s&&!this.match(10))return void(o=this.state.curPosition());if(J(this.state.type)){const r=super.parseTaggedTemplateExpression(e,t,n,i);return r.typeParameters=a,r}if(!r&&this.eat(10)){const r=this.startNodeAt(t,n);return r.callee=e,r.arguments=this.parseCallExpressionArguments(11,!1),this.tsCheckForInvalidTypeCasts(r.arguments),r.typeParameters=a,i.optionalChainMember&&(r.optional=s),this.finishCallExpression(r,i.optionalChainMember)}const l=this.state.type;if(48===l||10!==l&&W(l)&&!this.hasPrecedingLineBreak())return;const c=this.startNodeAt(t,n);return c.expression=e,c.typeParameters=a,this.finishNode(c,"TSInstantiationExpression")}));if(o&&this.unexpected(o,10),a)return"TSInstantiationExpression"===a.type&&(this.match(16)||this.match(18)&&40!==this.lookaheadCharCode())&&this.raise(Ee.InvalidPropertyAccessAfterInstantiationExpression,{at:this.state.startLoc}),a}return super.parseSubscript(e,t,n,r,i)}parseNewCallee(e){var t;super.parseNewCallee(e);const{callee:n}=e;"TSInstantiationExpression"!==n.type||null!=(t=n.extra)&&t.parenthesized||(e.typeParameters=n.typeParameters,e.callee=n.expression)}parseExprOp(e,t,n,r){if(K(58)>r&&!this.hasPrecedingLineBreak()&&this.isContextual(93)){const i=this.startNodeAt(t,n);i.expression=e;const s=this.tsTryNextParseConstantContext();return i.typeAnnotation=s||this.tsNextThenParseType(),this.finishNode(i,"TSAsExpression"),this.reScan_lt_gt(),this.parseExprOp(i,t,n,r)}return super.parseExprOp(e,t,n,r)}checkReservedWord(e,t,n,r){this.state.isAmbientContext||super.checkReservedWord(e,t,n,r)}checkDuplicateExports(){}parseImport(e){if(e.importKind="value",z(this.state.type)||this.match(55)||this.match(5)){let t=this.lookahead();if(this.isContextual(126)&&12!==t.type&&97!==t.type&&29!==t.type&&(e.importKind="type",this.next(),t=this.lookahead()),z(this.state.type)&&29===t.type)return this.tsParseImportEqualsDeclaration(e)}const t=super.parseImport(e);return"type"===t.importKind&&t.specifiers.length>1&&"ImportDefaultSpecifier"===t.specifiers[0].type&&this.raise(Ee.TypeImportCannotSpecifyDefaultAndNamed,{at:t}),t}parseExport(e){if(this.match(83))return this.next(),this.isContextual(126)&&61!==this.lookaheadCharCode()?(e.importKind="type",this.next()):e.importKind="value",this.tsParseImportEqualsDeclaration(e,!0);if(this.eat(29)){const t=e;return t.expression=super.parseExpression(),this.semicolon(),this.finishNode(t,"TSExportAssignment")}if(this.eatContextual(93)){const t=e;return this.expectContextual(124),t.id=this.parseIdentifier(),this.semicolon(),this.finishNode(t,"TSNamespaceExportDeclaration")}return this.isContextual(126)&&5===this.lookahead().type?(this.next(),e.exportKind="type"):e.exportKind="value",super.parseExport(e)}isAbstractClass(){return this.isContextual(120)&&80===this.lookahead().type}parseExportDefaultExpression(){if(this.isAbstractClass()){const e=this.startNode();return this.next(),e.abstract=!0,this.parseClass(e,!0,!0)}if(this.match(125)){const e=this.tsParseInterfaceDeclaration(this.startNode());if(e)return e}return super.parseExportDefaultExpression()}parseVarStatement(e,t,n=!1){const{isAmbientContext:r}=this.state,i=super.parseVarStatement(e,t,n||r);if(!r)return i;for(const{id:e,init:n}of i.declarations)n&&("const"!==t||e.typeAnnotation?this.raise(Ee.InitializerNotAllowedInAmbientContext,{at:n}):"StringLiteral"!==n.type&&"BooleanLiteral"!==n.type&&"NumericLiteral"!==n.type&&"BigIntLiteral"!==n.type&&("TemplateLiteral"!==n.type||n.expressions.length>0)&&!Ie(n)&&this.raise(Ee.ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference,{at:n}));return i}parseStatementContent(e,t){if(this.match(75)&&this.isLookaheadContextual("enum")){const e=this.startNode();return this.expect(75),this.tsParseEnumDeclaration(e,{const:!0})}if(this.isContextual(122))return this.tsParseEnumDeclaration(this.startNode());if(this.isContextual(125)){const e=this.tsParseInterfaceDeclaration(this.startNode());if(e)return e}return super.parseStatementContent(e,t)}parseAccessModifier(){return this.tsParseModifier(["public","protected","private"])}tsHasSomeModifiers(e,t){return t.some((t=>Ne(t)?e.accessibility===t:!!e[t]))}tsIsStartOfStaticBlocks(){return this.isContextual(104)&&123===this.lookaheadCharCode()}parseClassMember(e,t,n){const r=["declare","private","public","protected","override","abstract","readonly","static"];this.tsParseModifiers({modified:t,allowedModifiers:r,disallowedModifiers:["in","out"],stopOnStartOfClassStaticBlock:!0,errorTemplate:Ee.InvalidModifierOnTypeParameterPositions});const i=()=>{this.tsIsStartOfStaticBlocks()?(this.next(),this.next(),this.tsHasSomeModifiers(t,r)&&this.raise(Ee.StaticBlockCannotHaveModifier,{at:this.state.curPosition()}),super.parseClassStaticBlock(e,t)):this.parseClassMemberWithIsStatic(e,t,n,!!t.static)};t.declare?this.tsInAmbientContext(i):i()}parseClassMemberWithIsStatic(e,t,n,r){const i=this.tsTryParseIndexSignature(t);if(i)return e.body.push(i),t.abstract&&this.raise(Ee.IndexSignatureHasAbstract,{at:t}),t.accessibility&&this.raise(Ee.IndexSignatureHasAccessibility,{at:t,modifier:t.accessibility}),t.declare&&this.raise(Ee.IndexSignatureHasDeclare,{at:t}),void(t.override&&this.raise(Ee.IndexSignatureHasOverride,{at:t}));!this.state.inAbstractClass&&t.abstract&&this.raise(Ee.NonAbstractClassHasAbstractMethod,{at:t}),t.override&&(n.hadSuperClass||this.raise(Ee.OverrideNotInSubClass,{at:t})),super.parseClassMemberWithIsStatic(e,t,n,r)}parsePostMemberNameModifiers(e){this.eat(17)&&(e.optional=!0),e.readonly&&this.match(10)&&this.raise(Ee.ClassMethodHasReadonly,{at:e}),e.declare&&this.match(10)&&this.raise(Ee.ClassMethodHasDeclare,{at:e})}parseExpressionStatement(e,t){return("Identifier"===t.type?this.tsParseExpressionStatement(e,t):void 0)||super.parseExpressionStatement(e,t)}shouldParseExportDeclaration(){return!!this.tsIsDeclarationStart()||super.shouldParseExportDeclaration()}parseConditional(e,t,n,r){if(!this.state.maybeInArrowParameters||!this.match(17))return super.parseConditional(e,t,n,r);const i=this.tryParse((()=>super.parseConditional(e,t,n)));return i.node?(i.error&&(this.state=i.failState),i.node):(i.error&&super.setOptionalParametersError(r,i.error),e)}parseParenItem(e,t,n){if(e=super.parseParenItem(e,t,n),this.eat(17)&&(e.optional=!0,this.resetEndLocation(e)),this.match(14)){const r=this.startNodeAt(t,n);return r.expression=e,r.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(r,"TSTypeCastExpression")}return e}parseExportDeclaration(e){if(!this.state.isAmbientContext&&this.isContextual(121))return this.tsInAmbientContext((()=>this.parseExportDeclaration(e)));const t=this.state.start,n=this.state.startLoc,r=this.eatContextual(121);if(r&&(this.isContextual(121)||!this.shouldParseExportDeclaration()))throw this.raise(Ee.ExpectedAmbientAfterExportDeclare,{at:this.state.startLoc});const i=z(this.state.type)&&this.tsTryParseExportDeclaration()||super.parseExportDeclaration(e);return i?(("TSInterfaceDeclaration"===i.type||"TSTypeAliasDeclaration"===i.type||r)&&(e.exportKind="type"),r&&(this.resetStartLocation(i,t,n),i.declare=!0),i):null}parseClassId(e,t,n){if((!t||n)&&this.isContextual(110))return;super.parseClassId(e,t,n,e.declare?1024:139);const r=this.tsTryParseTypeParameters(this.tsParseInOutModifiers.bind(this));r&&(e.typeParameters=r)}parseClassPropertyAnnotation(e){!e.optional&&this.eat(35)&&(e.definite=!0);const t=this.tsTryParseTypeAnnotation();t&&(e.typeAnnotation=t)}parseClassProperty(e){if(this.parseClassPropertyAnnotation(e),this.state.isAmbientContext&&(!e.readonly||e.typeAnnotation)&&this.match(29)&&this.raise(Ee.DeclareClassFieldHasInitializer,{at:this.state.startLoc}),e.abstract&&this.match(29)){const{key:t}=e;this.raise(Ee.AbstractPropertyHasInitializer,{at:this.state.startLoc,propertyName:"Identifier"!==t.type||e.computed?`[${this.input.slice(t.start,t.end)}]`:t.name})}return super.parseClassProperty(e)}parseClassPrivateProperty(e){return e.abstract&&this.raise(Ee.PrivateElementHasAbstract,{at:e}),e.accessibility&&this.raise(Ee.PrivateElementHasAccessibility,{at:e,modifier:e.accessibility}),this.parseClassPropertyAnnotation(e),super.parseClassPrivateProperty(e)}pushClassMethod(e,t,n,r,i,s){const o=this.tsTryParseTypeParameters();o&&i&&this.raise(Ee.ConstructorHasTypeParameters,{at:o});const{declare:a=!1,kind:l}=t;!a||"get"!==l&&"set"!==l||this.raise(Ee.DeclareAccessor,{at:t,kind:l}),o&&(t.typeParameters=o),super.pushClassMethod(e,t,n,r,i,s)}pushClassPrivateMethod(e,t,n,r){const i=this.tsTryParseTypeParameters();i&&(t.typeParameters=i),super.pushClassPrivateMethod(e,t,n,r)}declareClassPrivateMethodInScope(e,t){"TSDeclareMethod"!==e.type&&("MethodDefinition"!==e.type||e.value.body)&&super.declareClassPrivateMethodInScope(e,t)}parseClassSuper(e){super.parseClassSuper(e),e.superClass&&(this.match(47)||this.match(51))&&(e.superTypeParameters=this.tsParseTypeArgumentsInExpression()),this.eatContextual(110)&&(e.implements=this.tsParseHeritageClause("implements"))}parseObjPropValue(e,...t){const n=this.tsTryParseTypeParameters();return n&&(e.typeParameters=n),super.parseObjPropValue(e,...t)}parseFunctionParams(e,t){const n=this.tsTryParseTypeParameters();n&&(e.typeParameters=n),super.parseFunctionParams(e,t)}parseVarId(e,t){super.parseVarId(e,t),"Identifier"===e.id.type&&!this.hasPrecedingLineBreak()&&this.eat(35)&&(e.definite=!0);const n=this.tsTryParseTypeAnnotation();n&&(e.id.typeAnnotation=n,this.resetEndLocation(e.id))}parseAsyncArrowFromCallExpression(e,t){return this.match(14)&&(e.returnType=this.tsParseTypeAnnotation()),super.parseAsyncArrowFromCallExpression(e,t)}parseMaybeAssign(...e){var t,n,r,i,s,o,a;let l,c,u,h;if(this.hasPlugin("jsx")&&(this.match(138)||this.match(47))){if(l=this.state.clone(),c=this.tryParse((()=>super.parseMaybeAssign(...e)),l),!c.error)return c.node;const{context:t}=this.state,n=t[t.length-1];n!==w.j_oTag&&n!==w.j_expr||t.pop()}if(!(null!=(t=c)&&t.error||this.match(47)))return super.parseMaybeAssign(...e);l&&l!==this.state||(l=this.state.clone());const d=this.tryParse((t=>{var n,r;h=this.tsParseTypeParameters();const i=super.parseMaybeAssign(...e);return("ArrowFunctionExpression"!==i.type||null!=(n=i.extra)&&n.parenthesized)&&t(),0!==(null==(r=h)?void 0:r.params.length)&&this.resetStartLocationFromNode(i,h),i.typeParameters=h,i}),l);if(!d.error&&!d.aborted)return h&&this.reportReservedArrowTypeParam(h),d.node;if(!c&&(Ae(!this.hasPlugin("jsx")),u=this.tryParse((()=>super.parseMaybeAssign(...e)),l),!u.error))return u.node;if(null!=(n=c)&&n.node)return this.state=c.failState,c.node;if(d.node)return this.state=d.failState,h&&this.reportReservedArrowTypeParam(h),d.node;if(null!=(r=u)&&r.node)return this.state=u.failState,u.node;if(null!=(i=c)&&i.thrown)throw c.error;if(d.thrown)throw d.error;if(null!=(s=u)&&s.thrown)throw u.error;throw(null==(o=c)?void 0:o.error)||d.error||(null==(a=u)?void 0:a.error)}reportReservedArrowTypeParam(e){var t;1!==e.params.length||null!=(t=e.extra)&&t.trailingComma||!this.getPluginOption("typescript","disallowAmbiguousJSXLike")||this.raise(Ee.ReservedArrowTypeParam,{at:e})}parseMaybeUnary(e){return!this.hasPlugin("jsx")&&this.match(47)?this.tsParseTypeAssertion():super.parseMaybeUnary(e)}parseArrow(e){if(this.match(14)){const t=this.tryParse((e=>{const t=this.tsParseTypeOrTypePredicateAnnotation(14);return!this.canInsertSemicolon()&&this.match(19)||e(),t}));if(t.aborted)return;t.thrown||(t.error&&(this.state=t.failState),e.returnType=t.node)}return super.parseArrow(e)}parseAssignableListItemTypes(e){this.eat(17)&&("Identifier"===e.type||this.state.isAmbientContext||this.state.inType||this.raise(Ee.PatternIsOptional,{at:e}),e.optional=!0);const t=this.tsTryParseTypeAnnotation();return t&&(e.typeAnnotation=t),this.resetEndLocation(e),e}isAssignable(e,t){switch(e.type){case"TSTypeCastExpression":return this.isAssignable(e.expression,t);case"TSParameterProperty":return!0;default:return super.isAssignable(e,t)}}toAssignable(e,t=!1){switch(e.type){case"ParenthesizedExpression":this.toAssignableParenthesizedExpression(e,t);break;case"TSAsExpression":case"TSNonNullExpression":case"TSTypeAssertion":t?this.expressionScope.recordArrowParemeterBindingError(Ee.UnexpectedTypeCastInParameter,{at:e}):this.raise(Ee.UnexpectedTypeCastInParameter,{at:e}),this.toAssignable(e.expression,t);break;case"AssignmentExpression":t||"TSTypeCastExpression"!==e.left.type||(e.left=this.typeCastToParameter(e.left));default:super.toAssignable(e,t)}}toAssignableParenthesizedExpression(e,t){switch(e.expression.type){case"TSAsExpression":case"TSNonNullExpression":case"TSTypeAssertion":case"ParenthesizedExpression":this.toAssignable(e.expression,t);break;default:super.toAssignable(e,t)}}checkToRestConversion(e,t){switch(e.type){case"TSAsExpression":case"TSTypeAssertion":case"TSNonNullExpression":this.checkToRestConversion(e.expression,!1);break;default:super.checkToRestConversion(e,t)}}isValidLVal(e,t,n){return r={TSTypeCastExpression:!0,TSParameterProperty:"parameter",TSNonNullExpression:"expression",TSAsExpression:(n!==oe||!t)&&["expression",!0],TSTypeAssertion:(n!==oe||!t)&&["expression",!0]},i=e,Object.hasOwnProperty.call(r,i)&&r[i]||super.isValidLVal(e,t,n);var r,i}parseBindingAtom(){return 78===this.state.type?this.parseIdentifier(!0):super.parseBindingAtom()}parseMaybeDecoratorArguments(e){if(this.match(47)||this.match(51)){const t=this.tsParseTypeArgumentsInExpression();if(this.match(10)){const n=super.parseMaybeDecoratorArguments(e);return n.typeParameters=t,n}this.unexpected(null,10)}return super.parseMaybeDecoratorArguments(e)}checkCommaAfterRest(e){return this.state.isAmbientContext&&this.match(12)&&this.lookaheadCharCode()===e?(this.next(),!1):super.checkCommaAfterRest(e)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(35)||this.match(14)||super.isClassProperty()}parseMaybeDefault(...e){const t=super.parseMaybeDefault(...e);return"AssignmentPattern"===t.type&&t.typeAnnotation&&t.right.start<t.typeAnnotation.start&&this.raise(Ee.TypeAnnotationAfterAssign,{at:t.typeAnnotation}),t}getTokenFromCode(e){if(this.state.inType){if(62===e)return this.finishOp(48,1);if(60===e)return this.finishOp(47,1)}return super.getTokenFromCode(e)}reScan_lt_gt(){const{type:e}=this.state;47===e?(this.state.pos-=1,this.readToken_lt()):48===e&&(this.state.pos-=1,this.readToken_gt())}reScan_lt(){const{type:e}=this.state;return 51===e?(this.state.pos-=2,this.finishOp(47,1),47):e}toAssignableList(e,...t){for(let t=0;t<e.length;t++){const n=e[t];"TSTypeCastExpression"===(null==n?void 0:n.type)&&(e[t]=this.typeCastToParameter(n))}super.toAssignableList(e,...t)}typeCastToParameter(e){return e.expression.typeAnnotation=e.typeAnnotation,this.resetEndLocation(e.expression,e.typeAnnotation.loc.end),e.expression}shouldParseArrow(e){return this.match(14)?e.every((e=>this.isAssignable(e,!0))):super.shouldParseArrow(e)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}canHaveLeadingDecorator(){return super.canHaveLeadingDecorator()||this.isAbstractClass()}jsxParseOpeningElementAfterName(e){if(this.match(47)||this.match(51)){const t=this.tsTryParseAndCatch((()=>this.tsParseTypeArgumentsInExpression()));t&&(e.typeParameters=t)}return super.jsxParseOpeningElementAfterName(e)}getGetterSetterExpectedParamCount(e){const t=super.getGetterSetterExpectedParamCount(e),n=this.getObjectOrClassMethodParams(e)[0];return n&&this.isThisParam(n)?t+1:t}parseCatchClauseParam(){const e=super.parseCatchClauseParam(),t=this.tsTryParseTypeAnnotation();return t&&(e.typeAnnotation=t,this.resetEndLocation(e)),e}tsInAmbientContext(e){const t=this.state.isAmbientContext;this.state.isAmbientContext=!0;try{return e()}finally{this.state.isAmbientContext=t}}parseClass(e,...t){const n=this.state.inAbstractClass;this.state.inAbstractClass=!!e.abstract;try{return super.parseClass(e,...t)}finally{this.state.inAbstractClass=n}}tsParseAbstractDeclaration(e){if(this.match(80))return e.abstract=!0,this.parseClass(e,!0,!1);if(this.isContextual(125)){if(!this.hasFollowingLineBreak())return e.abstract=!0,this.raise(Ee.NonClassMethodPropertyHasAbstractModifer,{at:e}),this.tsParseInterfaceDeclaration(e)}else this.unexpected(null,80)}parseMethod(...e){const t=super.parseMethod(...e);if(t.abstract&&(this.hasPlugin("estree")?t.value.body:t.body)){const{key:e}=t;this.raise(Ee.AbstractMethodHasImplementation,{at:t,methodName:"Identifier"!==e.type||t.computed?`[${this.input.slice(e.start,e.end)}]`:e.name})}return t}tsParseTypeParameterName(){return this.parseIdentifier().name}shouldParseAsAmbientContext(){return!!this.getPluginOption("typescript","dts")}parse(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.parse()}getExpression(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.getExpression()}parseExportSpecifier(e,t,n,r){return!t&&r?(this.parseTypeOnlyImportExportSpecifier(e,!1,n),this.finishNode(e,"ExportSpecifier")):(e.exportKind="value",super.parseExportSpecifier(e,t,n,r))}parseImportSpecifier(e,t,n,r){return!t&&r?(this.parseTypeOnlyImportExportSpecifier(e,!0,n),this.finishNode(e,"ImportSpecifier")):(e.importKind="value",super.parseImportSpecifier(e,t,n,r))}parseTypeOnlyImportExportSpecifier(e,t,n){const r=t?"imported":"local",i=t?"local":"exported";let s,o=e[r],a=!1,l=!0;const c=o.loc.start;if(this.isContextual(93)){const e=this.parseIdentifier();if(this.isContextual(93)){const n=this.parseIdentifier();U(this.state.type)?(a=!0,o=e,s=t?this.parseIdentifier():this.parseModuleExportName(),l=!1):(s=n,l=!1)}else U(this.state.type)?(l=!1,s=t?this.parseIdentifier():this.parseModuleExportName()):(a=!0,o=e)}else U(this.state.type)&&(a=!0,t?(o=this.parseIdentifier(!0),this.isContextual(93)||this.checkReservedWord(o.name,o.loc.start,!0,!0)):o=this.parseModuleExportName());a&&n&&this.raise(t?Ee.TypeModifierIsUsedInTypeImports:Ee.TypeModifierIsUsedInTypeExports,{at:c}),e[r]=o,e[i]=s,e[t?"importKind":"exportKind"]=a?"type":"value",l&&this.eatContextual(93)&&(e[i]=t?this.parseIdentifier():this.parseModuleExportName()),e[i]||(e[i]=me(e[r])),t&&this.checkIdentifier(e[i],9)}},v8intrinsic:e=>class extends e{parseV8Intrinsic(){if(this.match(54)){const e=this.state.startLoc,t=this.startNode();if(this.next(),z(this.state.type)){const e=this.parseIdentifierName(this.state.start),n=this.createIdentifier(t,e);if(n.type="V8IntrinsicIdentifier",this.match(10))return n}this.unexpected(e)}}parseExprAtom(){return this.parseV8Intrinsic()||super.parseExprAtom(...arguments)}},placeholders:e=>class extends e{parsePlaceholder(e){if(this.match(140)){const t=this.startNode();return this.next(),this.assertNoSpace(),t.name=super.parseIdentifier(!0),this.assertNoSpace(),this.expect(140),this.finishPlaceholder(t,e)}}finishPlaceholder(e,t){const n=!(!e.expectedNode||"Placeholder"!==e.type);return e.expectedNode=t,n?e:this.finishNode(e,"Placeholder")}getTokenFromCode(e){return 37===e&&37===this.input.charCodeAt(this.state.pos+1)?this.finishOp(140,2):super.getTokenFromCode(...arguments)}parseExprAtom(){return this.parsePlaceholder("Expression")||super.parseExprAtom(...arguments)}parseIdentifier(){return this.parsePlaceholder("Identifier")||super.parseIdentifier(...arguments)}checkReservedWord(e,t,n,r){void 0!==e&&super.checkReservedWord(e,t,n,r)}parseBindingAtom(){return this.parsePlaceholder("Pattern")||super.parseBindingAtom()}isValidLVal(e,...t){return"Placeholder"===e||super.isValidLVal(e,...t)}toAssignable(e,t){e&&"Placeholder"===e.type&&"Expression"===e.expectedNode?e.expectedNode="Pattern":super.toAssignable(e,t)}isLet(e){return!!super.isLet(e)||!!this.isContextual(99)&&(!e&&140===this.lookahead().type)}verifyBreakContinue(e,t){e.label&&"Placeholder"===e.label.type||super.verifyBreakContinue(e,t)}parseExpressionStatement(e,t){if("Placeholder"!==t.type||t.extra&&t.extra.parenthesized)return super.parseExpressionStatement(e,t);if(this.match(14)){const n=e;return n.label=this.finishPlaceholder(t,"Identifier"),this.next(),n.body=super.parseStatement("label"),this.finishNode(n,"LabeledStatement")}return this.semicolon(),e.name=t.name,this.finishPlaceholder(e,"Statement")}parseBlock(){return this.parsePlaceholder("BlockStatement")||super.parseBlock(...arguments)}parseFunctionId(){return this.parsePlaceholder("Identifier")||super.parseFunctionId(...arguments)}parseClass(e,t,n){const r=t?"ClassDeclaration":"ClassExpression";this.next(),this.takeDecorators(e);const i=this.state.strict,s=this.parsePlaceholder("Identifier");if(s){if(!(this.match(81)||this.match(140)||this.match(5))){if(n||!t)return e.id=null,e.body=this.finishPlaceholder(s,"ClassBody"),this.finishNode(e,r);throw this.raise(Re.ClassNameIsRequired,{at:this.state.startLoc})}e.id=s}else this.parseClassId(e,t,n);return super.parseClassSuper(e),e.body=this.parsePlaceholder("ClassBody")||super.parseClassBody(!!e.superClass,i),this.finishNode(e,r)}parseExport(e){const t=this.parsePlaceholder("Identifier");if(!t)return super.parseExport(...arguments);if(!this.isContextual(97)&&!this.match(12))return e.specifiers=[],e.source=null,e.declaration=this.finishPlaceholder(t,"Declaration"),this.finishNode(e,"ExportNamedDeclaration");this.expectPlugin("exportDefaultFrom");const n=this.startNode();return n.exported=t,e.specifiers=[this.finishNode(n,"ExportDefaultSpecifier")],super.parseExport(e)}isExportDefaultSpecifier(){if(this.match(65)){const e=this.nextTokenStart();if(this.isUnparsedContextual(e,"from")&&this.input.startsWith(Q(140),this.nextTokenStartSince(e+4)))return!0}return super.isExportDefaultSpecifier()}maybeParseExportDefaultSpecifier(e){return!!(e.specifiers&&e.specifiers.length>0)||super.maybeParseExportDefaultSpecifier(e)}checkExport(e){const{specifiers:t}=e;null!=t&&t.length&&(e.specifiers=t.filter((e=>"Placeholder"===e.exported.type))),super.checkExport(e),e.specifiers=t}parseImport(e){const t=this.parsePlaceholder("Identifier");if(!t)return super.parseImport(...arguments);if(e.specifiers=[],!this.isContextual(97)&&!this.match(12))return e.source=this.finishPlaceholder(t,"StringLiteral"),this.semicolon(),this.finishNode(e,"ImportDeclaration");const n=this.startNodeAtNode(t);return n.local=t,e.specifiers.push(this.finishNode(n,"ImportDefaultSpecifier")),this.eat(12)&&(this.maybeParseStarImportSpecifier(e)||this.parseNamedImportSpecifiers(e)),this.expectContextual(97),e.source=this.parseImportSource(),this.semicolon(),this.finishNode(e,"ImportDeclaration")}parseImportSource(){return this.parsePlaceholder("StringLiteral")||super.parseImportSource(...arguments)}assertNoSpace(){this.state.start>this.state.lastTokEndLoc.index&&this.raise(Re.UnexpectedSpace,{at:this.state.lastTokEndLoc})}}};Object.keys(Le);!function(e){const t={};for(const n of Object.keys(e))t[n]=G(e[n])}(V)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(784),t=n(29);n(874);const r=(e=0)=>t=>`[${t+e}m`,i=(e=0)=>t=>`[${38+e};5;${t}m`,s=(e=0)=>(t,n,r)=>`[${38+e};2;${t};${n};${r}m`,o=function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[n,r]of Object.entries(t)){for(const[n,i]of Object.entries(r))t[n]={open:`[${i[0]}m`,close:`[${i[1]}m`},r[n]=t[n],e.set(i[0],i[1]);Object.defineProperty(t,n,{value:r,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="[39m",t.bgColor.close="[49m",t.color.ansi=r(),t.color.ansi256=i(),t.color.ansi16m=s(),t.bgColor.ansi=r(10),t.bgColor.ansi256=i(10),t.bgColor.ansi16m=s(10),Object.defineProperties(t,{rgbToAnsi256:{value:(e,t,n)=>e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:e=>{const t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:n}=t.groups;3===n.length&&(n=[...n].map((e=>e+e)).join(""));const r=Number.parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value:e=>{if(e<8)return 30+e;if(e<16)return e-8+90;let t,n,r;if(e>=232)t=(10*(e-232)+8)/255,n=t,r=t;else{const i=(e-=16)%36;t=Math.floor(e/36)/5,n=Math.floor(i/6)/5,r=i%6/5}const i=2*Math.max(t,n,r);if(0===i)return 30;let s=30+(Math.round(r)<<2|Math.round(n)<<1|Math.round(t));return 2===i&&(s+=60),s},enumerable:!1},rgbToAnsi:{value:(e,n,r)=>t.ansi256ToAnsi(t.rgbToAnsi256(e,n,r)),enumerable:!1},hexToAnsi:{value:e=>t.ansi256ToAnsi(t.hexToAnsi256(e)),enumerable:!1}}),t}(),a=o,l=!!/\b(Chrome|Chromium)\//.test(navigator.userAgent)&&{level:1,hasBasic:!0,has256:!1,has16m:!1},c={stdout:l,stderr:l};function u(e,t,n){let r=e.indexOf(t);if(-1===r)return e;const i=t.length;let s=0,o="";do{o+=e.substr(s,r-s)+t+n,s=r+i,r=e.indexOf(t,s)}while(-1!==r);return o+=e.slice(s),o}const{stdout:h,stderr:d}=c,p=Symbol("GENERATOR"),f=Symbol("STYLER"),m=Symbol("IS_EMPTY"),g=["ansi","ansi","ansi256","ansi16m"],y=Object.create(null);function b(e){return(e=>{const t=(...e)=>e.join(" ");return((e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const n=h?h.level:0;e.level=void 0===t.level?n:t.level})(t,e),Object.setPrototypeOf(t,b.prototype),t})(e)}Object.setPrototypeOf(b.prototype,Function.prototype);for(const[e,t]of Object.entries(a))y[e]={get(){const n=k(this,S(t.open,t.close,this[f]),this[m]);return Object.defineProperty(this,e,{value:n}),n}};y.visible={get(){const e=k(this,this[f],!0);return Object.defineProperty(this,"visible",{value:e}),e}};const v=(e,t,n,...r)=>"rgb"===e?"ansi16m"===t?a[n].ansi16m(...r):"ansi256"===t?a[n].ansi256(a.rgbToAnsi256(...r)):a[n].ansi(a.rgbToAnsi(...r)):"hex"===e?v("rgb",t,n,...a.hexToRgb(...r)):a[n][e](...r),x=["rgb","hex","ansi256"];for(const e of x)y[e]={get(){const{level:t}=this;return function(...n){const r=S(v(e,g[t],"color",...n),a.color.close,this[f]);return k(this,r,this[m])}}},y["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const{level:t}=this;return function(...n){const r=S(v(e,g[t],"bgColor",...n),a.bgColor.close,this[f]);return k(this,r,this[m])}}};const w=Object.defineProperties((()=>{}),{...y,level:{enumerable:!0,get(){return this[p].level},set(e){this[p].level=e}}}),S=(e,t,n)=>{let r,i;return void 0===n?(r=e,i=t):(r=n.openAll+e,i=t+n.closeAll),{open:e,close:t,openAll:r,closeAll:i,parent:n}},k=(e,t,n)=>{const r=(...e)=>P(r,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(r,w),r[p]=e,r[f]=t,r[m]=n,r},P=(e,t)=>{if(e.level<=0||!t)return e[m]?"":t;let n=e[f];if(void 0===n)return t;const{openAll:r,closeAll:i}=n;if(t.includes(""))for(;void 0!==n;)t=u(t,n.close,n.open),n=n.parent;const s=t.indexOf("\n");return-1!==s&&(t=function(e,t,n,r){let i=0,s="";do{const o="\r"===e[r-1];s+=e.substr(i,(o?r-1:r)-i)+t+(o?"\r\n":"\n")+n,i=r+1,r=e.indexOf("\n",i)}while(-1!==r);return s+=e.slice(i),s}(t,i,r,s)),r+t+i};Object.defineProperties(b.prototype,y);const T=b(),O=(b({level:d?d.level:0}),T);n(786),n(806);var C=(e,...t)=>console.log(e,...t),A=()=>`[${(new Date).toLocaleString()}]`,E=(e,...t)=>{C(O.green(A(),"LOG:",e),...t)},N=(e,...t)=>{C(O.gray(A(),"DEBUG:",e),...t)},M={"action.devices.traits.CameraStream":{type:"action.devices.traits.CameraStream",humanName:"CameraStream",states:{},attributes:{},commands:[]},"action.devices.traits.TemperatureSetting":{type:"action.devices.traits.TemperatureSetting",humanName:"TemperatureSetting",states:{activeThermostatMode:{type:"string",supportedValues:["off","heat","cool","on","heatcool","auto","fan-only","purifier","eco","dry"],hint:"Currently active mode of the device, from the list of availableThermostatModes. If no mode is currently active, set to none."},targetTempReachedEstimateUnixTimestampSec:{type:"integer",hint:"A timestamp representing the estimated time when the target temperature will be reached."},thermostatHumidityAmbient:{type:"number",hint:"Represents the relative level of the ambient humidity, if supported by the device."},thermostatMode:{type:"string",required:!0,supportedValues:["off","heat","cool","on","heatcool","auto","fan-only","purifier","eco","dry"],hint:"Current mode of the device, from the list of availableThermostatModes."},thermostatTemperatureAmbient:{type:"number",required:!0,hint:"Current observed temperature, in degrees Celsius."},thermostatTemperatureSetpoint:{type:"number",required:!0,hint:"Current temperature set point (single target), in degrees Celsius."}},attributes:{availableThermostatModes:{type:"array",required:!0,supportedValues:["off","heat","cool","on","heatcool","auto","fan-only","purifier","eco","dry"],hint:"Describes the thermostat modes this device can support."},thermostatTemperatureRange:{type:"object",hint:"Contains two float values that indicate the supported temperature range for this device (in degrees Celsius)."},minThresholdCelsius:{type:"number",required:!0,hint:"Minimum threshold of the temperature range."},maxThresholdCelsius:{type:"number",required:!0,hint:"Maximum threshold of the temperature range."},thermostatTemperatureUnit:{type:"string",required:!0,supportedValues:["C","F"],hint:"The display unit the device is set to by default. Google reports temperature information using the display unit."}},commands:[{command:"action.devices.commands.ThermostatTemperatureSetpoint",params:{thermostatTemperatureSetpoint:{type:"number",hint:"Target temperature setpoint. Supports up to one decimal place.",required:!0}}},{command:"action.devices.commands.ThermostatTemperatureSetRange",params:{thermostatTemperatureSetpointHigh:{type:"number",hint:"High target setpoint for the range. Requires heatcool mode support.",required:!0},thermostatTemperatureSetpointLow:{type:"number",hint:"Low target setpoint for the range. Requires heatcool mode support.",required:!0}}},{command:"action.devices.commands.ThermostatSetMode",params:{thermostatMode:{type:"string",hint:"Target mode, from the list of availableThermostatModes.",required:!0,supportedValues:["off","heat","cool","on","heatcool","auto","fan-only","purifier","eco","dry"]}}},{command:"action.devices.commands.TemperatureRelative",params:{thermostatTemperatureRelativeDegree:{type:"number",hint:'The exact number of degrees for the temperature to change (for example, "Turn down 5 degrees").',required:!0},thermostatTemperatureRelativeWeight:{type:"integer",hint:'This indicates the amount of ambiguous temperature change from a small amount ("Turn down a little"), to a large amount ("A lot warmer").',required:!0}}}]},"action.devices.traits.OnOff":{type:"action.devices.traits.OnOff",humanName:"OnOff",states:{on:{type:"boolean",required:!0,hint:"Whether a device with an on/off switch is on or off."}},attributes:{commandOnlyOnOff:{type:"boolean",hint:"Indicates if the device can only controlled through commands, and cannot be queried for state information."},queryOnlyOnOff:{type:"boolean",hint:"Indicates if the device can only be queried for state information, and cannot be controlled through commands."}},commands:[{command:"action.devices.commands.OnOff",params:{on:{type:"boolean",required:!0,hint:"Whether to turn the device on or off."}}}]},"action.devices.traits.Volume":{type:"action.devices.traits.Volume",humanName:"Volume",states:{},attributes:{},commands:[]},"action.devices.traits.FanSpeed":{type:"action.devices.traits.FanSpeed",humanName:"FanSpeed",states:{},attributes:{},commands:[]},"action.devices.traits.HumiditySetting":{type:"action.devices.traits.HumiditySetting",humanName:"HumiditySetting",states:{},attributes:{},commands:[]},"action.devices.traits.StartStop":{type:"action.devices.traits.StartStop",humanName:"StartStop",states:{humiditySetpointPercent:{type:"integer",hint:"Indicates the current target humidity percentage of the device. Must fall within humiditySetpointRange."},humidityAmbientPercent:{type:"integer",hint:"Indicates the current ambient humidity reading of the device as a percentage."}},attributes:{},commands:[]}},I=[{type:"action.devices.types.CAMERA",humanName:"Camera",attributes:{cameraStreamSupportedProtocols:"array",cameraStreamNeedAuthToken:"boolean",cameraStreamNeedDrmEncryption:"boolean"},traits:["action.devices.traits.CameraStream"]},{type:"action.devices.types.THERMOSTAT",humanName:"Thermostat",traits:["action.devices.traits.TemperatureSetting"]},{type:"action.devices.types.SWITCH",humanName:"Switch",traits:["action.devices.traits.OnOff"]},{type:"action.devices.types.SPEAKER",humanName:"Speaker",traits:["action.devices.traits.Volume"]},{type:"action.devices.types.LIGHT",humanName:"Light",traits:["action.devices.traits.OnOff"]},{type:"action.devices.types.FAN",humanName:"Fan",traits:["action.devices.traits.OnOff"]},{type:"action.devices.types.MICROWAVE",humanName:"Microwave",traits:["action.devices.traits.OnOff"]},{type:"action.devices.types.COFFEE_MAKER",humanName:"Coffee Maker",traits:["action.devices.traits.OnOff"]},{type:"action.devices.types.AC_UNIT",humanName:"AC Unit",traits:[]},{type:"action.devices.types.DEHUMIDIFIER",humanName:"Dehumidifier",traits:["action.devices.traits.OnOff","action.devices.traits.FanSpeed","action.devices.traits.HumiditySetting","action.devices.traits.StartStop"]}],D=n(391),R=e=>"checkbox"===e.type,L=e=>e instanceof Date,_=e=>null==e;const B=e=>"object"==typeof e;var F=e=>!_(e)&&!Array.isArray(e)&&B(e)&&!L(e),j=e=>F(e)&&e.target?R(e.target)?e.target.checked:e.target.value:e,V=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),z=e=>Array.isArray(e)?e.filter(Boolean):[],U=e=>void 0===e,H=(e,t,n)=>{if(!t||!F(e))return n;const r=z(t.split(/[,[\].]+?/)).reduce(((e,t)=>_(e)?e:e[t]),e);return U(r)||r===e?U(e[t])?n:e[t]:r};const W="blur",$="onChange",q="onSubmit",Q="all",K="pattern",J="required",G=e.createContext(null),X=()=>e.useContext(G);var Y=(e,t,n,r=!0)=>{const i={};for(const s in e)Object.defineProperty(i,s,{get:()=>{const i=s;return t[i]!==Q&&(t[i]=!r||Q),n&&(n[i]=!0),e[i]}});return i},Z=e=>F(e)&&!Object.keys(e).length,ee=(e,t,n)=>{const{name:r,...i}=e;return Z(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find((e=>t[e]===(!n||Q)))},te=e=>Array.isArray(e)?e:[e],ne=(e,t,n)=>n&&t?e===t:!e||!t||e===t||te(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function re(t){const n=e.useRef(t);n.current=t,e.useEffect((()=>{const e=!t.disabled&&n.current.subject.subscribe({next:n.current.callback});return()=>(e=>{e&&e.unsubscribe()})(e)}),[t.disabled])}var ie=e=>"string"==typeof e,se=(e,t,n,r)=>{const i=Array.isArray(e);return ie(e)?(r&&t.watch.add(e),H(n,e)):i?e.map((e=>(r&&t.watch.add(e),H(n,e)))):(r&&(t.watchAll=!0),n)},oe=e=>"function"==typeof e,ae=e=>{for(const t in e)if(oe(e[t]))return!0;return!1};const le=t=>t.render(function(t){const n=X(),{name:r,control:i=n.control,shouldUnregister:s}=t,o=V(i._names.array,r),a=function(t){const n=X(),{control:r=n.control,name:i,defaultValue:s,disabled:o,exact:a}=t||{},l=e.useRef(i);l.current=i;const c=e.useCallback((e=>{if(ne(l.current,e.name,a)){const t=se(l.current,r._names,e.values||r._formValues);h(U(l.current)||F(t)&&!ae(t)?{...t}:Array.isArray(t)?[...t]:U(t)?s:t)}}),[r,a,s]);re({disabled:o,subject:r._subjects.watch,callback:c});const[u,h]=e.useState(U(s)?r._getWatch(i):s);return e.useEffect((()=>{r._removeUnmounted()})),u}({control:i,name:r,defaultValue:H(i._formValues,r,H(i._defaultValues,r,t.defaultValue)),exact:!0}),l=function(t){const n=X(),{control:r=n.control,disabled:i,name:s,exact:o}=t||{},[a,l]=e.useState(r._formState),c=e.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=e.useRef(s),h=e.useRef(!0);return u.current=s,re({disabled:i,callback:e.useCallback((e=>h.current&&ne(u.current,e.name,o)&&ee(e,c.current)&&l({...r._formState,...e})),[r,o]),subject:r._subjects.state}),e.useEffect((()=>(h.current=!0,()=>{h.current=!1})),[]),Y(a,r._proxyFormState,c.current,!1)}({control:i,name:r}),c=e.useRef(i.register(r,{...t.rules,value:a}));return e.useEffect((()=>{const e=(e,t)=>{const n=H(i._fields,e);n&&(n._f.mount=t)};return e(r,!0),()=>{const t=i._options.shouldUnregister||s;(o?t&&!i._stateFlags.action:t)?i.unregister(r):e(r,!1)}}),[r,i,o,s]),{field:{name:r,value:a,onChange:e.useCallback((e=>{c.current.onChange({target:{value:j(e),name:r},type:"change"})}),[r]),onBlur:e.useCallback((()=>{c.current.onBlur({target:{value:H(i._formValues,r),name:r},type:W})}),[r,i]),ref:e.useCallback((e=>{const t=H(i._fields,r);e&&t&&e.focus&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}),[r,i._fields])},formState:l,fieldState:Object.defineProperties({},{invalid:{get:()=>!!H(l.errors,r)},isDirty:{get:()=>!!H(l.dirtyFields,r)},isTouched:{get:()=>!!H(l.touchedFields,r)},error:{get:()=>H(l.errors,r)}})}}(t));var ce=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},ue=e=>/^\w*$/.test(e),he=e=>z(e.replace(/["|']|\]/g,"").split(/\.|\[/));function de(e,t,n){let r=-1;const i=ue(t)?[t]:he(t),s=i.length,o=s-1;for(;++r<s;){const t=i[r];let s=n;if(r!==o){const n=e[t];s=F(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}e[t]=s,e=e[t]}return e}const pe=(e,t,n)=>{for(const r of n||Object.keys(e)){const n=H(e,r);if(n){const{_f:e,...r}=n;if(e&&t(e.name)){if(e.ref.focus&&U(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else F(r)&&pe(r,t)}}};var fe=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),me=(e,t,n)=>{const r=z(H(e,n));return de(r,"root",t[n]),de(e,n,r),e},ge=e=>"boolean"==typeof e,ye=e=>"file"===e.type,be=t=>ie(t)||e.isValidElement(t),ve=e=>"radio"===e.type,xe=e=>e instanceof RegExp;const we={value:!1,isValid:!1},Se={value:!0,isValid:!0};var ke=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!U(e[0].attributes.value)?U(e[0].value)||""===e[0].value?Se:{value:e[0].value,isValid:!0}:Se:we}return we};const Pe={isValid:!1,value:null};var Te=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),Pe):Pe;function Oe(e,t,n="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||ge(e)&&!e)return{type:n,message:be(e)?e:"",ref:t}}var Ce=e=>F(e)&&!xe(e)?e:{value:e,message:""},Ae=async(e,t,n,r,i)=>{const{ref:s,refs:o,required:a,maxLength:l,minLength:c,min:u,max:h,pattern:d,validate:p,name:f,valueAsNumber:m,mount:g,disabled:y}=e._f;if(!g||y)return{};const b=o?o[0]:s,v=e=>{r&&b.reportValidity&&(b.setCustomValidity(ge(e)?"":e||" "),b.reportValidity())},x={},w=ve(s),S=R(s),k=w||S,P=(m||ye(s))&&!s.value||""===t||Array.isArray(t)&&!t.length,T=ce.bind(null,f,n,x),O=(e,t,n,r="maxLength",i="minLength")=>{const o=e?t:n;x[f]={type:e?r:i,message:o,ref:s,...T(e?r:i,o)}};if(i?!Array.isArray(t)||!t.length:a&&(!k&&(P||_(t))||ge(t)&&!t||S&&!ke(o).isValid||w&&!Te(o).isValid)){const{value:e,message:t}=be(a)?{value:!!a,message:a}:Ce(a);if(e&&(x[f]={type:J,message:t,ref:b,...T(J,t)},!n))return v(t),x}if(!(P||_(u)&&_(h))){let e,r;const i=Ce(h),o=Ce(u);if(_(t)||isNaN(t)){const n=s.valueAsDate||new Date(t);ie(i.value)&&(e=n>new Date(i.value)),ie(o.value)&&(r=n<new Date(o.value))}else{const n=s.valueAsNumber||+t;_(i.value)||(e=n>i.value),_(o.value)||(r=n<o.value)}if((e||r)&&(O(!!e,i.message,o.message,"max","min"),!n))return v(x[f].message),x}if((l||c)&&!P&&(ie(t)||i&&Array.isArray(t))){const e=Ce(l),r=Ce(c),i=!_(e.value)&&t.length>e.value,s=!_(r.value)&&t.length<r.value;if((i||s)&&(O(i,e.message,r.message),!n))return v(x[f].message),x}if(d&&!P&&ie(t)){const{value:e,message:r}=Ce(d);if(xe(e)&&!t.match(e)&&(x[f]={type:K,message:r,ref:s,...T(K,r)},!n))return v(r),x}if(p)if(oe(p)){const e=Oe(await p(t),b);if(e&&(x[f]={...e,...T("validate",e.message)},!n))return v(e.message),x}else if(F(p)){let e={};for(const r in p){if(!Z(e)&&!n)break;const i=Oe(await p[r](t),b,r);i&&(e={...i,...T(r,i.message)},v(i.message),n&&(x[f]=e))}if(!Z(e)&&(x[f]={ref:b,...e},!n))return x}return v(!0),x},Ee="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function Ne(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(Ee&&(e instanceof Blob||e instanceof FileList)||!n&&!F(e))return e;t=n?[]:{};for(const n in e){if(oe(e[n])){t=e;break}t[n]=Ne(e[n])}}return t}var Me=e=>({isOnSubmit:!e||e===q,isOnBlur:"onBlur"===e,isOnChange:e===$,isOnAll:e===Q,isOnTouch:"onTouched"===e});function Ie(e){for(const t in e)if(!U(e[t]))return!1;return!0}function De(e,t){const n=ue(t)?[t]:he(t),r=1==n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=U(e)?r++:e[t[r++]];return e}(e,n),i=n[n.length-1];let s;r&&delete r[i];for(let t=0;t<n.slice(0,-1).length;t++){let r,i=-1;const o=n.slice(0,-(t+1)),a=o.length-1;for(t>0&&(s=e);++i<o.length;){const t=o[i];r=r?r[t]:e[t],a===i&&(F(r)&&Z(r)||Array.isArray(r)&&Ie(r))&&(s?delete s[t]:delete e[t]),s=r}}return e}function Re(){let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var Le=e=>_(e)||!B(e);function _e(e,t){if(Le(e)||Le(t))return e===t;if(L(e)&&L(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const n=e[i];if(!r.includes(i))return!1;if("ref"!==i){const e=t[i];if(L(n)&&L(e)||F(n)&&F(e)||Array.isArray(n)&&Array.isArray(e)?!_e(n,e):n!==e)return!1}}return!0}var Be=e=>{const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Fe=e=>"select-multiple"===e.type,je=e=>Be(e)&&e.isConnected;function Ve(e,t={}){const n=Array.isArray(e);if(F(e)||n)for(const n in e)Array.isArray(e[n])||F(e[n])&&!ae(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Ve(e[n],t[n])):_(e[n])||(t[n]=!0);return t}function ze(e,t,n){const r=Array.isArray(e);if(F(e)||r)for(const r in e)Array.isArray(e[r])||F(e[r])&&!ae(e[r])?U(t)||Le(n[r])?n[r]=Array.isArray(e[r])?Ve(e[r],[]):{...Ve(e[r])}:ze(e[r],_(t)?{}:t[r],n[r]):n[r]=!_e(e[r],t[r]);return n}var Ue=(e,t)=>ze(e,t,Ve(t)),He=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>U(e)?e:t?""===e||_(e)?NaN:+e:n&&ie(e)?new Date(e):r?r(e):e;function We(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return ye(t)?t.files:ve(t)?Te(e.refs).value:Fe(t)?[...t.selectedOptions].map((({value:e})=>e)):R(t)?ke(e.refs).value:He(U(t.value)?e.ref.value:t.value,e)}var $e=e=>U(e)?void 0:xe(e)?e.source:F(e)?xe(e.value)?e.value.source:e.value:e;function qe(e,t,n){const r=H(e,n);if(r||ue(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),s=H(t,r),o=H(e,r);if(s&&!Array.isArray(s)&&n!==r)return{name:n};if(o&&o.type)return{name:r,error:o};i.pop()}return{name:n}}const Qe={mode:q,reValidateMode:$,shouldFocusError:!0};function Ke(e={}){let t,n={...Qe,...e},r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},i={},s=Ne(n.defaultValues)||{},o=n.shouldUnregister?{}:Ne(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c=0,u={};const h={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={watch:Re(),array:Re(),state:Re()},p=Me(n.mode),f=Me(n.reValidateMode),m=n.criteriaMode===Q,g=async e=>{let t=!1;return h.isValid&&(t=n.resolver?Z((await v()).errors):await x(i,!0),e||t===r.isValid||(r.isValid=t,d.state.next({isValid:t}))),t},y=(e,t,n,r)=>{const l=H(i,e);if(l){const i=H(o,e,U(n)?H(s,e):n);U(i)||r&&r.defaultChecked||t?de(o,e,t?i:We(l._f)):k(e,i),a.mount&&g()}},b=(e,t,n,i,o)=>{let a=!1;const l={name:e},c=H(r.touchedFields,e);if(h.isDirty){const e=r.isDirty;r.isDirty=l.isDirty=w(),a=e!==l.isDirty}if(h.dirtyFields&&(!n||i)){const n=H(r.dirtyFields,e);_e(H(s,e),t)?De(r.dirtyFields,e):de(r.dirtyFields,e,!0),l.dirtyFields=r.dirtyFields,a=a||n!==H(r.dirtyFields,e)}return n&&!c&&(de(r.touchedFields,e,n),l.touchedFields=r.touchedFields,a=a||h.touchedFields&&c!==n),a&&o&&d.state.next(l),a?l:{}},v=async e=>n.resolver?await n.resolver({...o},n.context,((e,t,n,r)=>{const i={};for(const n of e){const e=H(t,n);e&&de(i,n,e._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}})(e||l.mount,i,n.criteriaMode,n.shouldUseNativeValidation)):{},x=async(e,t,i={valid:!0})=>{for(const s in e){const a=e[s];if(a){const{_f:e,...s}=a;if(e){const s=l.array.has(e.name),c=await Ae(a,H(o,e.name),m,n.shouldUseNativeValidation,s);if(c[e.name]&&(i.valid=!1,t))break;!t&&(H(c,e.name)?s?me(r.errors,c,e.name):de(r.errors,e.name,c[e.name]):De(r.errors,e.name))}s&&await x(s,t,i)}}return i.valid},w=(e,t)=>(e&&t&&de(o,e,t),!_e(A(),s)),S=(e,t,n)=>{const r={...a.mount?o:U(t)?s:ie(e)?{[e]:t}:t};return se(e,l,r,n)},k=(e,t,n={})=>{const r=H(i,e);let s=t;if(r){const n=r._f;n&&(!n.disabled&&de(o,e,He(t,n)),s=Ee&&Be(n.ref)&&_(t)?"":t,Fe(n.ref)?[...n.ref.options].forEach((e=>e.selected=s.includes(e.value))):n.refs?R(n.ref)?n.refs.length>1?n.refs.forEach((e=>!e.disabled&&(e.checked=Array.isArray(s)?!!s.find((t=>t===e.value)):s===e.value))):n.refs[0]&&(n.refs[0].checked=!!s):n.refs.forEach((e=>e.checked=e.value===s)):ye(n.ref)?n.ref.value="":(n.ref.value=s,n.ref.type||d.watch.next({name:e})))}(n.shouldDirty||n.shouldTouch)&&b(e,s,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&C(e)},P=(e,t,n)=>{for(const r in t){const s=t[r],o=`${e}.${r}`,a=H(i,o);!l.array.has(e)&&Le(s)&&(!a||a._f)||L(s)?k(o,s,n):P(o,s,n)}},T=(e,t,n={})=>{const a=H(i,e),c=l.array.has(e),u=Ne(t);de(o,e,u),c?(d.array.next({name:e,values:o}),(h.isDirty||h.dirtyFields)&&n.shouldDirty&&(r.dirtyFields=Ue(s,o),d.state.next({name:e,dirtyFields:r.dirtyFields,isDirty:w(e,u)}))):!a||a._f||_(u)?k(e,u,n):P(e,u,n),fe(e,l)&&d.state.next({}),d.watch.next({name:e})},O=async s=>{const a=s.target;let y=a.name;const x=H(i,y);if(x){let S,k;const P=a.type?We(x._f):j(s),T=s.type===W||"focusout"===s.type,O=!((w=x._f).mount&&(w.required||w.min||w.max||w.maxLength||w.minLength||w.pattern||w.validate)||n.resolver||H(r.errors,y)||x._f.deps)||((e,t,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e))(T,H(r.touchedFields,y),r.isSubmitted,f,p),A=fe(y,l,T);de(o,y,P),T?(x._f.onBlur&&x._f.onBlur(s),t&&t(0)):x._f.onChange&&x._f.onChange(s);const E=b(y,P,T,!1),N=!Z(E)||A;if(!T&&d.watch.next({name:y,type:s.type}),O)return N&&d.state.next({name:y,...A?{}:E});if(!T&&A&&d.state.next({}),u[y]=(u[y],1),d.state.next({isValidating:!0}),n.resolver){const{errors:e}=await v([y]),t=qe(r.errors,i,y),n=qe(e,i,t.name||y);S=n.error,y=n.name,k=Z(e)}else S=(await Ae(x,H(o,y),m,n.shouldUseNativeValidation))[y],k=await g(!0);x._f.deps&&C(x._f.deps),(async(n,i,s,o)=>{const a=H(r.errors,n),l=h.isValid&&r.isValid!==i;var p;if(e.delayError&&s?(p=()=>((e,t)=>{de(r.errors,e,t),d.state.next({errors:r.errors})})(n,s),t=e=>{clearTimeout(c),c=window.setTimeout(p,e)},t(e.delayError)):(clearTimeout(c),t=null,s?de(r.errors,n,s):De(r.errors,n)),(s?!_e(a,s):a)||!Z(o)||l){const e={...o,...l?{isValid:i}:{},errors:r.errors,name:n};r={...r,...e},d.state.next(e)}u[n]--,h.isValidating&&!Object.values(u).some((e=>e))&&(d.state.next({isValidating:!1}),u={})})(y,k,S,E)}var w},C=async(e,t={})=>{let s,o;const a=te(e);if(d.state.next({isValidating:!0}),n.resolver){const t=await(async e=>{const{errors:t}=await v();if(e)for(const n of e){const e=H(t,n);e?de(r.errors,n,e):De(r.errors,n)}else r.errors=t;return t})(U(e)?e:a);s=Z(t),o=e?!a.some((e=>H(t,e))):s}else e?(o=(await Promise.all(a.map((async e=>{const t=H(i,e);return await x(t&&t._f?{[e]:t}:t)})))).every(Boolean),(o||r.isValid)&&g()):o=s=await x(i);return d.state.next({...!ie(e)||h.isValid&&s!==r.isValid?{}:{name:e},...n.resolver?{isValid:s}:{},errors:r.errors,isValidating:!1}),t.shouldFocus&&!o&&pe(i,(e=>H(r.errors,e)),e?a:l.mount),o},A=e=>{const t={...s,...a.mount?o:{}};return U(e)?t:ie(e)?H(t,e):e.map((e=>H(t,e)))},E=(e,t)=>({invalid:!!H((t||r).errors,e),isDirty:!!H((t||r).dirtyFields,e),isTouched:!!H((t||r).touchedFields,e),error:H((t||r).errors,e)}),N=(e,t={})=>{for(const a of e?te(e):l.mount)l.mount.delete(a),l.array.delete(a),H(i,a)&&(t.keepValue||(De(i,a),De(o,a)),!t.keepError&&De(r.errors,a),!t.keepDirty&&De(r.dirtyFields,a),!t.keepTouched&&De(r.touchedFields,a),!n.shouldUnregister&&!t.keepDefaultValue&&De(s,a));d.watch.next({}),d.state.next({...r,...t.keepDirty?{isDirty:w()}:{}}),!t.keepIsValid&&g()},M=(e,t={})=>{let r=H(i,e);const c=ge(t.disabled);return de(i,e,{_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),r?c&&de(o,e,t.disabled?void 0:H(o,e,We(r._f))):y(e,!0,t.value),{...c?{disabled:t.disabled}:{},...n.shouldUseNativeValidation?{required:!!t.required,min:$e(t.min),max:$e(t.max),minLength:$e(t.minLength),maxLength:$e(t.maxLength),pattern:$e(t.pattern)}:{},name:e,onChange:O,onBlur:O,ref:o=>{if(o){M(e,t),r=H(i,e);const n=U(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,a=(e=>ve(e)||R(e))(n),l=r._f.refs||[];if(a?l.find((e=>e===n)):n===r._f.ref)return;de(i,e,{_f:{...r._f,...a?{refs:[...l.filter(je),n,...Array.isArray(H(s,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),y(e,!1,void 0,n)}else r=H(i,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!V(l.array,e)||!a.action)&&l.unMount.add(e)}}};return{control:{register:M,unregister:N,getFieldState:E,_executeSchema:v,_getWatch:S,_getDirty:w,_updateValid:g,_removeUnmounted:()=>{for(const e of l.unMount){const t=H(i,e);t&&(t._f.refs?t._f.refs.every((e=>!je(e))):!je(t._f.ref))&&N(e)}l.unMount=new Set},_updateFieldArray:(e,t=[],n,l,c=!0,u=!0)=>{if(l&&n){if(a.action=!0,u&&Array.isArray(H(i,e))){const t=n(H(i,e),l.argA,l.argB);c&&de(i,e,t)}if(h.errors&&u&&Array.isArray(H(r.errors,e))){const t=n(H(r.errors,e),l.argA,l.argB);c&&de(r.errors,e,t),((e,t)=>{!z(H(e,t)).length&&De(e,t)})(r.errors,e)}if(h.touchedFields&&u&&Array.isArray(H(r.touchedFields,e))){const t=n(H(r.touchedFields,e),l.argA,l.argB);c&&de(r.touchedFields,e,t)}h.dirtyFields&&(r.dirtyFields=Ue(s,o)),d.state.next({isDirty:w(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else de(o,e,t)},_getFieldArray:t=>z(H(a.mount?o:s,t,e.shouldUnregister?H(s,t,[]):[])),_subjects:d,_proxyFormState:h,get _fields(){return i},get _formValues(){return o},get _stateFlags(){return a},set _stateFlags(e){a=e},get _defaultValues(){return s},get _names(){return l},set _names(e){l=e},get _formState(){return r},set _formState(e){r=e},get _options(){return n},set _options(e){n={...n,...e}}},trigger:C,register:M,handleSubmit:(e,t)=>async s=>{s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let a=!0,c=Ne(o);d.state.next({isSubmitting:!0});try{if(n.resolver){const{errors:e,values:t}=await v();r.errors=e,c=t}else await x(i);Z(r.errors)?(d.state.next({errors:{},isSubmitting:!0}),await e(c,s)):(t&&await t({...r.errors},s),n.shouldFocusError&&pe(i,(e=>H(r.errors,e)),l.mount))}catch(e){throw a=!1,e}finally{r.isSubmitted=!0,d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Z(r.errors)&&a,submitCount:r.submitCount+1,errors:r.errors})}},watch:(e,t)=>oe(e)?d.watch.subscribe({next:n=>e(S(void 0,t),n)}):S(e,t,!0),setValue:T,getValues:A,reset:(t,n={})=>{const c=t||s,u=Ne(c),p=t&&!Z(t)?u:s;if(n.keepDefaultValues||(s=c),!n.keepValues){if(n.keepDirtyValues)for(const e of l.mount)H(r.dirtyFields,e)?de(p,e,H(o,e)):T(e,H(p,e));else{if(Ee&&U(t))for(const e of l.mount){const t=H(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;try{if(Be(e)){e.closest("form").reset();break}}catch(e){}}}i={}}o=e.shouldUnregister?n.keepDefaultValues?Ne(s):{}:u,d.array.next({values:p}),d.watch.next({values:p})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!h.isValid||!!n.keepIsValid,a.watch=!!e.shouldUnregister,d.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:n.keepDirty||n.keepDirtyValues?r.isDirty:!(!n.keepDefaultValues||_e(t,s)),isSubmitted:!!n.keepIsSubmitted&&r.isSubmitted,dirtyFields:n.keepDirty||n.keepDirtyValues?r.dirtyFields:n.keepDefaultValues&&t?Ue(s,t):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(e,t={})=>{H(i,e)&&(U(t.defaultValue)?T(e,H(s,e)):(T(e,t.defaultValue),de(s,e,t.defaultValue)),t.keepTouched||De(r.touchedFields,e),t.keepDirty||(De(r.dirtyFields,e),r.isDirty=t.defaultValue?w(e,H(s,e)):w()),t.keepError||(De(r.errors,e),h.isValid&&g()),d.state.next({...r}))},clearErrors:e=>{e?te(e).forEach((e=>De(r.errors,e))):r.errors={},d.state.next({errors:r.errors})},unregister:N,setError:(e,t,n)=>{const s=(H(i,e,{_f:{}})._f||{}).ref;de(r.errors,e,{...t,ref:s}),d.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&s&&s.focus&&s.focus()},setFocus:(e,t={})=>{const n=H(i,e)._f,r=n.refs?n.refs[0]:n.ref;r.focus(),t.shouldSelect&&r.select()},getFieldState:E}}const Je=e=>{const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)};var Ge="M12,18A6,6 0 0,1 6,12C6,11 6.25,10.03 6.7,9.2L5.24,7.74C4.46,8.97 4,10.43 4,12A8,8 0 0,0 12,20V23L16,19L12,15M12,4V1L8,5L12,9V6A6,6 0 0,1 18,12C18,13 17.75,13.97 17.3,14.8L18.76,16.26C19.54,15.03 20,13.57 20,12A8,8 0 0,0 12,4Z",Xe=n(56),Ye=n.n(Xe),Ze=n(322);const et=({onClick:e,icon:t,value:n,type:r="button",isPrimary:i,label:s})=>(0,Ze.jsxs)("button",{className:"btn "+(i?"primary":""),style:{display:t?"flex":"block",minWidth:n?100:0},type:r,onClick:e&&e,title:s||n,children:[t&&(0,Ze.jsx)(Ye(),{className:"device-icon",path:t})," ",n]});function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const it=({label:e,name:t,register:n,required:r,hidden:i,description:s})=>(0,Ze.jsxs)("div",{className:"form-row",children:[!i&&(0,Ze.jsx)("label",{htmlFor:t,className:"form-label",children:e}),(0,Ze.jsx)("input",nt({className:"form-input",id:t,hidden:i},n(t,{required:r}))),s&&(0,Ze.jsx)("div",{className:"form-desc",children:s})]});function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const lt=({name:e,label:t,register:n,required:r})=>(0,Ze.jsxs)("div",{className:"form-row",children:[(0,Ze.jsx)("label",{htmlFor:e,className:"form-label",children:t}),(0,Ze.jsxs)("select",ot(ot({className:"form-select",id:e},n(e,{required:r})),{},{children:[(0,Ze.jsx)("option",{value:""}),I.map((e=>(0,Ze.jsx)("option",{value:e.type,children:e.humanName},e.type)))]}))]});class ct{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),ht.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),ht.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new ft(this),i=new ft(e);for(let e=t,s=t;;){if(r.next(e),i.next(e),e=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(s+=r.value.length,r.done||s>=n)return!0}}iter(e=1){return new ft(this,e)}iterRange(e,t=this.length){return new mt(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new gt(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new ut(e):ht.from(ut.split(e,[])):ct.empty}}class ut extends ct{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let i=0;;i++){let s=this.text[i],o=r+s.length;if((t?n:o)>=e)return new yt(r,o,n,s);r=o+1,n++}}decompose(e,t,n,r){let i=e<=0&&t>=this.length?this:new ut(pt(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=dt(i.text,e.text.slice(),0,i.length);if(t.length<=32)n.push(new ut(t,e.length+i.length));else{let e=t.length>>1;n.push(new ut(t.slice(0,e)),new ut(t.slice(e)))}}else n.push(i)}replace(e,t,n){if(!(n instanceof ut))return super.replace(e,t,n);let r=dt(this.text,dt(n.text,pt(this.text,0,e)),t),i=this.length+n.length-(t-e);return r.length<=32?new ut(r,i):ht.from(ut.split(r,[]),i)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,s=0;i<=t&&s<this.text.length;s++){let o=this.text[s],a=i+o.length;i>e&&s&&(r+=n),e<a&&t>i&&(r+=o.slice(Math.max(0,e-i),t-i)),i=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new ut(n,r)),n=[],r=-1);return r>-1&&t.push(new ut(n,r)),t}}class ht extends ct{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,n,r){for(let i=0;;i++){let s=this.children[i],o=r+s.length,a=n+s.lines-1;if((t?a:o)>=e)return s.lineInner(e,t,n,r);r=o+1,n=a+1}}decompose(e,t,n,r){for(let i=0,s=0;s<=t&&i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e<=a&&t>=s){let i=r&((s<=e?1:0)|(a>=t?2:0));s>=e&&a<=t&&!i?n.push(o):o.decompose(e-s,t-s,n,i)}s=a+1}}replace(e,t,n){if(n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let s=this.children[r],o=i+s.length;if(e>=i&&t<=o){let a=s.replace(e-i,t-i,n),l=this.lines-s.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let i=this.children.slice();return i[r]=a,new ht(i,this.length-(t-e)+n.length)}return super.replace(i,o,a)}i=o+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,s=0;i<this.children.length&&s<=t;i++){let o=this.children[i],a=s+o.length;s>e&&i&&(r+=n),e<a&&t>s&&(r+=o.sliceString(e-s,t-s,n)),s=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ht))return 0;let n=0,[r,i,s,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,i+=t){if(r==s||i==o)return n;let a=this.children[r],l=e.children[i];if(a!=l)return n+a.scanIdentical(l,t);n+=a.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let n=0;for(let t of e)n+=t.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new ut(n,t)}let r=Math.max(32,n>>5),i=r<<1,s=r>>1,o=[],a=0,l=-1,c=[];function u(e){let t;if(e.lines>i&&e instanceof ht)for(let t of e.children)u(t);else e.lines>s&&(a>s||!a)?(h(),o.push(e)):e instanceof ut&&a&&(t=c[c.length-1])instanceof ut&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new ut(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>r&&h(),a+=e.lines,l+=e.length+1,c.push(e))}function h(){0!=a&&(o.push(1==c.length?c[0]:ht.from(c,l)),l=-1,a=c.length=0)}for(let t of e)u(t);return h(),1==o.length?o[0]:new ht(o,t)}}function dt(e,t,n=0,r=1e9){for(let i=0,s=0,o=!0;s<e.length&&i<=r;s++){let a=e[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(t[t.length-1]+=a,o=!1):t.push(a)),i=l+1}return t}function pt(e,t,n){return dt(e,[""],t,n)}ct.empty=new ut([""],0);class ft{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ut?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],s=i>>1,o=r instanceof ut?r.text.length:r.children.length;if(s==(t>0?o:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof ut){let i=r.text[s+(t<0?-1:0)];if(this.offsets[n]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=r.children[s+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof ut?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class mt{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new ft(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class gt{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(ct.prototype[Symbol.iterator]=function(){return this.iter()},ft.prototype[Symbol.iterator]=mt.prototype[Symbol.iterator]=gt.prototype[Symbol.iterator]=function(){return this});class yt{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}let bt="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let e=1;e<bt.length;e++)bt[e]+=bt[e-1];function vt(e){for(let t=1;t<bt.length;t+=2)if(bt[t]>e)return bt[t-1]<=e;return!1}function xt(e){return e>=127462&&e<=127487}function wt(e,t,n=!0,r=!0){return(n?St:kt)(e,t,r)}function St(e,t,n){if(t==e.length)return t;t&&Pt(e.charCodeAt(t))&&Tt(e.charCodeAt(t-1))&&t--;let r=Ot(e,t);for(t+=At(r);t<e.length;){let i=Ot(e,t);if(8205==r||8205==i||n&&vt(i))t+=At(i),r=i;else{if(!xt(i))break;{let n=0,r=t-2;for(;r>=0&&xt(Ot(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function kt(e,t,n){for(;t>0;){let r=St(e,t-2,n);if(r<t)return r;t--}return 0}function Pt(e){return e>=56320&&e<57344}function Tt(e){return e>=55296&&e<56320}function Ot(e,t){let n=e.charCodeAt(t);if(!Tt(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return Pt(r)?r-56320+(n-55296<<10)+65536:n}function Ct(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function At(e){return e<65536?1:2}const Et=/\r\n?|\n/;var Nt=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(Nt||(Nt={}));class Mt{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?(e(n,r,i),r+=i):r+=s,n+=i}}iterChangedRanges(e,t=!1){Lt(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new Mt(e)}composeDesc(e){return this.empty?e:e.empty?this:Bt(this,e)}mapDesc(e,t=!1){return e.empty?this:_t(this,e,t)}mapPos(e,t=-1,n=Nt.Simple){let r=0,i=0;for(let s=0;s<this.sections.length;){let o=this.sections[s++],a=this.sections[s++],l=r+o;if(a<0){if(l>e)return i+(e-r);i+=o}else{if(n!=Nt.Simple&&l>=e&&(n==Nt.TrackDel&&r<e&&l>e||n==Nt.TrackBefore&&r<e||n==Nt.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!o)return e==r||t<0?i:i+a;i+=a}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return i}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&i>=e)return!(r<e&&i>t)||"cover";r=i}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Mt(e)}static create(e){return new Mt(e)}}class It extends Mt{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Lt(this,((t,n,r,i,s)=>e=e.replace(r,r+(n-t),s)),!1),e}mapDesc(e,t=!1){return _t(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,i=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o>=0){t[r]=o,t[r+1]=s;let a=r>>1;for(;n.length<a;)n.push(ct.empty);n.push(s?e.slice(i,i+s):ct.empty)}i+=s}return new It(t,n)}compose(e){return this.empty?e:e.empty?this:Bt(this,e,!0)}map(e,t=!1){return e.empty?this:_t(this,e,t,!0)}iterChanges(e,t=!1){Lt(this,e,t)}get desc(){return Mt.create(this.sections)}filter(e){let t=[],n=[],r=[],i=new Ft(this);e:for(let s=0,o=0;;){let a=s==e.length?1e9:e[s++];for(;o<a||o==a&&0==i.len;){if(i.done)break e;let e=Math.min(i.len,a-o);Dt(r,e,-1);let s=-1==i.ins?-1:0==i.off?i.ins:0;Dt(t,e,s),s>0&&Rt(n,t,i.text),i.forward(e),o+=e}let l=e[s++];for(;o<l;){if(i.done)break e;let e=Math.min(i.len,l-o);Dt(t,e,-1),Dt(r,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),o+=e}}return{changes:new It(t,n),filtered:Mt.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],i=[],s=0,o=null;function a(e=!1){if(!e&&!r.length)return;s<t&&Dt(r,t-s,-1);let n=new It(r,i);o=o?o.compose(n.map(o)):n,r=[],i=[],s=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof It){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),o=o?o.compose(l.map(o)):l}else{let{from:e,to:o=e,insert:c}=l;if(e>o||e<0||o>t)throw new RangeError(`Invalid change range ${e} to ${o} (in doc of length ${t})`);let u=c?"string"==typeof c?ct.of(c.split(n||Et)):c:ct.empty,h=u.length;if(e==o&&0==h)return;e<s&&a(),e>s&&Dt(r,e-s,-1),Dt(r,o-e,h),Rt(i,r,u),s=o}}(e),a(!o),o}static empty(e){return new It(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;n.length<r;)n.push(ct.empty);n[r]=ct.of(i.slice(1)),t.push(i[0],n[r].length)}}}return new It(t,n)}static createSet(e,t){return new It(e,t)}}function Dt(e,t,n,r=!1){if(0==t&&n<=0)return;let i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}function Rt(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(ct.empty);e.push(n)}}function Lt(e,t,n){let r=e.inserted;for(let i=0,s=0,o=0;o<e.sections.length;){let a=e.sections[o++],l=e.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,h=ct.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[o-2>>1])),!(n||o==e.sections.length||e.sections[o+1]<0);)a=e.sections[o++],l=e.sections[o++];t(i,c,s,u,h),i=c,s=u}}}function _t(e,t,n,r=!1){let i=[],s=r?[]:null,o=new Ft(e),a=new Ft(t);for(let e=-1;;)if(-1==o.ins&&-1==a.ins){let e=Math.min(o.len,a.len);Dt(i,e,-1),o.forward(e),a.forward(e)}else if(a.ins>=0&&(o.ins<0||e==o.i||0==o.off&&(a.len<o.len||a.len==o.len&&!n))){let t=a.len;for(Dt(i,a.ins,-1);t;){let n=Math.min(o.len,t);o.ins>=0&&e<o.i&&o.len<=n&&(Dt(i,0,o.ins),s&&Rt(s,i,o.text),e=o.i),o.forward(n),t-=n}a.next()}else{if(!(o.ins>=0)){if(o.done&&a.done)return s?It.createSet(i,s):Mt.create(i);throw new Error("Mismatched change set lengths")}{let t=0,n=o.len;for(;n;)if(-1==a.ins){let e=Math.min(n,a.len);t+=e,n-=e,a.forward(e)}else{if(!(0==a.ins&&a.len<n))break;n-=a.len,a.next()}Dt(i,t,e<o.i?o.ins:0),s&&e<o.i&&Rt(s,i,o.text),e=o.i,o.forward(o.len-n)}}}function Bt(e,t,n=!1){let r=[],i=n?[]:null,s=new Ft(e),o=new Ft(t);for(let e=!1;;){if(s.done&&o.done)return i?It.createSet(r,i):Mt.create(r);if(0==s.ins)Dt(r,s.len,0,e),s.next();else if(0!=o.len||o.done){if(s.done||o.done)throw new Error("Mismatched change set lengths");{let t=Math.min(s.len2,o.len),n=r.length;if(-1==s.ins){let n=-1==o.ins?-1:o.off?0:o.ins;Dt(r,t,n,e),i&&n&&Rt(i,r,o.text)}else-1==o.ins?(Dt(r,s.off?0:s.len,t,e),i&&Rt(i,r,s.textBit(t))):(Dt(r,s.off?0:s.len,o.off?0:o.ins,e),i&&!o.off&&Rt(i,r,o.text));e=(s.ins>t||o.ins>=0&&o.len>t)&&(e||r.length>n),s.forward2(t),o.forward(t)}}else Dt(r,0,o.ins,e),i&&Rt(i,r,o.text),o.next()}}class Ft{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ct.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?ct.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class jt{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new jt(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Vt.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Vt.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Vt.range(e.anchor,e.head)}static create(e,t,n){return new jt(e,t,n)}}class Vt{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Vt.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Vt([this.main],0)}addRange(e,t=!0){return Vt.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,Vt.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Vt(e.ranges.map((e=>jt.fromJSON(e))),e.main)}static single(e,t=e){return new Vt([Vt.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let i=e[r];if(i.empty?i.from<=n:i.from<n)return Vt.normalized(e.slice(),t);n=i.to}return new Vt(e,t)}static cursor(e,t=0,n,r){return jt.create(e,e,(0==t?0:t<0?4:8)|(null==n?3:Math.min(2,n))|(null!=r?r:33554431)<<5)}static range(e,t,n){let r=(null!=n?n:33554431)<<5;return t<e?jt.create(t,e,24|r):jt.create(e,t,r|(t>e?4:0))}static normalized(e,t=0){let n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let n=1;n<e.length;n++){let r=e[n],i=e[n-1];if(r.empty?r.from<=i.to:r.from<i.to){let s=i.from,o=Math.max(r.to,i.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?Vt.range(o,s):Vt.range(s,o))}}return new Vt(e,t)}}function zt(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let Ut=0;class Ht{constructor(e,t,n,r,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=Ut++,this.default=e([]),this.extensions="function"==typeof i?i(this):i}static define(e={}){return new Ht(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:Wt),!!e.static,e.enables)}of(e){return new $t([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new $t(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new $t(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}}function Wt(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}class $t{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=Ut++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,i=this.id,s=e[i]>>1,o=2==this.type,a=!1,l=!1,c=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:0==(1&(null!==(t=e[n.id])&&void 0!==t?t:1))&&c.push(e[n.id]);return{create:e=>(e.values[s]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||Qt(e,c)){let t=n(e);if(o?!qt(t,e.values[s],r):!r(t,e.values[s]))return e.values[s]=t,1}return 0},reconfigure:(e,t)=>{let a=n(e),l=t.config.address[i];if(null!=l){let n=sn(t,l);if(this.dependencies.every((n=>n instanceof Ht?t.facet(n)===e.facet(n):!(n instanceof Gt)||t.field(n,!1)==e.field(n,!1)))||(o?qt(a,n,r):r(a,n)))return e.values[s]=n,0}return e.values[s]=a,1}}}}function qt(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Qt(e,t){let n=!1;for(let r of t)1&rn(e,r)&&(n=!0);return n}function Kt(e,t,n){let r=n.map((t=>e[t.id])),i=n.map((e=>e.type)),s=r.filter((e=>!(1&e))),o=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<r.length;t++){let s=sn(e,r[t]);if(2==i[t])for(let e of s)n.push(e);else n.push(s)}return t.combine(n)}return{create(e){for(let t of r)rn(e,t);return e.values[o]=a(e),1},update(e,n){if(!Qt(e,s))return 0;let r=a(e);return t.compare(r,e.values[o])?0:(e.values[o]=r,1)},reconfigure(e,i){let s=Qt(e,r),l=i.config.facets[t.id],c=i.facet(t);if(l&&!s&&Wt(n,l))return e.values[o]=c,0;let u=a(e);return t.compare(u,c)?(e.values[o]=c,0):(e.values[o]=u,1)}}}const Jt=Ht.define({static:!0});class Gt{constructor(e,t,n,r,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(e){let t=new Gt(Ut++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Jt).find((e=>e.field==this));return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],i=this.updateF(r,n);return this.compareF(r,i)?0:(e.values[t]=i,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,Jt.of({field:this,create:e})]}get extension(){return this}}function Xt(e){return t=>new Zt(t,e)}const Yt={highest:Xt(0),high:Xt(1),default:Xt(2),low:Xt(3),lowest:Xt(4)};class Zt{constructor(e,t){this.inner=e,this.prec=t}}class en{of(e){return new tn(this,e)}reconfigure(e){return en.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class tn{constructor(e,t){this.compartment=e,this.inner=t}}class nn{constructor(e,t,n,r,i,s){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],i=Object.create(null),s=new Map;for(let n of function(e,t,n){let r=[[],[],[],[],[]],i=new Map;return function e(s,o){let a=i.get(s);if(null!=a){if(a<=o)return;let e=r[a].indexOf(s);e>-1&&r[a].splice(e,1),s instanceof tn&&n.delete(s.compartment)}if(i.set(s,o),Array.isArray(s))for(let t of s)e(t,o);else if(s instanceof tn){if(n.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(s.compartment)||s.inner;n.set(s.compartment,r),e(r,o)}else if(s instanceof Zt)e(s.inner,s.prec);else if(s instanceof Gt)r[o].push(s),s.provides&&e(s.provides,o);else if(s instanceof $t)r[o].push(s),s.facet.extensions&&e(s.facet.extensions,o);else{let t=s.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(t,o)}}(e,2),r.reduce(((e,t)=>e.concat(t)))}(e,t,s))n instanceof Gt?r.push(n):(i[n.facet.id]||(i[n.facet.id]=[])).push(n);let o=Object.create(null),a=[],l=[];for(let e of r)o[e.id]=l.length<<1,l.push((t=>e.slot(t)));let c=null==n?void 0:n.config.facets;for(let e in i){let t=i[e],r=t[0].facet,s=c&&c[e]||[];if(t.every((e=>0==e.type)))if(o[r.id]=a.length<<1|1,Wt(s,t))a.push(n.facet(r));else{let e=r.combine(t.map((e=>e.value)));a.push(n&&r.compare(e,n.facet(r))?n.facet(r):e)}else{for(let e of t)0==e.type?(o[e.id]=a.length<<1|1,a.push(e.value)):(o[e.id]=l.length<<1,l.push((t=>e.dynamicSlot(t))));o[r.id]=l.length<<1,l.push((e=>Kt(e,r,t)))}}let u=l.map((e=>e(o)));return new nn(e,s,u,o,a,i)}}function rn(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function sn(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const on=Ht.define(),an=Ht.define({combine:e=>e.some((e=>e)),static:!0}),ln=Ht.define({combine:e=>e.length?e[0]:void 0,static:!0}),cn=Ht.define(),un=Ht.define(),hn=Ht.define(),dn=Ht.define({combine:e=>!!e.length&&e[0]});class pn{constructor(e,t){this.type=e,this.value=t}static define(){return new fn}}class fn{of(e){return new pn(this,e)}}class mn{constructor(e){this.map=e}of(e){return new gn(this,e)}}class gn{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new gn(this.type,t)}is(e){return this.type==e}static define(e={}){return new mn(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}gn.reconfigure=gn.define(),gn.appendConfig=gn.define();class yn{constructor(e,t,n,r,i,s){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=s,this._doc=null,this._state=null,n&&zt(n,t.newLength),i.some((e=>e.type==yn.time))||(this.annotations=i.concat(yn.time.of(Date.now())))}static create(e,t,n,r,i,s){return new yn(e,t,n,r,i,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(yn.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function bn(e,t){let n=[];for(let r=0,i=0;;){let s,o;if(r<e.length&&(i==t.length||t[i]>=e[r]))s=e[r++],o=e[r++];else{if(!(i<t.length))return n;s=t[i++],o=t[i++]}!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function vn(e,t,n){var r;let i,s,o;return n?(i=t.changes,s=It.empty(t.changes.length),o=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),s=e.changes.mapDesc(t.changes,!0),o=e.changes.compose(i)),{changes:o,selection:t.selection?t.selection.map(s):null===(r=e.selection)||void 0===r?void 0:r.map(i),effects:gn.mapEffects(e.effects,i).concat(gn.mapEffects(t.effects,s)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function xn(e,t,n){let r=t.selection,i=kn(t.annotations);return t.userEvent&&(i=i.concat(yn.userEvent.of(t.userEvent))),{changes:t.changes instanceof It?t.changes:It.of(t.changes||[],n,e.facet(ln)),selection:r&&(r instanceof Vt?r:Vt.single(r.anchor,r.head)),effects:kn(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function wn(e,t,n){let r=xn(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let i=1;i<t.length;i++){!1===t[i].filter&&(n=!1);let s=!!t[i].sequential;r=vn(r,xn(e,t[i],s?r.changes.newLength:e.doc.length),s)}let i=yn.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,n=t.facet(hn),r=e;for(let i=n.length-1;i>=0;i--){let s=n[i](e);s&&Object.keys(s).length&&(r=vn(e,xn(t,s,e.changes.newLength),!0))}return r==e?e:yn.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let r of t.facet(cn)){let t=r(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:bn(n,t))}if(!0!==n){let r,i;if(!1===n)i=e.changes.invertedDesc,r=It.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,i=t.filtered.mapDesc(t.changes).invertedDesc}e=yn.create(t,r,e.selection&&e.selection.map(i),gn.mapEffects(e.effects,i),e.annotations,e.scrollIntoView)}let r=t.facet(un);for(let n=r.length-1;n>=0;n--){let i=r[n](e);e=i instanceof yn?i:Array.isArray(i)&&1==i.length&&i[0]instanceof yn?i[0]:wn(t,kn(i),!1)}return e}(i):i)}yn.time=pn.define(),yn.userEvent=pn.define(),yn.addToHistory=pn.define(),yn.remote=pn.define();const Sn=[];function kn(e){return null==e?Sn:Array.isArray(e)?e:[e]}var Pn=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(Pn||(Pn={}));const Tn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let On;try{On=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}class Cn{constructor(e,t,n,r,i,s){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=i,s&&(s._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)rn(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return rn(this,n),sn(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return wn(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:i}=n;for(let t of e.effects)t.is(en.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((e,t)=>i.set(t,e))),n=null),i.set(t.value.compartment,t.value.extension)):t.is(gn.reconfigure)?(n=null,r=t.value):t.is(gn.appendConfig)&&(n=null,r=kn(r).concat(t.value));n?t=e.startState.values.slice():(n=nn.resolve(r,i,this),t=new Cn(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values),new Cn(n,e.newDoc,e.newSelection,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:Vt.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],s=kn(n.effects);for(let n=1;n<t.ranges.length;n++){let o=e(t.ranges[n]),a=this.changes(o.changes),l=a.map(r);for(let e=0;e<n;e++)i[e]=i[e].map(l);let c=r.mapDesc(a,!0);i.push(o.range.map(c)),r=r.compose(l),s=gn.mapEffects(s,l).concat(gn.mapEffects(kn(o.effects),c))}return{changes:r,selection:Vt.create(i,t.mainIndex),effects:s}}changes(e=[]){return e instanceof It?e:It.of(e,this.doc.length,this.facet(Cn.lineSeparator))}toText(e){return ct.of(e.split(this.facet(Cn.lineSeparator)||Et))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(rn(this,t),sn(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof Gt&&null!=this.config.address[r.id]&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let t in n)if(Object.prototype.hasOwnProperty.call(e,t)){let i=n[t],s=e[t];r.push(i.init((e=>i.spec.fromJSON(s,e))))}return Cn.create({doc:e.doc,selection:Vt.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=nn.resolve(e.extensions||[],new Map),n=e.doc instanceof ct?e.doc:ct.of((e.doc||"").split(t.staticFacet(Cn.lineSeparator)||Et)),r=e.selection?e.selection instanceof Vt?e.selection:Vt.single(e.selection.anchor,e.selection.head):Vt.single(0);return zt(r,n.length),t.staticFacet(an)||(r=r.asSingle()),new Cn(t,n,r,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(Cn.tabSize)}get lineBreak(){return this.facet(Cn.lineSeparator)||"\n"}get readOnly(){return this.facet(dn)}phrase(e,...t){for(let t of this.facet(Cn.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,((e,n)=>{if("$"==n)return"$";let r=+(n||1);return!r||r>t.length?e:t[r-1]}))),e}languageDataAt(e,t,n=-1){let r=[];for(let i of this.facet(on))for(let s of i(this,t,n))Object.prototype.hasOwnProperty.call(s,e)&&r.push(s[e]);return r}charCategorizer(e){return t=this.languageDataAt("wordChars",e).join(""),e=>{if(!/\S/.test(e))return Pn.Space;if(function(e){if(On)return On.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Tn.test(n)))return!0}return!1}(e))return Pn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Pn.Word;return Pn.Other};var t}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),i=this.charCategorizer(e),s=e-n,o=e-n;for(;s>0;){let e=wt(t,s,!1);if(i(t.slice(e,s))!=Pn.Word)break;s=e}for(;o<r;){let e=wt(t,o);if(i(t.slice(o,e))!=Pn.Word)break;o=e}return s==o?null:Vt.range(s+n,o+n)}}function An(e,t,n={}){let r={};for(let t of e)for(let e of Object.keys(t)){let i=t[e],s=r[e];if(void 0===s)r[e]=i;else if(s===i||void 0===i);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](s,i)}}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}Cn.allowMultipleSelections=an,Cn.tabSize=Ht.define({combine:e=>e.length?e[0]:4}),Cn.lineSeparator=ln,Cn.readOnly=dn,Cn.phrases=Ht.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every((n=>e[n]==t[n]))}}),Cn.languageData=on,Cn.changeFilter=cn,Cn.transactionFilter=un,Cn.transactionExtender=hn,en.reconfigure=gn.define();class En{eq(e){return this==e}range(e,t=e){return Nn.create(e,t,this)}}En.prototype.startSide=En.prototype.endSide=0,En.prototype.point=!1,En.prototype.mapMode=Nt.TrackDel;class Nn{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new Nn(e,t,n)}}function Mn(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class In{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let i=n?this.to:this.from;for(let s=r,o=i.length;;){if(s==o)return s;let r=s+o>>1,a=i[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==s)return a>=0?s:o;a>=0?o=r:s=r+1}}between(e,t,n,r){for(let i=this.findIndex(t,-1e9,!0),s=this.findIndex(n,1e9,!1,i);i<s;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let n=[],r=[],i=[],s=-1,o=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],h=this.from[a]+e,d=this.to[a]+e;if(h==d){let e=t.mapPos(h,u.startSide,u.mapMode);if(null==e)continue;if(l=c=e,u.startSide!=u.endSide&&(c=t.mapPos(h,u.endSide),c<l))continue}else if(l=t.mapPos(h,u.startSide),c=t.mapPos(d,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(s<0&&(s=l),u.point&&(o=Math.max(o,c-l)),n.push(u),r.push(l-s),i.push(c-s))}return{mapped:n.length?new In(r,i,n,o):null,pos:s}}}class Dn{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new Dn(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=e,s=e.filter;if(0==t.length&&!s)return this;if(n&&(t=t.slice().sort(Mn)),this.isEmpty)return t.length?Dn.of(t):this;let o=new _n(this,null,-1).goto(0),a=0,l=[],c=new Rn;for(;o.value||a<t.length;)if(a<t.length&&(o.from-t[a].from||o.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==o.rangeIndex&&o.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(o.chunkIndex)<t[a].from)&&(!s||r>this.chunkEnd(o.chunkIndex)||i<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!s||r>o.to||i<o.from||s(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||l.push(Nn.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?Dn.empty:this.nextLayer.update({add:l,filter:s,filterFrom:r,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i],a=e.touchesRange(s,s+o.length);if(!1===a)r=Math.max(r,o.maxPoint),t.push(o),n.push(e.mapPos(s));else if(!0===a){let{mapped:i,pos:a}=o.map(s,e);i&&(r=Math.max(r,i.maxPoint),t.push(i),n.push(a))}}let i=this.nextLayer.map(e);return 0==t.length?i:new Dn(n,t,i||Dn.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],s=this.chunk[r];if(t>=i&&e<=i+s.length&&!1===s.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return Bn.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Bn.from(e).goto(t)}static compare(e,t,n,r,i=-1){let s=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),o=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),a=Ln(s,o,n),l=new jn(s,a,i),c=new jn(o,a,i);n.iterGaps(((e,t,n)=>Vn(l,e,c,t,n,r))),n.empty&&0==n.length&&Vn(l,0,c,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=1e9);let i=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),s=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(i.length!=s.length)return!1;if(!i.length)return!0;let o=Ln(i,s),a=new jn(i,o,0).goto(n),l=new jn(s,o,0).goto(n);for(;;){if(a.to!=l.to||!zn(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,n,r,i=-1){let s=new jn(e,null,i).goto(t),o=t,a=s.openStart;for(;;){let e=Math.min(s.to,n);if(s.point?(r.point(o,e,s.point,s.activeForPoint(s.to),a,s.pointRank),a=s.openEnd(e)+(s.to>e?1:0)):e>o&&(r.span(o,e,s.active,a),a=s.openEnd(e)),s.to>n)break;o=s.to,s.next()}return a}static of(e,t=!1){let n=new Rn;for(let r of e instanceof Nn?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(Mn(t,r)>0)return e.slice().sort(Mn);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}}Dn.empty=new Dn([],[],null,-1),Dn.empty.nextLayer=Dn.empty;class Rn{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new In(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new Rn)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(Dn.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=Dn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Ln(e,t,n){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let i=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let s=r.get(e.chunk[t]);null==s||(n?n.mapPos(s):s)!=e.chunkPos[t]||(null==n?void 0:n.touchesRange(s,s+e.chunk[t].length))||i.add(e.chunk[t])}return i}class _n{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Bn{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let i=0;i<e.length;i++)for(let s=e[i];!s.isEmpty;s=s.nextLayer)s.maxPoint>=n&&r.push(new _n(s,t,n,i));return 1==r.length?r[0]:new Bn(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)Fn(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)Fn(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Fn(this.heap,0)}}}function Fn(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),n.compare(i)<0)break;e[r]=n,e[t]=i,t=r}}class jn{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Bn.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Un(this.active,e),Un(this.activeTo,e),Un(this.activeRank,e),this.minActive=Wn(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:i}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=i;)t++;Hn(this.active,t,n),Hn(this.activeTo,t,r),Hn(this.activeRank,t,i),e&&Hn(e,t,this.cursor.from),this.minActive=Wn(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null,r=0;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&Un(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let i=this.cursor.value;if(i.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=i,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=i.endSide,this.cursor.from<e&&(r=1),this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){let t=0;for(;t<n.length&&n[t]<e;)t++;this.openStart=t+r}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function Vn(e,t,n,r,i,s){e.goto(t),n.goto(r);let o=r+i,a=r,l=r-t;for(;;){let t=e.to+l-n.to||e.endSide-n.endSide,r=t<0?e.to+l:n.to,i=Math.min(r,o);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&zn(e.activeForPoint(e.to+l),n.activeForPoint(n.to))||s.comparePoint(a,i,e.point,n.point):i>a&&!zn(e.active,n.active)&&s.compareRange(a,i,e.active,n.active),r>o)break;a=r,t<=0&&e.next(),t>=0&&n.next()}}function zn(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function Un(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function Hn(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function Wn(e,t){let n=-1,r=1e9;for(let i=0;i<t.length;i++)(t[i]-r||e[i].endSide-e[n].endSide)<0&&(n=i,r=t[i]);return n}function $n(e,t,n=e.length){let r=0;for(let i=0;i<n;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=wt(e,i));return r}const qn="undefined"==typeof Symbol?"__":Symbol.for(""),Qn="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Kn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Jn{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function i(e,t,s,o){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return s.push(e[0]+";");for(let n in t){let o=t[n];if(/&/.test(n))i(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),o,s);else if(o&&"object"==typeof o){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");i(r(n),o,a,c)}else null!=o&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+o+";")}(a.length||c)&&s.push((!n||l||o?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let t in e)i(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=Kn[qn]||1;return Kn[qn]=e+1,""+e.toString(36)}static mount(e,t){(e[Qn]||new Xn(e)).mount(Array.isArray(t)?t:[t])}}let Gn=null;class Xn{constructor(e){if(!e.head&&e.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(Gn)return e.adoptedStyleSheets=[Gn.sheet].concat(e.adoptedStyleSheets),e[Qn]=Gn;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Gn=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[Qn]=this}mount(e){let t=this.sheet,n=0,r=0;for(let i=0;i<e.length;i++){let s=e[i],o=this.modules.indexOf(s);if(o<r&&o>-1&&(this.modules.splice(o,1),r--,o=-1),-1==o){if(this.modules.splice(r++,0,s),t)for(let e=0;e<s.rules.length;e++)t.insertRule(s.rules[e],n++)}else{for(;r<o;)n+=this.modules[r++].rules.length;n+=s.rules.length,r++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}for(var Yn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Zn={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},er="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),tr="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),nr="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),rr="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ir="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),sr=er&&(rr||+er[1]<57)||nr&&rr,or=0;or<10;or++)Yn[48+or]=Yn[96+or]=String(or);for(or=1;or<=24;or++)Yn[or+111]="F"+or;for(or=65;or<=90;or++)Yn[or]=String.fromCharCode(or+32),Zn[or]=String.fromCharCode(or);for(var ar in Yn)Zn.hasOwnProperty(ar)||(Zn[ar]=Yn[ar]);function lr(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function cr(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function ur(e,t){if(!t.anchorNode)return!1;try{return cr(e,t.anchorNode)}catch(e){return!1}}function hr(e){return 3==e.nodeType?kr(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function dr(e,t,n,r){return!!n&&(fr(e,t,n,r,-1)||fr(e,t,n,r,1))}function pr(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function fr(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:mr(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=pr(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?mr(e):0}}}function mr(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}const gr={left:0,right:0,top:0,bottom:0};function yr(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function br(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}class vr{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let xr,wr=null;function Sr(e){if(e.setActive)return e.setActive();if(wr)return e.focus(wr);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==wr?{get preventScroll(){return wr={preventScroll:!0},!0}}:void 0),!wr){wr=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],i=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function kr(e,t,n=t){let r=xr||(xr=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function Pr(e,t,n){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,e.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,e.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function Tr(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}class Or{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new Or(e.parentNode,pr(e),t)}static after(e,t){return new Or(e.parentNode,pr(e)+1,t)}}const Cr=[];class Ar{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(2&this.dirty){let t,n=this.dom,r=null;for(let i of this.children){if(i.dirty){if(!i.dom&&(t=r?r.nextSibling:n.firstChild)){let e=Ar.get(t);e&&(e.parent||e.constructor!=i.constructor)||i.reuseDOM(t)}i.sync(e),i.dirty=0}if(t=r?r.nextSibling:n.firstChild,e&&!e.written&&e.node==n&&t!=i.dom&&(e.written=!0),i.dom.parentNode==n)for(;t&&t!=i.dom;)t=Er(t);else n.insertBefore(i.dom,t);r=i.dom}for(t=r?r.nextSibling:n.firstChild,t&&e&&e.node==n&&(e.written=!0);t;)t=Er(t)}else if(1&this.dirty)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==mr(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Ar.get(n);)n=n.nextSibling;if(!n)return this.length;for(let e=0,t=0;;e++){let r=this.children[e];if(r.dom==n)return t;t+=r.length+r.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,i=-1,s=-1,o=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],u=l+n.length;if(l<e&&u>t)return n.domBoundsAround(e,t,l);if(u>=e&&-1==r&&(r=a,i=l),l>t&&n.dom.parentNode==this.dom){s=a,o=c;break}c=u,l=u+n.breakAfter}return{from:i,to:o<0?n+this.length:o,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=Cr){this.markDirty();for(let n=e;n<t;n++){let e=this.children[n];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...n);for(let e=0;e<n.length;e++)n[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Nr(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,n,r,i,s){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}function Er(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}Ar.prototype.breakAfter=0;class Nr{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function Mr(e,t,n,r,i,s,o,a,l){let{children:c}=e,u=c.length?c[t]:null,h=s.length?s[s.length-1]:null,d=h?h.breakAfter:o;if(!(t==r&&u&&!o&&!d&&s.length<2&&u.merge(n,i,s.length?h:null,0==n,a,l))){if(r<c.length){let e=c[r];e&&i<e.length?(t==r&&(e=e.split(i),i=0),!d&&h&&e.merge(0,i,h,!0,0,l)?s[s.length-1]=e:(i&&e.merge(0,i,null,!1,0,l),s.push(e))):(null==e?void 0:e.breakAfter)&&(h?h.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),t++));t<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else{if(!c[t].become(s[0]))break;t++,s.shift(),a=s.length?0:l}!s.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,a,l)&&t--,(t<r||s.length)&&e.replaceChildren(t,r,s)}}function Ir(e,t,n,r,i,s){let o=e.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(t,-1),h=t-n;for(let e of r)h+=e.length;e.length+=h,Mr(e,c,u,a,l,r,0,i,s)}let Dr="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},Rr="undefined"!=typeof document?document:{documentElement:{style:{}}};const Lr=/Edge\/(\d+)/.exec(Dr.userAgent),_r=/MSIE \d/.test(Dr.userAgent),Br=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Dr.userAgent),Fr=!!(_r||Br||Lr),jr=!Fr&&/gecko\/(\d+)/i.test(Dr.userAgent),Vr=!Fr&&/Chrome\/(\d+)/.exec(Dr.userAgent),zr="webkitFontSmoothing"in Rr.documentElement.style,Ur=!Fr&&/Apple Computer/.test(Dr.vendor),Hr=Ur&&(/Mobile\/\w+/.test(Dr.userAgent)||Dr.maxTouchPoints>2);var Wr={mac:Hr||/Mac/.test(Dr.platform),windows:/Win/.test(Dr.platform),linux:/Linux|X11/.test(Dr.platform),ie:Fr,ie_version:_r?Rr.documentMode||6:Br?+Br[1]:Lr?+Lr[1]:0,gecko:jr,gecko_version:jr?+(/Firefox\/(\d+)/.exec(Dr.userAgent)||[0,0])[1]:0,chrome:!!Vr,chrome_version:Vr?+Vr[1]:0,ios:Hr,android:/Android\b/.test(Dr.userAgent),webkit:zr,safari:Ur,webkit_version:zr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=Rr.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class $r extends Ar{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return(!n||n instanceof $r&&!(this.length-(t-e)+n.length>256))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new $r(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Or(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Qr(this.dom,e,t)}}class qr extends Ar{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let e of t)e.setParent(this)}setAttrs(e){if(Tr(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,n,r,i,s){return!(n&&(!(n instanceof qr&&n.mark.eq(this.mark))||e&&i<=0||t<this.length&&s<=0)||(Ir(this,e,t,n?n.children:[],i-1,s-1),this.markDirty(),0))}split(e){let t=[],n=0,r=-1,i=0;for(let s of this.children){let o=n+s.length;o>e&&t.push(n<e?s.split(e-n):s),r<0&&n>=e&&(r=i),n=o,i++}let s=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new qr(this.mark,t,s)}domAtPos(e){return Zr(this.dom,this.children,e)}coordsAt(e,t){return ti(this,e,t)}}function Qr(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let i=t,s=t,o=0;0==t&&n<0||t==r&&n>=0?Wr.chrome||Wr.gecko||(t?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=kr(e,i,s).getClientRects();if(!a.length)return gr;let l=a[(o?o<0:n>=0)?0:a.length-1];return Wr.safari&&!o&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),o?yr(l,o<0):l||null}class Kr extends Ar{constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}static create(e,t,n){return new(e.customView||Kr)(e,t,n)}split(e){let t=Kr.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,i,s){return!(n&&(!(n instanceof Kr&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&s<=0)||(this.length=e+(n?n.length:0)+(this.length-t),0))}become(e){return e.length==this.length&&e instanceof Kr&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return ct.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):ct.empty}domAtPos(e){return 0==e?Or.before(this.dom):Or.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.dom.getClientRects(),r=null;if(!n.length)return gr;for(let t=e>0?n.length-1:0;r=n[t],!(e>0?0==t:t==n.length-1||r.top<r.bottom);t+=e>0?-1:1);return 0==e&&t>0||e==this.length&&t<=0?r:yr(r,0==e)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Jr extends Kr{domAtPos(e){let{topView:t,text:n}=this.widget;return t?Gr(e,0,t,n,((e,t)=>e.domAtPos(t)),(e=>new Or(n,Math.min(e,n.nodeValue.length)))):new Or(n,Math.min(e,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:n,text:r}=this.widget;return n?Xr(e,t,n,r):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:n,text:r}=this.widget;return n?Gr(e,t,n,r,((e,t,n)=>e.coordsAt(t,n)),((e,t)=>Qr(r,e,t))):Qr(r,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}}function Gr(e,t,n,r,i,s){if(n instanceof qr){for(let o of n.children){let n=cr(o.dom,r),a=n?r.nodeValue.length:o.length;if(e<a||e==a&&o.getSide()<=0)return n?Gr(e,t,o,r,i,s):i(o,e,t);e-=a}return i(n,n.length,-1)}return n.dom==r?s(e,t):i(n,e,t)}function Xr(e,t,n,r){if(n instanceof qr)for(let i of n.children){let n=0,s=cr(i.dom,r);if(cr(i.dom,e))return n+(s?Xr(e,t,i,r):i.localPosFromDOM(e,t));n+=s?r.nodeValue.length:i.length}else if(n.dom==r)return Math.min(t,r.nodeValue.length);return n.localPosFromDOM(e,t)}class Yr extends Ar{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Yr&&e.side==this.side}split(){return new Yr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return Or.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),n=function(e,t){let n=e.parent,r=n?n.children.indexOf(e):-1;for(;n&&r>=0;)if(t<0?r>0:r<n.children.length){let e=n.children[r+t];if(e instanceof $r){let n=e.coordsAt(t<0?e.length:0,t);if(n)return n}r+=t}else{if(!(n instanceof qr&&n.parent)){let e=n.dom.lastChild;if(e&&"BR"==e.nodeName)return e.getClientRects()[0];break}r=n.parent.children.indexOf(n)+(t<0?0:1),n=n.parent}}(this,this.side>0?-1:1);return n&&n.top<t.bottom&&n.bottom>t.top?{left:t.left,right:t.right,top:n.top,bottom:n.bottom}:t}get overrideDOMText(){return ct.empty}}function Zr(e,t,n){let r=0;for(let i=0;r<t.length;r++){let s=t[r],o=i+s.length;if(!(o==i&&s.getSide()<=0)){if(n>i&&n<o&&s.dom.parentNode==e)return s.domAtPos(n-i);if(n<=i)break;i=o}}for(;r>0;r--){let n=t[r-1].dom;if(n.parentNode==e)return Or.after(n)}return new Or(e,0)}function ei(e,t,n){let r,{children:i}=e;n>0&&t instanceof qr&&i.length&&(r=i[i.length-1])instanceof qr&&r.mark.eq(t.mark)?ei(r,t.children[0],n-1):(i.push(t),t.setParent(e)),e.length+=t.length}function ti(e,t,n){for(let r=0,i=0;i<e.children.length;i++){let s,o=e.children[i],a=r+o.length;if((n<=0||a==e.length||o.getSide()>0?a>=t:a>t)&&(t<a||i+1==e.children.length||(s=e.children[i+1]).length||s.getSide()>0)){let e=0;if(a==r){if(o.getSide()<=0)continue;e=n=-o.getSide()}let i=o.coordsAt(Math.max(0,t-r),n);return e&&i?yr(i,n<0):i}r=a}let r=e.dom.lastChild;if(!r)return e.dom.getBoundingClientRect();let i=hr(r);return i[i.length-1]||null}function ni(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function ri(e,t){if(e==t)return!0;if(!e||!t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i of n)if(-1==r.indexOf(i)||e[i]!==t[i])return!1;return!0}function ii(e,t,n){let r=null;if(t)for(let i in t)n&&i in n||e.removeAttribute(r=i);if(n)for(let i in n)t&&t[i]==n[i]||e.setAttribute(r=i,n[i]);return!!r}$r.prototype.children=Kr.prototype.children=Yr.prototype.children=Cr;class si{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var oi=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(oi||(oi={}));class ai extends En{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new li(e)}static widget(e){let t=e.side||0,n=!!e.block;return t+=n?t>0?3e8:-4e8:t>0?1e8:-1e8,new ui(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:i,end:s}=hi(e,r);t=(i?r?-3e8:-1:5e8)-1,n=1+(s?r?2e8:1:-6e8)}return new ui(e,t,n,r,e.widget||null,!0)}static line(e){return new ci(e)}static set(e,t=!1){return Dn.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}ai.none=Dn.empty;class li extends ai{constructor(e){let{start:t,end:n}=hi(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof li&&this.tagName==e.tagName&&this.class==e.class&&ri(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}li.prototype.point=!1;class ci extends ai{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ci&&ri(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}ci.prototype.mapMode=Nt.TrackBefore,ci.prototype.point=!0;class ui extends ai{constructor(e,t,n,r,i,s){super(t,n,i,e),this.block=r,this.isReplace=s,this.mapMode=r?t<=0?Nt.TrackBefore:Nt.TrackAfter:Nt.TrackDel}get type(){return this.startSide<this.endSide?oi.WidgetRange:this.startSide<=0?oi.WidgetBefore:oi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof ui&&((t=this.widget)==(n=e.widget)||!!(t&&n&&t.compare(n)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,n}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function hi(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!=n?n:t,end:null!=r?r:t}}function di(e,t,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=e?n[i]=Math.max(n[i],t):n.push(e,t)}ui.prototype.point=!0;class pi extends Ar{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,i,s){if(n){if(!(n instanceof pi))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),Ir(this,e,t,n?n.children:[],i,s),!0}split(e){let t=new pi;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let e=n;e<this.children.length;e++)t.append(this.children[e],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ri(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ei(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=ni(t,this.attrs||{})),n&&(this.attrs=ni({class:n},this.attrs||{}))}domAtPos(e){return Zr(this.dom,this.children,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?4&this.dirty&&(Tr(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(ii(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let n=this.dom.lastChild;for(;n&&Ar.get(n)instanceof qr;)n=n.lastChild;if(!(n&&this.length&&("BR"==n.nodeName||0!=(null===(t=Ar.get(n))||void 0===t?void 0:t.isEditable)||Wr.ios&&this.children.some((e=>e instanceof $r))))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof $r))return null;let n=hr(t.dom);if(1!=n.length)return null;e+=n[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return ti(this,e,t)}become(e){return!1}get type(){return oi.Text}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let i=e.children[n],s=r+i.length;if(s>=t){if(i instanceof pi)return i;if(s>t)break}r=s+i.breakAfter}return null}}class fi extends Ar{constructor(e,t,n){super(),this.widget=e,this.length=t,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,i,s){return!(n&&(!(n instanceof fi&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&s<=0)||(this.length=e+(n?n.length:0)+(this.length-t),0))}domAtPos(e){return 0==e?Or.before(this.dom):Or.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new fi(this.widget,t,this.type);return n.breakAfter=this.breakAfter,n}get children(){return Cr}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ct.empty}domBoundsAround(){return null}become(e){return e instanceof fi&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class mi{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof fi&&e.type==oi.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new pi),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(gi(new Yr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,n)),this.getLine().append(gi(new $r(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,i,s){if(this.disallowBlockEffectsFor[s]&&n instanceof ui){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(n instanceof ui)if(n.block){let{type:e}=n;e!=oi.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new fi(n.widget||new yi("div"),o,e))}else{let s=Kr.create(n.widget||new yi("span"),o,n.startSide),a=this.atCursorPos&&!s.isEditable&&i<=r.length&&(e<t||n.startSide>0),l=!s.isEditable&&(e<t||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||(this.pendingBuffer=0),this.flushBuffer(r),a&&(c.append(gi(new Yr(1),r),i),i=r.length+Math.max(0,i-r.length)),c.append(gi(s,r),i),this.atCursorPos=l,this.pendingBuffer=l?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}static build(e,t,n,r,i){let s=new mi(e,t,n,i);return s.openEnd=Dn.spans(r,t,n,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function gi(e,t){for(let n of t)e=new qr(n,[e],e.length);return e}class yi extends si{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const bi=Ht.define(),vi=Ht.define(),xi=Ht.define(),wi=Ht.define(),Si=Ht.define(),ki=Ht.define(),Pi=Ht.define({combine:e=>e.some((e=>e))});class Ti{constructor(e,t="nearest",n="nearest",r=5,i=5){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=i}map(e){return e.empty?this:new Ti(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Oi=gn.define({map:(e,t)=>e.map(t)});function Ci(e,t,n){let r=e.facet(wi);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const Ai=Ht.define({combine:e=>!e.length||e[0]});let Ei=0;const Ni=Ht.define();class Mi{constructor(e,t,n,r){this.id=e,this.create=t,this.domEventHandlers=n,this.extension=r(this)}static define(e,t){const{eventHandlers:n,provide:r,decorations:i}=t||{};return new Mi(Ei++,e,n,(e=>{let t=[Ni.of(e)];return i&&t.push(Li.of((t=>{let n=t.plugin(e);return n?i(n):ai.none}))),r&&t.push(r(e)),t}))}static fromClass(e,t){return Mi.define((t=>new e(t)),t)}}class Ii{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(Ci(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Ci(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){Ci(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Di=Ht.define(),Ri=Ht.define(),Li=Ht.define(),_i=Ht.define(),Bi=Ht.define(),Fi=Ht.define();class ji{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new ji(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,i=0,s=0,o=0;;r++){let a=r==e.length?null:e[r],l=s-o,c=a?a.fromB:1e9;for(;i<t.length&&t[i]<c;){let e=t[i],r=t[i+1],s=Math.max(o,e),a=Math.min(c,r);if(s<=a&&new ji(s+l,a+l,s,a).addToSet(n),r>c)break;i+=2}if(!a)return n;new ji(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),s=a.toA,o=a.toB}}}class Vi{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=It.empty(this.startState.doc.length);for(let e of n)this.changes=this.changes.compose(e.changes);let r=[];this.changes.iterChangedRanges(((e,t,n,i)=>r.push(new ji(e,t,n,i)))),this.changedRanges=r;let i=e.hasFocus;i!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=i,this.flags|=1)}static create(e,t,n){return new Vi(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var zi=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(zi||(zi={}));const Ui=zi.LTR,Hi=zi.RTL;function Wi(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const $i=Wi("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),qi=Wi("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Qi=Object.create(null),Ki=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);Qi[t]=n,Qi[n]=-t}const Ji=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class Gi{constructor(e,t,n){this.from=e,this.to=t,this.level=n}get dir(){return this.level%2?Hi:Ui}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let i=-1;for(let s=0;s<e.length;s++){let o=e[s];if(o.from<=t&&o.to>=t){if(o.level==n)return s;(i<0||(0!=r?r<0?o.from<t:o.to>t:e[i].level>o.level))&&(i=s)}}if(i<0)throw new RangeError("Index out of range");return i}}const Xi=[];function Yi(e){return[new Gi(0,e,0)]}let Zi="";function es(e,t,n,r,i){var s;let o=r.head-e.from,a=-1;if(0==o){if(!i||!e.length)return null;t[0].level!=n&&(o=t[0].side(!1,n),a=0)}else if(o==e.length){if(i)return null;let e=t[t.length-1];e.level!=n&&(o=e.side(!0,n),a=t.length-1)}a<0&&(a=Gi.find(t,o,null!==(s=r.bidiLevel)&&void 0!==s?s:-1,r.assoc));let l=t[a];o==l.side(i,n)&&(l=t[a+=i?1:-1],o=l.side(!i,n));let c=i==(l.dir==n),u=wt(e.text,o,c);if(Zi=e.text.slice(Math.min(o,u),Math.max(o,u)),u!=l.side(i,n))return Vt.cursor(u+e.from,c?-1:1,l.level);let h=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return h||l.level==n?h&&h.level<l.level?Vt.cursor(h.side(!i,n)+e.from,i?1:-1,h.level):Vt.cursor(u+e.from,i?-1:1,l.level):Vt.cursor(i?e.to:e.from,i?-1:1,n)}const ts="";class ns{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Cn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ts}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r),this.readNode(r);let e=r.nextSibling;if(e==t)break;let i=Ar.get(r),s=Ar.get(e);(i&&s?i.breakAfter:(i?i.breakAfter:rs(r))||rs(e)&&("BR"!=r.nodeName||r.cmIgnore))&&this.lineBreak(),r=e}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i,s=-1,o=1;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(i=r.exec(t))&&(s=i.index,o=i[0].length),this.append(t.slice(n,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=o-1);n=s+o}}readNode(e){if(e.cmIgnore)return;let t=Ar.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}}function rs(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class is{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class ss extends Ar{constructor(e){super(),this.view=e,this.compositionDeco=ai.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new pi],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ji(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=ai.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){let n=as(e);if(!n)return ai.none;let{from:r,to:i,node:s,text:o}=n,a=t.mapPos(r,1),l=Math.max(a,t.mapPos(i,-1)),{state:c}=e,u=3==s.nodeType?s.nodeValue:new ns([],c).readRange(s.firstChild,null).text;if(l-a<u.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+u.length),ts)==u)l=a+u.length;else{if(c.doc.sliceString(Math.max(0,l-u.length),l,ts)!=u)return ai.none;a=l-u.length}else if(c.doc.sliceString(a,l,ts)!=u)return ai.none;let h=Ar.get(s);return h instanceof Jr?h=h.widget.topView:h&&(h.parent=null),ai.set(ai.replace({widget:new ls(s,o,h),inclusive:!0}).range(a,l))}(this.view,e.changes)),(Wr.ie||Wr.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let n=function(e,t,n){let r=new us;return Dn.compare(e,t,n,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return t=ji.extendWithRanges(t,n),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:n}=this.view;n.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=Wr.chrome||Wr.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(e),this.dirty=0,e&&(e.written||n.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof fi&&e.widget instanceof os&&r.push(e.dom);n.updateGaps(r)}updateChildren(e,t){let n=this.childCursor(t);for(let t=e.length-1;;t--){let r=t>=0?e[t]:null;if(!r)break;let{fromA:i,toA:s,fromB:o,toB:a}=r,{content:l,breakAtStart:c,openStart:u,openEnd:h}=mi.build(this.view.state.doc,o,a,this.decorations,this.dynamicDecorationMap),{i:d,off:p}=n.findPos(s,1),{i:f,off:m}=n.findPos(i,-1);Mr(this,f,m,d,p,l,c,u,h)}}updateSelection(e=!1,t=!1){if(!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection()||Wr.ios&&this.view.inputState.rapidCompositionStart)return;let n=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,i=this.domAtPos(r.anchor),s=r.empty?i:this.domAtPos(r.head);if(Wr.gecko&&r.empty&&1==(o=i).node.nodeType&&o.node.firstChild&&(0==o.offset||"false"==o.node.childNodes[o.offset-1].contentEditable)&&(o.offset==o.node.childNodes.length||"false"==o.node.childNodes[o.offset].contentEditable)){let e=document.createTextNode("");this.view.observer.ignore((()=>i.node.insertBefore(e,i.node.childNodes[i.offset]||null))),i=s=new Or(e,0),n=!0}var o;let a=this.view.observer.selectionRange;!n&&a.focusNode&&dr(i.node,i.offset,a.anchorNode,a.anchorOffset)&&dr(s.node,s.offset,a.focusNode,a.focusOffset)||(this.view.observer.ignore((()=>{Wr.android&&Wr.chrome&&this.dom.contains(a.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=lr(this.root);if(e)if(r.empty){if(Wr.gecko){let e=(t=i.node,n=i.offset,1!=t.nodeType?0:(n&&"false"==t.childNodes[n-1].contentEditable?1:0)|(n<t.childNodes.length&&"false"==t.childNodes[n].contentEditable?2:0));if(e&&3!=e){let t=cs(i.node,i.offset,1==e?1:-1);t&&(i=new Or(t,1==e?0:t.nodeValue.length))}}e.collapse(i.node,i.offset),null!=r.bidiLevel&&null!=a.cursorBidiLevel&&(a.cursorBidiLevel=r.bidiLevel)}else if(e.extend)e.collapse(i.node,i.offset),e.extend(s.node,s.offset);else{let t=document.createRange();r.anchor>r.head&&([i,s]=[s,i]),t.setEnd(s.node,s.offset),t.setStart(i.node,i.offset),e.removeAllRanges(),e.addRange(t)}var t,n})),this.view.observer.setSelectionRange(i,s)),this.impreciseAnchor=i.precise?null:new Or(a.anchorNode,a.anchorOffset),this.impreciseHead=s.precise?null:new Or(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=lr(this.root);if(!(t&&e.empty&&e.assoc&&t.modify))return;let n=pi.find(this,e.head);if(!n)return;let r=n.posAtStart;if(e.head==r||e.head==r+n.length)return;let i=this.coordsAt(e.head,-1),s=this.coordsAt(e.head,1);if(!i||!s||i.bottom>s.top)return;let o=this.domAtPos(e.head+e.assoc);t.collapse(o.node,o.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let e=this.root.activeElement;return e==this.dom||ur(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let e=Ar.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof pi)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){for(let n=this.length,r=this.children.length-1;;r--){let i=this.children[r],s=n-i.breakAfter-i.length;if(e>s||e==s&&i.type!=oi.WidgetBefore&&i.type!=oi.WidgetAfter&&(!r||2==t||this.children[r-1].breakAfter||this.children[r-1].type==oi.WidgetBefore&&t>-2))return i.coordsAt(e-s,t);n=s}}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,i=this.view.contentDOM.clientWidth,s=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==zi.LTR;for(let e=0,l=0;l<this.children.length;l++){let c=this.children[l],u=e+c.length;if(u>r)break;if(e>=n){let n=c.dom.getBoundingClientRect();if(t.push(n.height),s){let t=c.dom.lastChild,r=t?hr(t):[];if(r.length){let t=r[r.length-1],s=a?t.right-n.left:n.right-t.left;s>o&&(o=s,this.minWidth=i,this.minWidthFrom=e,this.minWidthTo=u)}}}e=u+c.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?zi.RTL:zi.LTR}measureTextSize(){for(let e of this.children)if(e instanceof pi){let t=e.measureTextSize();if(t)return t}let e,t,n=document.createElement("div");return n.className="cm-line",n.style.width="99999px",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(n);let r=hr(n.firstChild)[0];e=n.getBoundingClientRect().height,t=r?r.width/27:7,n.remove()})),{lineHeight:e,charWidth:t}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Nr(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let i=r==t.viewports.length?null:t.viewports[r],s=i?i.from-1:this.length;if(s>n){let r=t.lineBlockAt(s).bottom-t.lineBlockAt(n).top;e.push(ai.replace({widget:new os(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,s))}if(!i)break;n=i.to+1}return ai.set(e)}updateDeco(){let e=this.view.state.facet(Li).map(((e,t)=>(this.dynamicDecorationMap[t]="function"==typeof e)?e(this.view):e));for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let i=0,s=0,o=0,a=0;for(let e of this.view.state.facet(Bi).map((e=>e(this.view))))if(e){let{left:t,right:n,top:r,bottom:l}=e;null!=t&&(i=Math.max(i,t)),null!=n&&(s=Math.max(s,n)),null!=r&&(o=Math.max(o,r)),null!=l&&(a=Math.max(a,l))}let l={left:r.left-i,top:r.top-o,right:r.right+s,bottom:r.bottom+a};!function(e,t,n,r,i,s,o,a){let l=e.ownerDocument,c=l.defaultView;for(let u=e;u;)if(1==u.nodeType){let e,h=u==l.body;if(h)e=br(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.parentNode;continue}let t=u.getBoundingClientRect();e={left:t.left,right:t.left+u.clientWidth,top:t.top,bottom:t.top+u.clientHeight}}let d=0,p=0;if("nearest"==i)t.top<e.top?(p=-(e.top-t.top+o),n>0&&t.bottom>e.bottom+p&&(p=t.bottom-e.bottom+p+o)):t.bottom>e.bottom&&(p=t.bottom-e.bottom+o,n<0&&t.top-p<e.top&&(p=-(e.top+p-t.top+o)));else{let r=t.bottom-t.top,s=e.bottom-e.top;p=("center"==i&&r<=s?t.top+r/2-s/2:"start"==i||"center"==i&&n<0?t.top-o:t.bottom-s+o)-e.top}if("nearest"==r?t.left<e.left?(d=-(e.left-t.left+s),n>0&&t.right>e.right+d&&(d=t.right-e.right+d+s)):t.right>e.right&&(d=t.right-e.right+s,n<0&&t.left<e.left+d&&(d=-(e.left+d-t.left+s))):d=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-s:t.right-(e.right-e.left)+s)-e.left,d||p)if(h)c.scrollBy(d,p);else{if(p){let e=u.scrollTop;u.scrollTop+=p,p=u.scrollTop-e}if(d){let e=u.scrollLeft;u.scrollLeft+=d,d=u.scrollLeft-e}t={left:t.left-d,top:t.top-p,right:t.right-d,bottom:t.bottom-p}}if(h)break;u=u.assignedSlot||u.parentNode,r=i="nearest"}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==zi.LTR)}}class os extends si{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function as(e){let t=e.observer.selectionRange,n=t.focusNode&&cs(t.focusNode,t.focusOffset,0);if(!n)return null;let r=e.docView.nearest(n);if(!r)return null;if(r instanceof pi){let e=n;for(;e.parentNode!=r.dom;)e=e.parentNode;let t=e.previousSibling;for(;t&&!Ar.get(t);)t=t.previousSibling;let i=t?Ar.get(t).posAtEnd:r.posAtStart;return{from:i,to:i,node:e,text:n}}{for(;;){let{parent:e}=r;if(!e)return null;if(e instanceof pi)break;r=e}let e=r.posAtStart;return{from:e,to:e+r.length,node:r.dom,text:n}}}class ls extends si{constructor(e,t,n){super(),this.top=e,this.text=t,this.topView=n}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Jr}}function cs(e,t,n){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&n<=0)t=mr(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&n>=0))return null;e=e.childNodes[t],t=0}}}class us{constructor(){this.changes=[]}compareRange(e,t){di(e,t,this.changes)}comparePoint(e,t){di(e,t,this.changes)}}function hs(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function ds(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function ps(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function fs(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function ms(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function gs(e,t,n){let r,i,s,o,a,l,c,u;for(let h=e.firstChild;h;h=h.nextSibling){let e=hr(h);for(let d=0;d<e.length;d++){let p=e[d];i&&ps(i,p)&&(p=fs(ms(p,i.bottom),i.top));let f=hs(t,p),m=ds(n,p);if(0==f&&0==m)return 3==h.nodeType?ys(h,t,n):gs(h,t,n);(!r||o>m||o==m&&s>f)&&(r=h,i=p,s=f,o=m),0==f?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=h,c=p):n<p.top&&(!u||u.top>p.top)&&(l=h,u=p):c&&ps(c,p)?c=ms(c,p.bottom):u&&ps(u,p)&&(u=fs(u,p.top))}}if(c&&c.bottom>=n?(r=a,i=c):u&&u.top<=n&&(r=l,i=u),!r)return{node:e,offset:0};let h=Math.max(i.left,Math.min(i.right,t));return 3==r.nodeType?ys(r,h,n):s||"true"!=r.contentEditable?{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(i.left+i.right)/2?1:0)}:gs(r,h,n)}function ys(e,t,n){let r=e.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let r=kr(e,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.top==c.bottom)continue;o||(o=t-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&u<s){let n=t>=(c.left+c.right)/2,r=n;if((Wr.chrome||Wr.gecko)&&kr(e,a).getBoundingClientRect().left==c.right&&(r=!n),u<=0)return{node:e,offset:a+(r?1:0)};i=a+(r?1:0),s=u}}}return{node:e,offset:i>-1?i:o>0?e.nodeValue.length:0}}function bs(e,{x:t,y:n},r,i=-1){var s;let o,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,u=n-l;if(u<0)return 0;if(u>c)return e.state.doc.length;for(let t=e.defaultLineHeight/2,n=!1;o=e.elementAtHeight(u),o.type!=oi.Text;)for(;u=i>0?o.bottom+t:o.top-t,!(u>=0&&u<=c);){if(n)return r?null:0;n=!0,i=-i}n=l+u;let h=o.from;if(h<e.viewport.from)return 0==e.viewport.from?0:r?null:vs(e,a,o,t,n);if(h>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:vs(e,a,o,t,n);let d=e.dom.ownerDocument,p=e.root.elementFromPoint?e.root:d,f=p.elementFromPoint(t,n);f&&!e.contentDOM.contains(f)&&(f=null),f||(t=Math.max(a.left+1,Math.min(a.right-1,t)),f=p.elementFromPoint(t,n),f&&!e.contentDOM.contains(f)&&(f=null));let m,g=-1;if(f&&0!=(null===(s=e.docView.nearest(f))||void 0===s?void 0:s.isEditable))if(d.caretPositionFromPoint){let e=d.caretPositionFromPoint(t,n);e&&({offsetNode:m,offset:g}=e)}else if(d.caretRangeFromPoint){let e=d.caretRangeFromPoint(t,n);e&&(({startContainer:m,startOffset:g}=e),(Wr.safari&&function(e,t,n){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return kr(e,r-1,r).getBoundingClientRect().left>n}(m,g,t)||Wr.chrome&&function(e,t,n){if(0!=t)return!1;for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}return n-(1==e.nodeType?e.getBoundingClientRect():kr(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect()).left>5}(m,g,t))&&(m=void 0))}if(!m||!e.docView.dom.contains(m)){let r=pi.find(e.docView,h);if(!r)return u>o.top+o.height/2?o.to:o.from;({node:m,offset:g}=gs(r.dom,t,n))}return e.docView.posFromDOM(m,g)}function vs(e,t,n,r,i){let s=Math.round((r-t.left)*e.defaultCharacterWidth);e.lineWrapping&&n.height>1.5*e.defaultLineHeight&&(s+=Math.floor((i-n.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength);let o=e.state.sliceDoc(n.from,n.to);return n.from+function(e,t,n,r){for(let r=0,i=0;;){if(i>=t)return r;if(r==e.length)break;i+=9==e.charCodeAt(r)?n-i%n:1,r=wt(e,r)}return e.length}(o,s,e.state.tabSize)}function xs(e,t,n,r){let i=e.state.doc.lineAt(t.head),s=e.bidiSpans(i),o=e.textDirectionAt(i.from);for(let a=t,l=null;;){let t=es(i,s,o,a,n),c=Zi;if(!t){if(i.number==(n?e.state.doc.lines:1))return a;c="\n",i=e.state.doc.line(i.number+(n?1:-1)),s=e.bidiSpans(i),t=Vt.cursor(n?i.from:i.to)}if(l){if(!l(c))return a}else{if(!r)return t;l=r(c)}a=t}}function ws(e,t,n){let r=e.state.facet(_i).map((t=>t(e)));for(;;){let e=!1;for(let i of r)i.between(n.from-1,n.from+1,((r,i,s)=>{n.from>r&&n.from<i&&(n=t.from>n.from?Vt.cursor(r,1):Vt.cursor(i,-1),e=!0)}));if(!e)return n}}class Ss{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in Cs){let n=Cs[t];e.contentDOM.addEventListener(t,(r=>{Os(e,r)&&!this.ignoreDuringComposition(r)&&("keydown"==t&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,r)?r.preventDefault():n(e,r)))}),As[t]),this.registeredEvents.push(t)}Wr.chrome&&102==Wr.chrome_version&&e.scrollDOM.addEventListener("wheel",(()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout((()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=e.hasFocus,Wr.safari&&e.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var n;let r;this.customHandlers=[];for(let i of t)if(r=null===(n=i.update(e).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:i.value,handlers:r});for(let t in r)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(n=>{Os(e,n)&&this.runCustomHandlers(t,e,n)&&n.preventDefault()})))}}runCustomHandlers(e,t,n){for(let r of this.customHandlers){let i=r.handlers[e];if(i)try{if(i.call(r.plugin,n,t)||n.defaultPrevented)return!0}catch(e){Ci(t.state,e)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,t,e)}catch(t){Ci(e.state,t)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(Wr.android&&Wr.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let n;return!(!Wr.ios||!(n=ks.find((e=>e.keyCode==t.keyCode)))||t.ctrlKey||t.altKey||t.metaKey||t.synthetic||(this.pendingIOSKey=n,setTimeout((()=>this.flushIOSKey(e)),250),0))}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,Pr(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(Wr.safari&&!Wr.ios&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode||"compositionend"==e.type&&!Wr.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const ks=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Ps=[16,17,18,20,91,92,224,225];class Ts{constructor(e,t,n,r){this.view=e,this.style=n,this.mustSelect=r,this.lastEvent=t;let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Cn.allowMultipleSelections)&&function(e,t){let n=e.state.facet(bi);return n.length?n[0](t):Wr.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){let n=e.state.facet(vi);return n.length?n[0](t):Wr.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=lr(e.root);if(!r||0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let e=0;e<i.length;e++){let n=i[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)||1!=Vs(t))&&null,!1===this.dragging&&(t.preventDefault(),this.select(t))}move(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=e)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);!this.mustSelect&&t.eq(this.view.state.selection)&&t.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function Os(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=Ar.get(r))&&n.ignoreEvent(t))return!1;return!0}const Cs=Object.create(null),As=Object.create(null),Es=Wr.ie&&Wr.ie_version<15||Wr.ios&&Wr.webkit_version<604;function Ns(e,t){let n,{state:r}=e,i=1,s=r.toText(t),o=s.lines==r.selection.ranges.length;if(null!=Us&&r.selection.ranges.every((e=>e.empty))&&Us==s.toString()){let e=-1;n=r.changeByRange((n=>{let a=r.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=r.toText((o?s.line(i++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:Vt.cursor(n.from+l.length)}}))}else n=o?r.changeByRange((e=>{let t=s.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:Vt.cursor(e.from+t.length)}})):r.replaceSelection(s);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function Ms(e,t,n,r){if(1==r)return Vt.cursor(t,n);if(2==r)return function(e,t,n=1){let r=e.charCategorizer(t),i=e.doc.lineAt(t),s=t-i.from;if(0==i.length)return Vt.cursor(t);0==s?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=wt(i.text,s,!1):a=wt(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let e=wt(i.text,o,!1);if(r(i.text.slice(e,o))!=l)break;o=e}for(;a<i.length;){let e=wt(i.text,a);if(r(i.text.slice(a,e))!=l)break;a=e}return Vt.range(o+i.from,a+i.from)}(e.state,t,n);{let n=pi.find(e.docView,t),r=e.state.doc.lineAt(n?n.posAtEnd:t),i=n?n.posAtStart:r.from,s=n?n.posAtEnd:r.to;return s<e.state.doc.length&&s==r.to&&s++,Vt.range(i,s)}}Cs.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),27==t.keyCode?e.inputState.lastEscPress=Date.now():Ps.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0)},Cs.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},Cs.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},As.touchstart=As.touchmove={passive:!0},Cs.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3&&1==Vs(t))return;let n=null;for(let r of e.state.facet(xi))if(n=r(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=Ls(e,t),r=Vs(t),i=e.state.selection,s=n,o=t;return{update(e){e.docChanged&&(n&&(n.pos=e.changes.mapPos(n.pos)),i=i.map(e.changes),o=null)},get(t,a,l){let c;if(o&&t.clientX==o.clientX&&t.clientY==o.clientY?c=s:(c=s=Ls(e,t),o=t),!c||!n)return i;let u=Ms(e,c.pos,c.bias,r);if(n.pos!=c.pos&&!a){let t=Ms(e,n.pos,n.bias,r),i=Math.min(t.from,u.from),s=Math.max(t.to,u.to);u=i<u.from?Vt.range(i,s):Vt.range(s,i)}return a?i.replaceRange(i.main.extend(u.from,u.to)):l&&i.ranges.length>1&&i.ranges.some((e=>e.eq(u)))?function(e,t){for(let n=0;;n++)if(e.ranges[n].eq(t))return Vt.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}(i,u):l?i.addRange(u):Vt.create([u])}}}(e,t)),n){let r=e.root.activeElement!=e.contentDOM;r&&e.observer.ignore((()=>Sr(e.contentDOM))),e.inputState.startMouseSelection(new Ts(e,t,n,r))}};let Is=(e,t)=>e>=t.top&&e<=t.bottom,Ds=(e,t,n)=>Is(t,n)&&e>=n.left&&e<=n.right;function Rs(e,t,n,r){let i=pi.find(e.docView,t);if(!i)return 1;let s=t-i.posAtStart;if(0==s)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&Ds(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&Ds(n,r,a)?1:o&&Is(r,o)?-1:1}function Ls(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:Rs(e,n,t.clientX,t.clientY)}}const _s=Wr.ie&&Wr.ie_version<=11;let Bs=null,Fs=0,js=0;function Vs(e){if(!_s)return e.detail;let t=Bs,n=js;return Bs=e,js=Date.now(),Fs=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(Fs+1)%3:1}function zs(e,t,n,r){if(!n)return;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:s}=e.inputState,o=r&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,a={from:i,insert:n},l=e.state.changes(o?[o,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"})}Cs.dragstart=(e,t)=>{let{selection:{main:n}}=e.state,{mouseSelection:r}=e.inputState;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},Cs.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();let r=Array(n.length),i=0,s=()=>{++i==n.length&&zs(e,t,r.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=s,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),s()},t.readAsText(n[e])}}else zs(e,t,t.dataTransfer.getData("Text"),!0)},Cs.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let n=Es?null:t.clipboardData;n?(Ns(e,n.getData("text/plain")),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),Ns(e,n.value)}),50)}(e)};let Us=null;function Hs(e){setTimeout((()=>{e.hasFocus!=e.inputState.notifiedFocused&&e.update([])}),10)}function Ws(e,t){if(e.docView.compositionDeco.size){e.inputState.rapidCompositionStart=t;try{e.update([])}finally{e.inputState.rapidCompositionStart=!1}}}Cs.copy=Cs.cut=(e,t)=>{let{text:n,ranges:r,linewise:i}=function(e){let t=[],n=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let i=-1;for(let{from:r}of e.selection.ranges){let s=e.doc.lineAt(r);s.number>i&&(t.push(s.text),n.push({from:s.from,to:Math.min(e.doc.length,s.to+1)})),i=s.number}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}(e.state);if(!n&&!i)return;Us=i?n:null;let s=Es?null:t.clipboardData;s?(t.preventDefault(),s.clearData(),s.setData("text/plain",n)):function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((()=>{r.remove(),e.focus()}),50)}(e,n),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})},Cs.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),Hs(e)},Cs.blur=e=>{e.observer.clearSelectionRange(),Hs(e)},Cs.compositionstart=Cs.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0,e.docView.compositionDeco.size&&(e.observer.flush(),Ws(e,!0)))},Cs.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,setTimeout((()=>{e.inputState.composing<0&&Ws(e,!1)}),50)},Cs.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Cs.beforeinput=(e,t)=>{var n;let r;if(Wr.chrome&&Wr.android&&(r=ks.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};const $s=["pre-wrap","normal","pre-line","break-spaces"];class qs{constructor(){this.doc=ct.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return $s.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,i){let s=$s.indexOf(e)>-1,o=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=n,this.lineLength=r,o){this.heightSamples={};for(let e=0;e<i.length;e++){let t=i[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return o}}class Qs{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Ks{constructor(e,t,n,r,i){this.from=e,this.length=t,this.top=n,this.height=r,this.type=i}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Ks(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Js=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(Js||(Js={}));const Gs=.001;class Xs{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Gs&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return Xs.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let i=this;for(let s=r.length-1;s>=0;s--){let{fromA:o,toA:a,fromB:l,toB:c}=r[s],u=i.lineAt(o,Js.ByPosNoHeight,t,0,0),h=u.to>=a?u:i.lineAt(a,Js.ByPosNoHeight,t,0,0);for(c+=h.to-a,a=h.to;s>0&&u.from<=r[s-1].toA;)o=r[s-1].fromA,l=r[s-1].fromB,s--,o<u.from&&(u=i.lineAt(o,Js.ByPosNoHeight,t,0,0));l+=u.from-o,o=u.from;let d=ro.build(n,e,l,c);i=i.replace(o,a,d)}return i.updateHeight(n,0)}static empty(){return new Zs(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,i=0;for(;;)if(t==n)if(r>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,i-=t.size}}else if(r<i){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(i+=t.size)}let s=0;return null==e[t-1]?(s=1,t--):null==e[t]&&(s=1,n++),new to(Xs.of(e.slice(0,t)),s,Xs.of(e.slice(n)))}}Xs.prototype.size=1;class Ys extends Xs{constructor(e,t,n){super(e,t),this.type=n}blockAt(e,t,n,r){return new Ks(r,this.length,n,this.height,this.type)}lineAt(e,t,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(e,t,n,r,i,s){e<=i+this.length&&t>=i&&s(this.blockAt(0,n,r,i))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Zs extends Ys{constructor(e,t){super(e,t,oi.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof Zs||r instanceof eo&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof eo?r=new Zs(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Xs.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class eo extends Xs{constructor(e){super(e,0)}lines(e,t){let n=e.lineAt(t).number,r=e.lineAt(t+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}blockAt(e,t,n,r){let{firstLine:i,lastLine:s,lineHeight:o}=this.lines(t,r),a=Math.max(0,Math.min(s-i,Math.floor((e-n)/o))),{from:l,length:c}=t.line(i+a);return new Ks(l,c,n+o*a,o,oi.Text)}lineAt(e,t,n,r,i){if(t==Js.ByHeight)return this.blockAt(e,n,r,i);if(t==Js.ByPosNoHeight){let{from:t,to:r}=n.lineAt(e);return new Ks(t,r-t,0,0,oi.Text)}let{firstLine:s,lineHeight:o}=this.lines(n,i),{from:a,length:l,number:c}=n.lineAt(e);return new Ks(a,l,r+o*(c-s),o,oi.Text)}forEachLine(e,t,n,r,i,s){let{firstLine:o,lineHeight:a}=this.lines(n,i);for(let l=Math.max(e,i),c=Math.min(i+this.length,t);l<=c;){let t=n.lineAt(l);l==e&&(r+=a*(t.number-o)),s(new Ks(t.from,t.length,r,a,oi.Text)),r+=a,l=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof eo?n[n.length-1]=new eo(e.length+r):n.push(null,new eo(r-1))}if(e>0){let t=n[0];t instanceof eo?n[0]=new eo(e+t.length):n.unshift(new eo(e-1),null)}return Xs.of(n)}decomposeLeft(e,t){t.push(new eo(e-1),null)}decomposeRight(e,t){t.push(null,new eo(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let i=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],s=Math.max(t,r.from),o=-1,a=e.heightChanged;for(r.from>t&&n.push(new eo(r.from-t-1).updateHeight(e,t));s<=i&&r.more;){let t=e.doc.lineAt(s).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==o?o=i:Math.abs(i-o)>=Gs&&(o=-2);let a=new Zs(t,i);a.outdated=!1,n.push(a),s+=t+1}s<=i&&n.push(null,new eo(i-s).updateHeight(e,s));let l=Xs.of(n);return e.heightChanged=a||o<0||Math.abs(l.height-this.height)>=Gs||Math.abs(o-this.lines(e.doc,t).lineHeight)>=Gs,l}return(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class to extends Xs{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}lineAt(e,t,n,r,i){let s=r+this.left.height,o=i+this.left.length+this.break,a=t==Js.ByHeight?e<s:e<o,l=a?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,s,o);if(this.break||(a?l.to<o:l.from>o))return l;let c=t==Js.ByPosNoHeight?Js.ByPosNoHeight:Js.ByPos;return a?l.join(this.right.lineAt(o,c,n,s,o)):this.left.lineAt(o,c,n,r,i).join(l)}forEachLine(e,t,n,r,i,s){let o=r+this.left.height,a=i+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,i,s),t>=a&&this.right.forEachLine(e,t,n,o,a,s);else{let l=this.lineAt(a,Js.ByPos,n,r,i);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,i,s),l.to>=e&&l.from<=t&&s(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,o,a,s)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let i=[];e>0&&this.decomposeLeft(e,i);let s=i.length;for(let e of n)i.push(e);if(e>0&&no(i,s-1),t<this.length){let e=i.length;this.decomposeRight(t,i),no(i,e)}return Xs.of(i)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Xs.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:i,right:s}=this,o=t+i.length+this.break,a=null;return r&&r.from<=t+i.length&&r.more?a=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=o+s.length&&r.more?a=s=s.updateHeight(e,o,n,r):s.updateHeight(e,o,n),a?this.balanced(i,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function no(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof eo&&(r=e[t+1])instanceof eo&&e.splice(t-1,3,new eo(n.length+1+r.length))}class ro{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Zs?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new Zs(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let i=t-e;n.block?this.addBlock(new Ys(i,r,n.type)):(i||r>=5)&&this.addLineDeco(r,i)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Zs(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new eo(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Zs)return e;let t=new Zs(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type!=oi.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=oi.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let n=this.ensureLine();n.length+=t,n.collapsed+=t,n.widgetHeight=Math.max(n.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Zs||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Zs(0,-1));let n=e;for(let e of this.nodes)e instanceof Zs&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,r){let i=new ro(n,e);return Dn.spans(t,n,r,i,0),i.finish(n)}}class io{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&di(e,t,this.changes,5)}}function so(e,t){let n=e.getBoundingClientRect(),r=Math.max(0,n.left),i=Math.min(innerWidth,n.right),s=Math.max(0,n.top),o=Math.min(innerHeight,n.bottom),a=e.ownerDocument.body;for(let t=e.parentNode;t&&t!=a;)if(1==t.nodeType){let e=t,n=window.getComputedStyle(e);if((e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&"visible"!=n.overflow){let t=e.getBoundingClientRect();r=Math.max(r,t.left),i=Math.min(i,t.right),s=Math.max(s,t.top),o=Math.min(o,t.bottom)}t="absolute"==n.position||"fixed"==n.position?e.offsetParent:e.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:r-n.left,right:Math.max(r,i)-n.left,top:s-(n.top+t),bottom:Math.max(s,o)-(n.top+t)}}function oo(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class ao{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(e){return ai.replace({widget:new lo(this.size,e)}).range(this.from,this.to)}}class lo extends si{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class co{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new qs,this.scaler=yo,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=zi.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(Li).filter((e=>"function"!=typeof e)),this.heightMap=Xs.empty().applyChanges(this.stateDeco,ct.empty,this.heightOracle.setDoc(e.doc),[new ji(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ai.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some((({from:e,to:t})=>r>=e&&r<=t))){let{from:t,to:n}=this.lineBlockAt(r);e.push(new uo(t,n))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?yo:new bo(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:vo(e,this.scaler))}))}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Li).filter((e=>"function"!=typeof e));let r=e.changedRanges,i=ji.extendWithRanges(r,function(e,t,n){let r=new io;return Dn.compare(e,t,n,r,0),r.changes}(n,this.stateDeco,e?e.changes:It.empty(this.state.doc.length))),s=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=s&&(e.flags|=2);let o=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<o.from||t.range.head>o.to)||!this.viewportIsAppropriate(o))&&(o=this.getViewport(0,t));let a=!e.changes.empty||2&e.flags||o.from!=this.viewport.from||o.to!=this.viewport.to;this.viewport=o,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?zi.RTL:zi.LTR;let s=this.heightOracle.mustRefreshForWrapping(i),o=s||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,l=0,c=parseInt(n.paddingTop)||0,u=parseInt(n.paddingBottom)||0;this.paddingTop==c&&this.paddingBottom==u||(this.paddingTop=c,this.paddingBottom=u,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(o=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let h=(this.printing?oo:so)(t,this.paddingTop),d=h.top-this.pixelViewport.top,p=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;let f=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(f!=this.inView&&(this.inView=f,f&&(o=!0)),!this.inView)return 0;let m=t.clientWidth;if(this.contentDOMWidth==m&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=m,this.editorHeight=e.scrollDOM.clientHeight,a|=8),o){let t=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(t)&&(s=!0),s||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:o}=e.docView.measureTextSize();s=r.refresh(i,n,o,m/o,t),s&&(e.docView.minWidth=0,a|=8)}d>0&&p>0?l=Math.max(d,p):d<0&&p<0&&(l=Math.min(d,p)),r.heightChanged=!1;for(let n of this.viewports){let i=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=this.heightMap.updateHeight(r,0,s,new Qs(n.from,i))}r.heightChanged&&(a|=2)}let g=!this.viewportIsAppropriate(this.viewport,l)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return g&&(this.viewport=this.getViewport(l,this.scrollTarget)),this.updateForViewport(),(2&a||g)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.state.doc,{visibleTop:s,visibleBottom:o}=this,a=new uo(r.lineAt(s-1e3*n,Js.ByHeight,i,0,0).from,r.lineAt(o+1e3*(1-n),Js.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,s=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),o=r.lineAt(e,Js.ByPos,i,0,0);n="center"==t.y?(o.top+o.bottom)/2-s/2:"start"==t.y||"nearest"==t.y&&e<a.from?o.top:o.bottom-s,a=new uo(r.lineAt(n-500,Js.ByHeight,i,0,0).from,r.lineAt(n+s+500,Js.ByHeight,i,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new uo(this.heightMap.lineAt(n,Js.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,Js.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Js.ByPos,this.state.doc,0,0),{bottom:i}=this.heightMap.lineAt(t,Js.ByPos,this.state.doc,0,0),{visibleTop:s,visibleBottom:o}=this;return(0==e||r<=s-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||i>=o+Math.max(10,Math.min(n,250)))&&r>s-2e3&&i<o+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new ao(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=zi.LTR)return t;for(let n of this.viewportLines){if(n.length<4e3)continue;let r,i,s=ho(n.from,n.to,this.stateDeco);if(s.total<4e3)continue;if(this.heightOracle.lineWrapping){let e=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;r=po(s,(this.visibleTop-n.top-e)/n.height),i=po(s,(this.visibleBottom-n.top+e)/n.height)}else{let e=s.total*this.heightOracle.charWidth,t=2e3*this.heightOracle.charWidth;r=po(s,(this.pixelViewport.left-t)/e),i=po(s,(this.pixelViewport.right+t)/e)}let o=[];r>n.from&&o.push({from:n.from,to:r}),i<n.to&&o.push({from:i,to:n.to});let a=this.state.selection.main;a.from>=n.from&&a.from<=n.to&&mo(o,a.from-10,a.from+10),!a.empty&&a.to>=n.from&&a.to<=n.to&&mo(o,a.to-10,a.to+10);for(let{from:r,to:i}of o)i-r>1e3&&t.push(go(e,(e=>e.from>=n.from&&e.to<=n.to&&Math.abs(e.from-r)<1e3&&Math.abs(e.to-i)<1e3))||new ao(r,i,this.gapSize(n,r,i,s)))}return t}gapSize(e,t,n,r){let i=fo(r,n)-fo(r,t);return this.heightOracle.lineWrapping?e.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(e){ao.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ai.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Dn.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||vo(this.heightMap.lineAt(e,Js.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return vo(this.heightMap.lineAt(this.scaler.fromDOM(e),Js.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return vo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class uo{constructor(e,t){this.from=e,this.to=t}}function ho(e,t,n){let r=[],i=e,s=0;return Dn.spans(n,e,t,{span(){},point(e,t){e>i&&(r.push({from:i,to:e}),s+=e-i),i=t}},20),i<t&&(r.push({from:i,to:t}),s+=t-i),{total:s,ranges:r}}function po({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:i}=t[e],s=i-n;if(r<=s)return n+r;r-=s}}function fo(e,t){let n=0;for(let{from:r,to:i}of e.ranges){if(t<=i){n+=t-r;break}n+=i-r}return n/e.total}function mo(e,t,n){for(let r=0;r<e.length;r++){let i=e[r];if(i.from<n&&i.to>t){let s=[];i.from<t&&s.push({from:i.from,to:t}),i.to>n&&s.push({from:n,to:i.to}),e.splice(r,1,...s),r+=s.length-1}}}function go(e,t){for(let n of e)if(t(n))return n}const yo={toDOM:e=>e,fromDOM:e=>e,scale:1};class bo{constructor(e,t,n){let r=0,i=0,s=0;this.viewports=n.map((({from:n,to:i})=>{let s=t.lineAt(n,Js.ByPos,e,0,0).top,o=t.lineAt(i,Js.ByPos,e,0,0).bottom;return r+=o-s,{from:n,to:i,top:s,bottom:o,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(t.height-r);for(let e of this.viewports)e.domTop=s+(e.top-i)*this.scale,s=e.domBottom=e.domTop+(e.bottom-e.top),i=e.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return r+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,r=i.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-r)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,r=i.domBottom}}}function vo(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new Ks(e.from,e.length,n,r-n,Array.isArray(e.type)?e.type.map((e=>vo(e,t))):e.type)}const xo=Ht.define({combine:e=>e.join(" ")}),wo=Ht.define({combine:e=>e.indexOf(!0)>-1}),So=Jn.newName(),ko=Jn.newName(),Po=Jn.newName(),To={"&light":"."+ko,"&dark":"."+Po};function Oo(e,t,n){return new Jn(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]})):e+" "+t})}const Co=Oo("."+So,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},To),Ao={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Eo=Wr.ie&&Wr.ie_version<=11;class No{constructor(e,t,n){this.view=e,this.onChange=t,this.onScrollChanged=n,this.active=!1,this.selectionRange=new vr,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(Wr.ie&&Wr.ie_version<=11||Wr.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),Eo&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver((()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()})),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,n=this.selectionRange;if(t.state.facet(Ai)?t.root.activeElement!=this.dom:!ur(t.dom,n))return;let r=n.anchorNode&&t.docView.nearest(n.anchorNode);r&&r.ignoreEvent(e)||((Wr.ie&&Wr.ie_version<=11||Wr.android&&Wr.chrome)&&!t.state.selection.main.empty&&n.focusNode&&dr(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{view:e}=this,t=Wr.safari&&11==e.root.nodeType&&function(){let e=document.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}()==this.dom&&function(e){let t=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let r=t.startContainer,i=t.startOffset,s=t.endContainer,o=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);return dr(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}(this.view)||lr(e.root);if(!t||this.selectionRange.eq(t))return!1;let n=ur(this.dom,t);return n&&!this.selectionChanged&&this.selectionRange.focusNode&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let n=t.focusNode,r=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=r)return!1;for(;;)if(r){if(1!=n.nodeType)return!1;let e=n.childNodes[r-1];"false"==e.contentEditable?r--:(n=e,r=mr(n))}else{if(n==e)return!0;r=pr(n),n=n.parentNode}}(this.dom,t)?(e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Ao),Eo&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Eo&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame((()=>{let e=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||Pr(this.dom,e.key,e.keyCode)})),this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((()=>{this.delayedFlush=-1,this.flush()}),20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let t of this.observer.takeRecords())e.push(t);e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let i of e){let e=this.readMutation(i);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&ur(this.dom,this.selectionRange);if(t<0&&!i)return;this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=this.view.state,o=this.onChange(t,n,r);return this.view.state==s&&this.view.update([]),o}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let n=Mo(t,e.previousSibling||e.target.previousSibling,-1),r=Mo(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resize)||void 0===n||n.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function Mo(e,t,n){for(;t;){let r=Ar.get(t);if(r&&r.parent==e)return r;let i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}class Io{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this.root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new co(e.state||Cn.create(e)),this.plugins=this.state.facet(Ni).map((e=>new Ii(e)));for(let e of this.plugins)e.update(this);this.observer=new No(this,((e,t,n)=>function(e,t,n,r){let i,s,o=e.state.selection.main;if(t>-1){let r=e.docView.domBoundsAround(t,n,0);if(!r||e.state.readOnly)return!1;let{from:a,to:l}=r,c=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=e.observer.selectionRange;return n&&(t.push(new is(n,r)),i==n&&s==r||t.push(new is(i,s))),t}(e),u=new ns(c,e.state);u.readRange(r.startDOM,r.endDOM);let h=o.from,d=null;(8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100||Wr.android&&u.text.length<l-a)&&(h=o.to,d="end");let p=function(e,t,n,r){let i=Math.min(e.length,t.length),s=0;for(;s<i&&e.charCodeAt(s)==t.charCodeAt(s);)s++;if(s==i&&e.length==t.length)return null;let o=e.length,a=t.length;for(;o>0&&a>0&&e.charCodeAt(o-1)==t.charCodeAt(a-1);)o--,a--;return"end"==r&&(n-=o+Math.max(0,s-Math.min(o,a))-s),o<s&&e.length<t.length?(s-=n<=s&&n>=o?s-n:0,a=s+(a-o),o=s):a<s&&(s-=n<=s&&n>=a?s-n:0,o=s+(o-a),a=s),{from:s,toA:o,toB:a}}(e.state.doc.sliceString(a,l,ts),u.text,h-a,d);p&&(Wr.chrome&&13==e.inputState.lastKeyCode&&p.toB==p.from+2&&""==u.text.slice(p.from,p.toB)&&p.toB--,i={from:a+p.from,to:a+p.toA,insert:ct.of(u.text.slice(p.from,p.toB).split(ts))}),s=function(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?Vt.single(n+t,r+t):null}(c,a)}else if(e.hasFocus||!e.state.facet(Ai)){let t=e.observer.selectionRange,{impreciseHead:n,impreciseAnchor:r}=e.docView,i=n&&n.node==t.focusNode&&n.offset==t.focusOffset||!cr(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),a=r&&r.node==t.anchorNode&&r.offset==t.anchorOffset||!cr(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);i==o.head&&a==o.anchor||(s=Vt.single(a,i))}if(!i&&!s)return!1;if(!i&&r&&!o.empty&&s&&s.main.empty?i={from:o.from,to:o.to,insert:e.state.doc.slice(o.from,o.to)}:i&&i.from>=o.from&&i.to<=o.to&&(i.from!=o.from||i.to!=o.to)&&o.to-o.from-(i.to-i.from)<=4?i={from:o.from,to:o.to,insert:e.state.doc.slice(o.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,o.to))}:(Wr.mac||Wr.android)&&i&&i.from==i.to&&i.from==o.head-1&&"."==i.insert.toString()&&(i={from:o.from,to:o.to,insert:ct.of([" "])}),i){let t=e.state;if(Wr.ios&&e.inputState.flushIOSKey(e))return!0;if(Wr.android&&(i.from==o.from&&i.to==o.to&&1==i.insert.length&&2==i.insert.lines&&Pr(e.contentDOM,"Enter",13)||i.from==o.from-1&&i.to==o.to&&0==i.insert.length&&Pr(e.contentDOM,"Backspace",8)||i.from==o.from&&i.to==o.to+1&&0==i.insert.length&&Pr(e.contentDOM,"Delete",46)))return!0;let n,r=i.insert.toString();if(e.state.facet(ki).some((t=>t(e,i.from,i.to,r))))return!0;if(e.inputState.composing>=0&&e.inputState.composing++,i.from>=o.from&&i.to<=o.to&&i.to-i.from>=(o.to-o.from)/3&&(!s||s.main.empty&&s.main.from==i.from+i.insert.length)&&e.inputState.composing<0){let r=o.from<i.from?t.sliceDoc(o.from,i.from):"",s=o.to>i.to?t.sliceDoc(i.to,o.to):"";n=t.replaceSelection(e.state.toText(r+i.insert.sliceString(0,void 0,e.state.lineBreak)+s))}else{let r=t.changes(i),a=s&&!t.selection.main.eq(s.main)&&s.main.to<=r.newLength?s.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&i.to<=o.to&&i.to>=o.to-10){let s=e.state.sliceDoc(i.from,i.to),l=as(e)||e.state.doc.lineAt(o.head),c=o.to-i.to,u=o.to-o.from;n=t.changeByRange((n=>{if(n.from==o.from&&n.to==o.to)return{changes:r,range:a||n.map(r)};let h=n.to-c,d=h-s.length;if(n.to-n.from!=u||e.state.sliceDoc(d,h)!=s||l&&n.to>=l.from&&n.from<=l.to)return{range:n};let p=t.changes({from:d,to:h,insert:i.insert}),f=n.to-o.to;return{changes:p,range:a?Vt.range(Math.max(0,a.anchor+f),Math.max(0,a.head+f)):n.map(p)}}))}else n={changes:r,selection:a&&t.selection.replaceRange(a)}}let a="input.type";return e.composing&&(a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(n,{scrollIntoView:!0,userEvent:a}),!0}if(s&&!s.main.eq(o)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:s,scrollIntoView:t,userEvent:n}),!0}return!1}(this,e,t,n)),(e=>{this.inputState.runScrollHandlers(this,e),this.observer.intersecting&&this.measure()})),this.inputState=new Ss(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new ss(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(1==e.length&&e[0]instanceof yn?e[0]:this.state.update(...e))}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,r=!1,i=this.state;for(let t of e){if(t.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=t.state}if(this.destroyed)return void(this.viewState.state=i);if(this.observer.clear(),i.facet(Cn.phrases)!=this.state.facet(Cn.phrases))return this.setState(i);t=Vi.create(this,i,e);let s=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(s&&(s=s.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;s=new Ti(e.empty?e:Vt.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(Oi)&&(s=e.value)}this.viewState.update(t,s),this.bidiCache=Lo.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(Fi)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(xo)!=t.state.facet(xo)&&(this.viewState.mustMeasureContent=!0),(n||r||s||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let e of this.state.facet(Si))e(t)}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new co(e),this.plugins=e.facet(Ni).map((e=>new Ii(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new ss(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Ni),n=e.state.facet(Ni);if(t!=n){let r=[];for(let i of n){let n=t.indexOf(i);if(n<0)r.push(new Ii(i));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null;try{for(let e=0;;e++){this.updateState=1;let n=this.viewport,r=this.viewState.measure(this);if(!r&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let i=[];4&r||([this.measureRequests,i]=[i,this.measureRequests]);let s=i.map((e=>{try{return e.read(this)}catch(e){return Ci(this.state,e),Ro}})),o=Vi.create(this,this.state,[]),a=!1,l=!1;o.flags|=r,t?t.flags|=r:t=o,this.updateState=2,o.empty||(this.updatePlugins(o),this.inputState.update(o),this.updateAttrs(),a=this.docView.update(o));for(let e=0;e<i.length;e++)if(s[e]!=Ro)try{let t=i[e];t.write&&t.write(s[e],this)}catch(e){Ci(this.state,e)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=!0),a&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!l&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(Si))e(t)}get themeClasses(){return So+" "+(this.state.facet(wo)?Po:ko)+" "+this.state.facet(xo)}updateAttrs(){let e=_o(this,Di,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ai)?"true":"false",class:"cm-content",style:`${Wr.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),_o(this,Ri,t);let n=this.observer.ignore((()=>{let n=ii(this.contentDOM,this.contentAttrs,t),r=ii(this.dom,this.editorAttrs,e);return n||r}));return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)e.is(Io.announce)&&(t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value)}mountStyles(){this.styleModules=this.state.facet(Fi),Jn.mount(this.root,this.styleModules.concat(Co).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((()=>this.measure()))),e){if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return ws(this,e,xs(this,e,t,n))}moveByGroup(e,t){return ws(this,e,xs(this,e,t,(t=>function(e,t,n){let r=e.state.charCategorizer(t),i=r(n);return e=>{let t=r(e);return i==Pn.Space&&(i=t),i==t}}(this,e.head,t))))}moveToLineBoundary(e,t,n=!0){return function(e,t,n,r){let i=e.state.doc.lineAt(t.head),s=r&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(s){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(i.from),o=e.posAtCoords({x:n==(r==zi.LTR)?t.right-1:t.left+1,y:(s.top+s.bottom)/2});if(null!=o)return Vt.cursor(o,n?-1:1)}let o=pi.find(e.docView,t.head),a=o?n?o.posAtEnd:o.posAtStart:n?i.to:i.from;return Vt.cursor(a,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return ws(this,e,function(e,t,n,r){let i=t.head,s=n?1:-1;if(i==(n?e.state.doc.length:0))return Vt.cursor(i,t.assoc);let o,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(i),u=e.documentTop;if(c)null==a&&(a=c.left-l.left),o=s<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(i);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),o=(s<0?t.top:t.bottom)+u}let h=l.left+a,d=null!=r?r:e.defaultLineHeight>>1;for(let n=0;;n+=10){let r=o+(d+n)*s,c=bs(e,{x:h,y:r},!1,s);if(r<l.top||r>l.bottom||(s<0?c<i:c>i))return Vt.cursor(c,t.assoc,void 0,a)}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),bs(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),i=this.bidiSpans(r);return yr(n,i[Gi.find(i,e-r.from,-1,t)].dir==zi.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Pi)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Do)return Yi(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let n=function(e,t){let n=e.length,r=t==Ui?1:2,i=t==Ui?2:1;if(!e||1==r&&!Ji.test(e))return Yi(n);for(let t=0,i=r,o=r;t<n;t++){let n=(s=e.charCodeAt(t))<=247?$i[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?qi[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8203||8204==s?256:1;512==n?n=i:8==n&&4==o&&(n=16),Xi[t]=4==n?2:n,7&n&&(o=n),i=n}var s;for(let e=0,t=r,i=r;e<n;e++){let r=Xi[e];if(128==r)e<n-1&&t==Xi[e+1]&&24&t?r=Xi[e]=t:Xi[e]=256;else if(64==r){let r=e+1;for(;r<n&&64==Xi[r];)r++;let s=e&&8==t||r<n&&8==Xi[r]?1==i?1:8:256;for(let t=e;t<r;t++)Xi[t]=s;e=r-1}else 8==r&&1==i&&(Xi[e]=1);t=r,7&r&&(i=r)}for(let t,s,o,a=0,l=0,c=0;a<n;a++)if(s=Qi[t=e.charCodeAt(a)])if(s<0){for(let e=l-3;e>=0;e-=3)if(Ki[e+1]==-s){let t=Ki[e+2],n=2&t?r:4&t?1&t?i:r:0;n&&(Xi[a]=Xi[Ki[e]]=n),l=e;break}}else{if(189==Ki.length)break;Ki[l++]=a,Ki[l++]=t,Ki[l++]=c}else if(2==(o=Xi[a])||1==o){let e=o==r;c=e?0:1;for(let t=l-3;t>=0;t-=3){let n=Ki[t+2];if(2&n)break;if(e)Ki[t+2]|=2;else{if(4&n)break;Ki[t+2]|=4}}}for(let e=0;e<n;e++)if(256==Xi[e]){let t=e+1;for(;t<n&&256==Xi[t];)t++;let i=1==(e?Xi[e-1]:r),s=i==(1==(t<n?Xi[t]:r))?i?1:2:r;for(let n=e;n<t;n++)Xi[n]=s;e=t-1}let o=[];if(1==r)for(let e=0;e<n;){let t=e,r=1!=Xi[e++];for(;e<n&&r==(1!=Xi[e]);)e++;if(r)for(let n=e;n>t;){let e=n,r=2!=Xi[--n];for(;n>t&&r==(2!=Xi[n-1]);)n--;o.push(new Gi(n,e,r?2:1))}else o.push(new Gi(t,e,0))}else for(let e=0;e<n;){let t=e,r=2==Xi[e++];for(;e<n&&r==(2==Xi[e]);)e++;o.push(new Gi(t,e,r?1:2))}return o}(e.text,t);return this.bidiCache.push(new Lo(e.from,e.to,t,n)),n}get hasFocus(){var e;return(document.hasFocus()||Wr.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Sr(this.contentDOM),this.docView.updateSelection()}))}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Oi.of(new Ti("number"==typeof e?Vt.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Mi.define((()=>({})),{eventHandlers:e})}static theme(e,t){let n=Jn.newName(),r=[xo.of(n),Fi.of(Oo(`.${n}`,e))];return t&&t.dark&&r.push(wo.of(!0)),r}static baseTheme(e){return Yt.lowest(Fi.of(Oo("."+So,e,To)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&Ar.get(n)||Ar.get(e);return(null===(t=null==r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}}Io.styleModule=Fi,Io.inputHandler=ki,Io.perLineTextDirection=Pi,Io.exceptionSink=wi,Io.updateListener=Si,Io.editable=Ai,Io.mouseSelectionStyle=xi,Io.dragMovesSelection=vi,Io.clickAddsSelectionRange=bi,Io.decorations=Li,Io.atomicRanges=_i,Io.scrollMargins=Bi,Io.darkTheme=wo,Io.contentAttributes=Ri,Io.editorAttributes=Di,Io.lineWrapping=Io.contentAttributes.of({class:"cm-lineWrapping"}),Io.announce=gn.define();const Do=4096,Ro={};class Lo{constructor(e,t,n,r){this.from=e,this.to=t,this.dir=n,this.order=r}static update(e,t){if(t.empty)return e;let n=[],r=e.length?e[e.length-1].dir:zi.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let s=e[i];s.dir!=r||t.touchesRange(s.from,s.to)||n.push(new Lo(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.order))}return n}}function _o(e,t,n){for(let r=e.state.facet(t),i=r.length-1;i>=0;i--){let t=r[i],s="function"==typeof t?t(e):t;s&&ni(s,n)}return n}const Bo=Wr.mac?"mac":Wr.windows?"win":Wr.linux?"linux":"key";function Fo(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const jo=Yt.default(Io.domEventHandlers({keydown:(e,t)=>function(e,t,n,r){let i=function(e){var t=!(sr&&(e.ctrlKey||e.altKey||e.metaKey)||(tr||ir)&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?Zn:Yn)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),s=Ot(i,0),o=At(s)==i.length&&" "!=i,a="",l=!1;Uo&&Uo.view==n&&Uo.scope==r&&(a=Uo.prefix+" ",(l=Ps.indexOf(t.keyCode)<0)&&(Uo=null));let c,u=e=>{if(e){for(let t of e.commands)if(t(n))return!0;e.preventDefault&&(l=!0)}return!1},h=e[r];if(h){if(u(h[a+Fo(i,t,!o)]))return!0;if(o&&(t.shiftKey||t.altKey||t.metaKey||s>127)&&(c=Yn[t.keyCode])&&c!=i){if(u(h[a+Fo(c,t,!0)]))return!0;if(t.shiftKey&&Zn[t.keyCode]!=c&&u(h[a+Fo(Zn[t.keyCode],t,!1)]))return!0}else if(o&&t.shiftKey&&u(h[a+Fo(i,t,!0)]))return!0}return l}(function(e){let t=e.facet(Vo),n=zo.get(t);return n||zo.set(t,n=function(e,t=Bo){let n=Object.create(null),r=Object.create(null),i=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},s=(e,r,s,o)=>{let a=n[e]||(n[e]=Object.create(null)),l=r.split(/ (?!$)/).map((e=>function(e,t){const n=e.split(/-(?!$)/);let r,i,s,o,a=n[n.length-1];"Space"==a&&(a=" ");for(let e=0;e<n.length-1;++e){const a=n[e];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==t?o=!0:i=!0}}return r&&(a="Alt-"+a),i&&(a="Ctrl-"+a),o&&(a="Meta-"+a),s&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<l.length;t++){let n=l.slice(0,t).join(" ");i(n,!0),a[n]||(a[n]={preventDefault:!0,commands:[t=>{let r=Uo={view:t,prefix:n,scope:e};return setTimeout((()=>{Uo==r&&(Uo=null)}),4e3),!0}]})}let c=l.join(" ");i(c,!1);let u=a[c]||(a[c]={preventDefault:!1,commands:[]});u.commands.push(s),o&&(u.preventDefault=!0)};for(let n of e){let e=n[t]||n.key;if(e)for(let t of n.scope?n.scope.split(" "):["editor"])s(t,e,n.run,n.preventDefault),n.shift&&s(t,"Shift-"+e,n.shift,n.preventDefault)}return n}(t.reduce(((e,t)=>e.concat(t)),[]))),n}(t.state),e,t,"editor")})),Vo=Ht.define({enables:jo}),zo=new WeakMap;let Uo=null;const Ho=!Wr.ios,Wo=Ht.define({combine:e=>An(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function $o(e={}){return[Wo.of(e),Qo,Jo]}class qo{constructor(e,t,n,r,i){this.left=e,this.top=t,this.width=n,this.height=r,this.className=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const Qo=Mi.fromClass(class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=e.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Wo).cursorBlinkRate+"ms"}update(e){let t=e.startState.facet(Wo)!=e.state.facet(Wo);(t||e.selectionSet||e.geometryChanged||e.viewportChanged)&&this.view.requestMeasure(this.measureReq),e.transactions.some((e=>e.scrollIntoView))&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),t&&this.setBlinkRate()}readPos(){let{state:e}=this.view,t=e.facet(Wo),n=e.selection.ranges.map((e=>e.empty?[]:function(e,t){if(t.to<=e.viewport.from||t.from>=e.viewport.to)return[];let n=Math.max(t.from,e.viewport.from),r=Math.min(t.to,e.viewport.to),i=e.textDirection==zi.LTR,s=e.contentDOM,o=s.getBoundingClientRect(),a=Go(e),l=window.getComputedStyle(s.firstChild),c=o.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),u=o.right-parseInt(l.paddingRight),h=Yo(e,n),d=Yo(e,r),p=h.type==oi.Text?h:null,f=d.type==oi.Text?d:null;if(e.lineWrapping&&(p&&(p=Xo(e,n,p)),f&&(f=Xo(e,r,f))),p&&f&&p.from==f.from)return g(y(t.from,t.to,p));{let n=p?y(t.from,null,p):b(h,!1),r=f?y(null,t.to,f):b(d,!0),i=[];return(p||h).to<(f||d).from-1?i.push(m(c,n.bottom,u,r.top)):n.bottom<r.top&&e.elementAtHeight((n.bottom+r.top)/2).type==oi.Text&&(n.bottom=r.top=(n.bottom+r.top)/2),g(n).concat(i).concat(g(r))}function m(e,t,n,r){return new qo(e-a.left,t-a.top-.01,n-e,r-t+.01,"cm-selectionBackground")}function g({top:e,bottom:t,horizontal:n}){let r=[];for(let i=0;i<n.length;i+=2)r.push(m(n[i],e,n[i+1],t));return r}function y(t,n,r){let s=1e9,o=-1e9,a=[];function l(t,n,l,h,d){let p=e.coordsAtPos(t,t==r.to?-2:2),f=e.coordsAtPos(l,l==r.from?2:-2);s=Math.min(p.top,f.top,s),o=Math.max(p.bottom,f.bottom,o),d==zi.LTR?a.push(i&&n?c:p.left,i&&h?u:f.right):a.push(!i&&h?c:f.left,!i&&n?u:p.right)}let h=null!=t?t:r.from,d=null!=n?n:r.to;for(let r of e.visibleRanges)if(r.to>h&&r.from<d)for(let i=Math.max(r.from,h),s=Math.min(r.to,d);;){let r=e.state.doc.lineAt(i);for(let o of e.bidiSpans(r)){let e=o.from+r.from,a=o.to+r.from;if(e>=s)break;a>i&&l(Math.max(e,i),null==t&&e<=h,Math.min(a,s),null==n&&a>=d,o.dir)}if(i=r.to+1,i>=s)break}return 0==a.length&&l(h,null==t,d,null==n,e.textDirection),{top:s,bottom:o,horizontal:a}}function b(e,t){let n=o.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(this.view,e))).reduce(((e,t)=>e.concat(t))),r=[];for(let n of e.selection.ranges){let i=n==e.selection.main;if(n.empty?!i||Ho:t.drawRangeCursor){let e=Zo(this.view,n,i);e&&r.push(e)}}return{rangePieces:n,cursors:r}}drawSel({rangePieces:e,cursors:t}){if(e.length!=this.rangePieces.length||e.some(((e,t)=>!e.eq(this.rangePieces[t])))){this.selectionLayer.textContent="";for(let t of e)this.selectionLayer.appendChild(t.draw());this.rangePieces=e}if(t.length!=this.cursors.length||t.some(((e,t)=>!e.eq(this.cursors[t])))){let e=this.cursorLayer.children;if(e.length!==t.length){this.cursorLayer.textContent="";for(const e of t)this.cursorLayer.appendChild(e.draw())}else t.forEach(((t,n)=>t.adjust(e[n])));this.cursors=t}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),Ko={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Ho&&(Ko[".cm-line"].caretColor="transparent !important");const Jo=Yt.highest(Io.theme(Ko));function Go(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==zi.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function Xo(e,t,n){let r=Vt.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(r,!0,!0).from),type:oi.Text}}function Yo(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let e of n.type)if(e.to>t||e.to==t&&(e.to==n.to||e.type==oi.Text))return e;return n}function Zo(e,t,n){let r=e.coordsAtPos(t.head,t.assoc||1);if(!r)return null;let i=Go(e);return new qo(r.left-i.left,r.top-i.top,-1,r.bottom-r.top,n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}function ea(e,t,n,r,i){t.lastIndex=0;for(let s,o=e.iterRange(n,r),a=n;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;s=t.exec(o.value);)i(a+s.index,s)}class ta{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:i,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(e,t,n,i)=>r(i,n,n+e[0].length,e,t);else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");{let e="function"==typeof n?n:()=>n;this.addMatch=(t,n,r,i)=>i(r,r+t[0].length,e(t,n,r))}}this.boundary=i,this.maxLength=s}createDeco(e){let t=new Rn,n=t.add.bind(t);for(let{from:t,to:r}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(e.state.doc.lineAt(i).from,i-t),s=Math.min(e.state.doc.lineAt(s).to,s+t),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}(e,this.maxLength))ea(e.state.doc,this.regexp,t,r,((t,r)=>this.addMatch(r,e,t,n)));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges(((t,i,s,o)=>{o>e.view.viewport.from&&s<e.view.viewport.to&&(n=Math.min(s,n),r=Math.max(o,r))})),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let i of e.visibleRanges){let s=Math.max(i.from,n),o=Math.min(i.to,r);if(o>s){let n=e.state.doc.lineAt(s),r=n.to<o?e.state.doc.lineAt(o):n,a=Math.max(i.from,n.from),l=Math.min(i.to,r.to);if(this.boundary){for(;s>n.from;s--)if(this.boundary.test(n.text[s-1-n.from])){a=s;break}for(;o<r.to;o++)if(this.boundary.test(r.text[o-r.from])){l=o;break}}let c,u=[],h=(e,t,n)=>u.push(n.range(e,t));if(n==r)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;)this.addMatch(c,e,c.index+n.from,h);else ea(e.state.doc,this.regexp,a,l,((t,n)=>this.addMatch(n,e,t,h)));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:u})}}return t}}const na=null!=/x/.unicode?"gu":"g",ra=new RegExp("[\0-\b\n--\u2028\u2029\ufeff-]",na),ia={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let sa=null;const oa=Ht.define({combine(e){let t=An(e,{render:null,specialChars:ra,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==sa&&"undefined"!=typeof document&&document.body){let t=document.body.style;sa=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return sa||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,na)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,na)),t}});function aa(e={}){return[oa.of(e),la||(la=Mi.fromClass(class{constructor(e){this.view=e,this.decorations=ai.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(oa)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new ta({regexp:e.specialChars,decoration:(t,n,r)=>{let{doc:i}=n.state,s=Ot(t[0],0);if(9==s){let e=i.lineAt(r),t=n.state.tabSize,s=$n(e.text,t,r-e.from);return ai.replace({widget:new ua((t-s%t)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=ai.replace({widget:new ca(e,s)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(oa);e.startState.facet(oa)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let la=null;class ca extends si{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"":10==e?"":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(ia[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let i=document.createElement("span");return i.textContent=t,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class ua extends si{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const ha="-10000px";class da{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map(n)}update(e){let t=e.state.facet(this.facet),n=t.filter((e=>e));if(t===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let r=[];for(let t=0;t<n.length;t++){let i=n[t],s=-1;if(i){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==i.create&&(s=e)}if(s<0)r[t]=this.createTooltipView(i);else{let n=r[t]=this.tooltipViews[s];n.update&&n.update(e)}}}for(let e of this.tooltipViews)r.indexOf(e)<0&&e.dom.remove();return this.input=t,this.tooltips=n,this.tooltipViews=r,!0}}function pa(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const fa=Ht.define({combine:e=>{var t,n,r;return{position:Wr.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((e=>e.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find((e=>e.tooltipSpace)))||void 0===r?void 0:r.tooltipSpace)||pa}}}),ma=Mi.fromClass(class{constructor(e){var t;this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let n=e.state.facet(fa);this.position=n.position,this.parent=n.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new da(e,ba,(e=>this.createTooltip(e))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),null===(t=e.dom.ownerDocument.defaultView)||void 0===t||t.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(fa);if(r.position!=this.position){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=ha,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;null===(e=this.view.dom.ownerDocument.defaultView)||void 0===e||e.removeEventListener("resize",this.measureSoon);for(let{dom:e}of this.manager.tooltipViews)e.remove();null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(fa).tooltipSpace(this.view)}}writeMeasure(e){let{editor:t,space:n}=e,r=[];for(let i=0;i<this.manager.tooltips.length;i++){let s=this.manager.tooltips[i],o=this.manager.tooltipViews[i],{dom:a}=o,l=e.pos[i],c=e.size[i];if(!l||l.bottom<=Math.max(t.top,n.top)||l.top>=Math.min(t.bottom,n.bottom)||l.right<Math.max(t.left,n.left)-.1||l.left>Math.min(t.right,n.right)+.1){a.style.top=ha;continue}let u=s.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,h=u?7:0,d=c.right-c.left,p=c.bottom-c.top,f=o.offset||ya,m=this.view.textDirection==zi.LTR,g=c.width>n.right-n.left?m?n.left:n.right-c.width:m?Math.min(l.left-(u?14:0)+f.x,n.right-d):Math.max(n.left,l.left-d+(u?14:0)-f.x),y=!!s.above;!s.strictSide&&(y?l.top-(c.bottom-c.top)-f.y<n.top:l.bottom+(c.bottom-c.top)+f.y>n.bottom)&&y==n.bottom-l.bottom>l.top-n.top&&(y=!y);let b=y?l.top-p-h-f.y:l.bottom+h+f.y,v=g+d;if(!0!==o.overlap)for(let e of r)e.left<v&&e.right>g&&e.top<b+p&&e.bottom>b&&(b=y?e.top-p-2-h:e.bottom+h+2);"absolute"==this.position?(a.style.top=b-e.parent.top+"px",a.style.left=g-e.parent.left+"px"):(a.style.top=b+"px",a.style.left=g+"px"),u&&(u.style.left=l.left+(m?f.x:-f.x)-(g+14-7)+"px"),!0!==o.overlap&&r.push({left:g,top:b,right:v,bottom:b+p}),a.classList.toggle("cm-tooltip-above",y),a.classList.toggle("cm-tooltip-below",!y),o.positioned&&o.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=ha}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),ga=Io.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ya={x:0,y:0},ba=Ht.define({enables:[ma,ga]});class va extends En{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}va.prototype.elementClass="",va.prototype.toDOM=void 0,va.prototype.mapMode=Nt.TrackBefore,va.prototype.startSide=va.prototype.endSide=-1,va.prototype.point=!0;const xa=1024;let wa=0;class Sa{constructor(e,t){this.from=e,this.to=t}}class ka{constructor(e={}){this.id=wa++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=Ta.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}ka.closedBy=new ka({deserialize:e=>e.split(" ")}),ka.openedBy=new ka({deserialize:e=>e.split(" ")}),ka.group=new ka({deserialize:e=>e.split(" ")}),ka.contextHash=new ka({perNode:!0}),ka.lookAhead=new ka({perNode:!0}),ka.mounted=new ka({perNode:!0});const Pa=Object.create(null);class Ta{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):Pa,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new Ta(e.name||"",t,e.id,n);if(e.props)for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(ka.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(ka.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}}Ta.none=new Ta("",Object.create(null),0,8);class Oa{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);e&&(r||(r=Object.assign({},n.props)),r[e[0].id]=e[1])}t.push(r?new Ta(n.name,r,n.id,n.flags):n)}return new Oa(t)}}const Ca=new WeakMap,Aa=new WeakMap;var Ea;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(Ea||(Ea={}));class Na{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[e,t]of i)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(ka.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new za(this.topNode,e)}cursorAt(e,t=0,n=0){let r=Ca.get(this)||this.topNode,i=new za(r);return i.moveTo(e,t),Ca.set(this,i._tree),i}get topNode(){return new _a(this,0,0,null)}resolve(e,t=0){let n=La(Ca.get(this)||this.topNode,e,t,!1);return Ca.set(this,n),n}resolveInner(e,t=0){let n=La(Aa.get(this)||this.topNode,e,t,!0);return Aa.set(this,n),n}iterate(e){let{enter:t,leave:n,from:r=0,to:i=this.length}=e;for(let s=this.cursor((e.mode||0)|Ea.IncludeAnonymous);;){let e=!1;if(s.from<=i&&s.to>=r&&(s.type.isAnonymous||!1!==t(s))){if(s.firstChild())continue;e=!0}for(;e&&n&&!s.type.isAnonymous&&n(s),!s.nextSibling();){if(!s.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:$a(Ta.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new Na(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new Na(Ta.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=xa,reused:s=[],minRepeatType:o=r.types.length}=e,a=Array.isArray(n)?new Ma(n,n.length):n,l=r.types,c=0,u=0;function h(e,t,n,m,g){let{id:y,start:b,end:v,size:x}=a,w=u;for(;x<0;){if(a.next(),-1==x){let t=s[y];return n.push(t),void m.push(b-e)}if(-3==x)return void(c=y);if(-4==x)return void(u=y);throw new RangeError(`Unrecognized record size: ${x}`)}let S,k,P=l[y],T=b-e;if(v-b<=i&&(k=function(e,t){let n=a.fork(),r=0,s=0,l=0,c=n.end-i,u={size:0,start:0,skip:0};e:for(let i=n.pos-e;n.pos>i;){let e=n.size;if(n.id==t&&e>=0){u.size=r,u.start=s,u.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-e;if(e<0||a<i||n.start<c)break;let h=n.id>=o?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;h+=4}else n.id>=o&&(h+=4);n.next()}s=d,r+=e,l+=h}return(t<0||r==e)&&(u.size=r,u.start=s,u.skip=l),u.size>4?u:void 0}(a.pos-t,g))){let t=new Uint16Array(k.size-k.skip),n=a.pos-k.size,i=t.length;for(;a.pos>n;)i=f(k.start,t,i);S=new Ia(t,v-k.start,r),T=k.start-e}else{let e=a.pos-x;a.next();let t=[],n=[],r=y>=o?y:-1,s=0,l=v;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-i&&(d(t,n,b,s,a.end,l,r,w),s=t.length,l=a.end),a.next()):h(b,e,t,n,r);if(r>=0&&s>0&&s<t.length&&d(t,n,b,s,b,l,r,w),t.reverse(),n.reverse(),r>-1&&s>0){let e=function(e){return(t,n,r)=>{let i,s,o=0,a=t.length-1;if(a>=0&&(i=t[a])instanceof Na){if(!a&&i.type==e&&i.length==r)return i;(s=i.prop(ka.lookAhead))&&(o=n[a]+i.length+s)}return p(e,t,n,r,o)}}(P);S=$a(P,t,n,0,t.length,0,v-b,e,e)}else S=p(P,t,n,v-b,w-v)}n.push(S),m.push(T)}function d(e,t,n,i,s,o,a,l){let c=[],u=[];for(;e.length>i;)c.push(e.pop()),u.push(t.pop()+n-s);e.push(p(r.types[a],c,u,o-s,l-o)),t.push(s-n)}function p(e,t,n,r,i=0,s){if(c){let e=[ka.contextHash,c];s=s?[e].concat(s):[e]}if(i>25){let e=[ka.lookAhead,i];s=s?[e].concat(s):[e]}return new Na(e,t,n,r,s)}function f(e,t,n){let{id:r,start:i,end:s,size:l}=a;if(a.next(),l>=0&&r<o){let o=n;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)n=f(e,t,n)}t[--n]=o,t[--n]=s-e,t[--n]=i-e,t[--n]=r}else-3==l?c=r:-4==l&&(u=r);return n}let m=[],g=[];for(;a.pos>0;)h(e.start||0,e.bufferStart||0,m,g,-1);let y=null!==(t=e.length)&&void 0!==t?t:m.length?g[0]+m[0].length:0;return new Na(l[e.topID],m.reverse(),g.reverse(),y)}(e)}}Na.empty=new Na(Ta.none,[],[],0);class Ma{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Ma(this.buffer,this.index)}}class Ia{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Ta.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;let s=[];for(;e<n;)s.push(this.childString(e)),e=this.buffer[e+3];return i+"("+s.join(",")+")"}findChild(e,t,n,r,i){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(Da(i,r,s[a+1],s[a+2])&&(o=a,n>0));a=s[a+3]);return o}slice(e,t,n,r){let i=this.buffer,s=new Uint16Array(t-e);for(let r=e,o=0;r<t;)s[o++]=i[r++],s[o++]=i[r++]-n,s[o++]=i[r++]-n,s[o++]=i[r++]-e;return new Ia(s,r-n,this.set)}}function Da(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function Ra(e,t){let n=e.childBefore(t);for(;n;){let t=n.lastChild;if(!t||t.to!=n.to)break;t.type.isError&&t.from==t.to?(e=n,n=t.prevSibling):n=t}return e}function La(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof _a&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=r?0:Ea.IgnoreOverlays;if(r)for(let r=e,o=r.parent;o;r=o,o=r.parent)r instanceof _a&&r.index<0&&(null===(i=o.enter(t,n,s))||void 0===i?void 0:i.from)!=r.from&&(e=o);for(;;){let r=e.enter(t,n,s);if(!r)return e;e=r}}class _a{constructor(e,t,n,r){this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,i=0){for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],c=a[e]+s.from;if(Da(r,n,c,c+l.length))if(l instanceof Ia){if(i&Ea.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,n-c,r);if(o>-1)return new Va(new ja(s,l,e,c),null,o)}else if(i&Ea.IncludeAnonymous||!l.type.isAnonymous||Ua(l)){let o;if(!(i&Ea.IgnoreMounts)&&l.props&&(o=l.prop(ka.mounted))&&!o.overlay)return new _a(o.tree,c,e,s);let a=new _a(l,c,e,s);return i&Ea.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,r)}}if(i&Ea.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&Ea.IgnoreOverlays)&&(r=this._tree.prop(ka.mounted))&&r.overlay){let n=e-this.from;for(let{from:e,to:i}of r.overlay)if((t>0?e<=n:e<n)&&(t<0?i>=n:i>n))return new _a(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new za(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return La(this,e,t,!1)}resolveInner(e,t=0){return La(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Ra(this,e)}getChild(e,t=null,n=null){let r=Ba(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return Ba(this,e,t,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Fa(this,e)}}function Ba(e,t,n,r){let i=e.cursor(),s=[];if(!i.firstChild())return s;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return s;for(;;){if(null!=r&&i.type.is(r))return s;if(i.type.is(t)&&s.push(i.node),!i.nextSibling())return null==r?s:[]}}function Fa(e,t,n=t.length-1){for(let r=e.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class ja{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class Va{constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new Va(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&Ea.ExcludeBuffers)return null;let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new Va(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Va(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Va(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new za(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let s=n.buffer[this.index+1],o=n.buffer[this.index+2];e.push(n.slice(r,i,s,o)),t.push(0)}return new Na(this.type,e,t,this.to-this.from)}resolve(e,t=0){return La(this,e,t,!1)}resolveInner(e,t=0){return La(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Ra(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let r=Ba(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return Ba(this,e,t,n)}get node(){return this}matchContext(e){return Fa(this,e)}}class za{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof _a)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof _a?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&Ea.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ea.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ea.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,i=e<0?-1:n._tree.children.length;r!=i;r+=e){let e=n._tree.children[r];if(this.mode&Ea.IncludeAnonymous||e instanceof Ia||!e.type.isAnonymous||Ua(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,i=this.stack.length;i>=0;){for(let s=e;s;s=s._parent)if(s.index==r){if(r==this.index)return s;t=s,n=i+1;break e}r=this.stack[--i]}for(let e=n;e<this.stack.length;e++)t=new Va(this.buffer,t,this.stack[e]);return this.bufferNode=new Va(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return Fa(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return Fa(this.node,e,r);let s=n[t.buffer[this.stack[i]]];if(!s.isAnonymous){if(e[r]&&e[r]!=s.name)return!1;r--}}return!0}}function Ua(e){return e.children.some((e=>e instanceof Ia||!e.type.isAnonymous||Ua(e)))}const Ha=new WeakMap;function Wa(e,t){if(!e.isAnonymous||t instanceof Ia||t.type!=e)return 1;let n=Ha.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof Na)){n=1;break}n+=Wa(e,r)}Ha.set(t,n)}return n}function $a(e,t,n,r,i,s,o,a,l){let c=0;for(let n=r;n<i;n++)c+=Wa(e,t[n]);let u=Math.ceil(1.5*c/8),h=[],d=[];return function t(n,r,i,o,a){for(let c=i;c<o;){let i=c,p=r[c],f=Wa(e,n[c]);for(c++;c<o;c++){let t=Wa(e,n[c]);if(f+t>=u)break;f+=t}if(c==i+1){if(f>u){let e=n[i];t(e.children,e.positions,0,e.children.length,r[i]+a);continue}h.push(n[i])}else{let t=r[c-1]+n[c-1].length-p;h.push($a(e,n,r,i,c,p,t,null,l))}d.push(p+a-s)}}(t,n,r,i,0),(a||l)(h,d,o)}class qa{constructor(e,t,n,r,i=!1,s=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(i?1:0)|(s?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new qa(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],i=1,s=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let c=o<t.length?t[o]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;s&&s.from<u;){let t=s;if(a>=t.from||u<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,u)-l;t=e>=n?null:new qa(e,n,t.tree,t.offset+l,o>0,!!c)}if(t&&r.push(t),s.to>u)break;s=i<e.length?e[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}class Qa{startParse(e,t,n){return"string"==typeof e&&(e=new Ka(e)),n=n?n.length?n.map((e=>new Sa(e.from,e.to))):[new Sa(0,0)]:[new Sa(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class Ka{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ka({perNode:!0});let Ja=0;class Ga{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=Ja++}static define(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new Ga([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new Ya;return t=>t.modified.indexOf(e)>-1?t:Ya.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let Xa=0;class Ya{constructor(){this.instances=[],this.id=Xa++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>{return n.base==e&&(r=t,i=n.modified,r.length==i.length&&r.every(((e,t)=>e==i[t])));var r,i}));if(n)return n;let r=[],i=new Ga(r,e,t);for(let e of t)e.instances.push(i);let s=Za(t);for(let t of e.set)for(let e of s)r.push(Ya.get(t,e));return i}}function Za(e){let t=[e];for(let n=0;n<e.length;n++)for(let r of Za(e.slice(0,n).concat(e.slice(n+1))))t.push(r);return t}function el(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],i=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){i=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new nl(r,i,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return tl.add(t)}const tl=new ka;class nl{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function rl(e,t){let n=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)n[e.id]=t.class;else n[t.tag.id]=t.class;let{scope:r,all:i=null}=t||{};return{style:e=>{let t=i;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function il(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}function sl(e,t,n,r=0,i=e.length){let s=new ol(r,Array.isArray(t)?t:[t],n);s.highlightRange(e.cursor(),r,i,"",s.highlighters),s.flush(i)}class ol{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,i){let{type:s,from:o,to:a}=e;if(o>=n||a<=t)return;s.isTop&&(i=this.highlighters.filter((e=>!e.scope||e.scope(s))));let l=r,c=s.prop(tl),u=!1;for(;c;){if(!c.context||e.matchContext(c.context)){let e=il(i,c.tags);e&&(l&&(l+=" "),l+=e,1==c.mode?r+=(r?" ":"")+e:0==c.mode&&(u=!0));break}c=c.next}if(this.startSpan(e.from,l),u)return;let h=e.tree&&e.tree.prop(ka.mounted);if(h&&h.overlay){let s=e.node.enter(h.overlay[0].from+o,1),c=this.highlighters.filter((e=>!e.scope||e.scope(h.tree.type))),u=e.firstChild();for(let d=0,p=o;;d++){let f=d<h.overlay.length?h.overlay[d]:null,m=f?f.from+o:a,g=Math.max(t,p),y=Math.min(n,m);if(g<y&&u)for(;e.from<y&&(this.highlightRange(e,g,y,r,i),this.startSpan(Math.min(n,e.to),l),!(e.to>=m)&&e.nextSibling()););if(!f||m>n)break;p=f.to+o,p>t&&(this.highlightRange(s.cursor(),Math.max(t,f.from+o),Math.min(n,p),r,c),this.startSpan(p,l))}u&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,i),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}const al=Ga.define,ll=al(),cl=al(),ul=al(cl),hl=al(cl),dl=al(),pl=al(dl),fl=al(dl),ml=al(),gl=al(ml),yl=al(),bl=al(),vl=al(),xl=al(vl),wl=al(),Sl={comment:ll,lineComment:al(ll),blockComment:al(ll),docComment:al(ll),name:cl,variableName:al(cl),typeName:ul,tagName:al(ul),propertyName:hl,attributeName:al(hl),className:al(cl),labelName:al(cl),namespace:al(cl),macroName:al(cl),literal:dl,string:pl,docString:al(pl),character:al(pl),attributeValue:al(pl),number:fl,integer:al(fl),float:al(fl),bool:al(dl),regexp:al(dl),escape:al(dl),color:al(dl),url:al(dl),keyword:yl,self:al(yl),null:al(yl),atom:al(yl),unit:al(yl),modifier:al(yl),operatorKeyword:al(yl),controlKeyword:al(yl),definitionKeyword:al(yl),moduleKeyword:al(yl),operator:bl,derefOperator:al(bl),arithmeticOperator:al(bl),logicOperator:al(bl),bitwiseOperator:al(bl),compareOperator:al(bl),updateOperator:al(bl),definitionOperator:al(bl),typeOperator:al(bl),controlOperator:al(bl),punctuation:vl,separator:al(vl),bracket:xl,angleBracket:al(xl),squareBracket:al(xl),paren:al(xl),brace:al(xl),content:ml,heading:gl,heading1:al(gl),heading2:al(gl),heading3:al(gl),heading4:al(gl),heading5:al(gl),heading6:al(gl),contentSeparator:al(ml),list:al(ml),quote:al(ml),emphasis:al(ml),strong:al(ml),link:al(ml),monospace:al(ml),strikethrough:al(ml),inserted:al(),deleted:al(),changed:al(),invalid:al(),meta:wl,documentMeta:al(wl),annotation:al(wl),processingInstruction:al(wl),definition:Ga.defineModifier(),constant:Ga.defineModifier(),function:Ga.defineModifier(),standard:Ga.defineModifier(),local:Ga.defineModifier(),special:Ga.defineModifier()};var kl;rl([{tag:Sl.link,class:"tok-link"},{tag:Sl.heading,class:"tok-heading"},{tag:Sl.emphasis,class:"tok-emphasis"},{tag:Sl.strong,class:"tok-strong"},{tag:Sl.keyword,class:"tok-keyword"},{tag:Sl.atom,class:"tok-atom"},{tag:Sl.bool,class:"tok-bool"},{tag:Sl.url,class:"tok-url"},{tag:Sl.labelName,class:"tok-labelName"},{tag:Sl.inserted,class:"tok-inserted"},{tag:Sl.deleted,class:"tok-deleted"},{tag:Sl.literal,class:"tok-literal"},{tag:Sl.string,class:"tok-string"},{tag:Sl.number,class:"tok-number"},{tag:[Sl.regexp,Sl.escape,Sl.special(Sl.string)],class:"tok-string2"},{tag:Sl.variableName,class:"tok-variableName"},{tag:Sl.local(Sl.variableName),class:"tok-variableName tok-local"},{tag:Sl.definition(Sl.variableName),class:"tok-variableName tok-definition"},{tag:Sl.special(Sl.variableName),class:"tok-variableName2"},{tag:Sl.definition(Sl.propertyName),class:"tok-propertyName tok-definition"},{tag:Sl.typeName,class:"tok-typeName"},{tag:Sl.namespace,class:"tok-namespace"},{tag:Sl.className,class:"tok-className"},{tag:Sl.macroName,class:"tok-macroName"},{tag:Sl.propertyName,class:"tok-propertyName"},{tag:Sl.operator,class:"tok-operator"},{tag:Sl.comment,class:"tok-comment"},{tag:Sl.meta,class:"tok-meta"},{tag:Sl.invalid,class:"tok-invalid"},{tag:Sl.punctuation,class:"tok-punctuation"}]);const Pl=new ka;class Tl{constructor(e,t,n=[]){this.data=e,Cn.prototype.hasOwnProperty("tree")||Object.defineProperty(Cn.prototype,"tree",{get(){return Al(this)}}),this.parser=t,this.extension=[Bl.of(this),Cn.languageData.of(((e,t,n)=>e.facet(Ol(e,t,n))))].concat(n)}isActiveAt(e,t,n=-1){return Ol(e,t,n)==this.data}findRegions(e){let t=e.facet(Bl);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(Pl)==this.data)return void n.push({from:t,to:t+e.length});let i=e.prop(ka.mounted);if(i){if(i.tree.prop(Pl)==this.data){if(i.overlay)for(let e of i.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(i.overlay){let e=n.length;if(r(i.tree,i.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let i=e.children[n];i instanceof Na&&r(i,e.positions[n]+t)}};return r(Al(e),0),n}get allowsNesting(){return!0}}function Ol(e,t,n){let r=e.facet(Bl);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let r=Al(e).topNode;r;r=r.enter(t,n,Ea.ExcludeBuffers))i=r.type.prop(Pl)||i;return i}Tl.setState=gn.define();class Cl extends Tl{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=(n=e.languageData,Ht.define({combine:n?e=>e.concat(n):void 0}));var n;return new Cl(t,e.parser.configure({props:[Pl.add((e=>e.isTop?t:void 0))]}))}configure(e){return new Cl(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function Al(e){let t=e.field(Tl.state,!1);return t?t.tree:Na.empty}class El{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let Nl=null;class Ml{constructor(e,t,n=[],r,i,s,o,a){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=s,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new Ml(e,t,[],Na.empty,0,n,[],null)}startParse(){return this.parser.startParse(new El(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=Na.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(qa.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(qa.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Nl;Nl=this;try{return e()}finally{Nl=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Il(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:i,viewport:s,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,r,i)=>t.push({fromA:e,toA:n,fromB:r,toB:i}))),n=qa.applyChanges(n,t),r=Na.empty,i=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&o.push({from:n,to:r})}}}return new Ml(this.parser,t,n,r,i,s,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:r}=this.skipped[t];n<e.to&&r>e.from&&(this.fragments=Il(this.fragments,n,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Qa{createParse(t,n,r){let i=r[0].from,s=r[r.length-1].to;return{parsedPos:i,advance(){let t=Nl;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new Na(Ta.none,[],[],s-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return Nl}}function Il(e,t,n){return qa.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class Dl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new Dl(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=Ml.create(e.facet(Bl).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new Dl(n)}}Tl.state=Gt.define({create:Dl.init,update(e,t){for(let e of t.effects)if(e.is(Tl.setState))return e.value;return t.startState.facet(Bl)!=t.state.facet(Bl)?Dl.init(t.state):e.apply(t)}});let Rl=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(Rl=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const Ll="undefined"!=typeof navigator&&(null===(kl=navigator.scheduling)||void 0===kl?void 0:kl.isInputPending)?()=>navigator.scheduling.isInputPending():null,_l=Mi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Tl.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Tl.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=Rl(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(Tl.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!Ll?Math.max(25,e.timeRemaining()-5):1e9),o=i.context.treeLen<r&&n.doc.length>r+1e3,a=i.context.work((()=>Ll&&Ll()||Date.now()>s),r+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:Tl.setState.of(new Dl(i.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Ci(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Bl=Ht.define({combine:e=>e.length?e[0]:null,enables:[Tl.state,_l]});class Fl{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const jl=Ht.define(),Vl=Ht.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function zl(e){let t=e.facet(Vl);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function Ul(e,t){let n="",r=e.tabSize;if(9==e.facet(Vl).charCodeAt(0))for(;t>=r;)n+="\t",t-=r;for(let e=0;e<t;e++)n+=" ";return n}function Hl(e,t){e instanceof Cn&&(e=new Wl(e));for(let n of e.state.facet(jl)){let r=n(e,t);if(null!=r)return r}let n=Al(e.state);return n?function(e,t,n){return Ql(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,e)}(e,n,t):null}class Wl{constructor(e,t={}){this.state=e,this.options=t,this.unit=zl(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.countColumn(n,e-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(i+=s-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e,t=e.length){return $n(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const $l=new ka;function ql(e){let t=e.type.prop($l);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(ka.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>Xl(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?Kl:null}function Ql(e,t,n){for(;e;e=e.parent){let r=ql(e);if(r)return r(Jl.create(n,t,e))}return null}function Kl(){return 0}class Jl extends Wl{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}static create(e,t,n){return new Jl(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(Gl(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?Ql(e,this.pos,this.base):0}}function Gl(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function Xl(e,t,n,r,i){let s=e.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==e.pos+o,l=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let i=e.options.simulateBreak,s=e.state.doc.lineAt(n.from),o=null==i||i<=s.from?s.to:Math.min(s.to,i);for(let e=n.to;;){let i=t.childAfter(e);if(!i||i==r)return null;if(!i.type.isSkipped)return i.from<o?n:null;e=i.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}const Yl=new ka;class Zl{constructor(e,t){let n;function r(e){let t=Jn.newName();return(n||(n=Object.create(null)))["."+t]=e,t}const i="string"==typeof t.all?t.all:t.all?r(t.all):void 0,s=t.scope;this.scope=s instanceof Tl?e=>e.prop(Pl)==s.data:s?e=>e==s:void 0,this.style=rl(e.map((e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))}))),{all:i}).style,this.module=n?new Jn(n):null,this.themeType=t.themeType}static define(e,t){return new Zl(e,t||{})}}const ec=Ht.define(),tc=Ht.define({combine:e=>e.length?[e[0]]:null});function nc(e){let t=e.facet(ec);return t.length?t:e.facet(tc)}function rc(e,t){let n,r=[sc];return e instanceof Zl&&(e.module&&r.push(Io.styleModule.of(e.module)),n=e.themeType),(null==t?void 0:t.fallback)?r.push(tc.of(e)):n?r.push(ec.computeN([Io.darkTheme],(t=>t.facet(Io.darkTheme)==("dark"==n)?[e]:[]))):r.push(ec.of(e)),r}class ic{constructor(e){this.markCache=Object.create(null),this.tree=Al(e.state),this.decorations=this.buildDeco(e,nc(e.state))}update(e){let t=Al(e.state),n=nc(e.state),r=n!=nc(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return ai.none;let n=new Rn;for(let{from:r,to:i}of e.visibleRanges)sl(this.tree,t,((e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=ai.mark({class:r})))}),r,i);return n.finish()}}const sc=Yt.high(Mi.fromClass(ic,{decorations:e=>e.decorations})),oc=Zl.define([{tag:Sl.meta,color:"#7a757a"},{tag:Sl.link,textDecoration:"underline"},{tag:Sl.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Sl.emphasis,fontStyle:"italic"},{tag:Sl.strong,fontWeight:"bold"},{tag:Sl.strikethrough,textDecoration:"line-through"},{tag:Sl.keyword,color:"#708"},{tag:[Sl.atom,Sl.bool,Sl.url,Sl.contentSeparator,Sl.labelName],color:"#219"},{tag:[Sl.literal,Sl.inserted],color:"#164"},{tag:[Sl.string,Sl.deleted],color:"#a11"},{tag:[Sl.regexp,Sl.escape,Sl.special(Sl.string)],color:"#e40"},{tag:Sl.definition(Sl.variableName),color:"#00f"},{tag:Sl.local(Sl.variableName),color:"#30a"},{tag:[Sl.typeName,Sl.namespace],color:"#085"},{tag:Sl.className,color:"#167"},{tag:[Sl.special(Sl.variableName),Sl.macroName],color:"#256"},{tag:Sl.definition(Sl.propertyName),color:"#00c"},{tag:Sl.comment,color:"#940"},{tag:Sl.invalid,color:"#f00"}]);function ac(e,t,n){let r=e.prop(t<0?ka.openedBy:ka.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function lc(e,t,n,r={}){let i=r.maxScanDistance||1e4,s=r.brackets||"()[]{}",o=Al(e),a=o.resolveInner(t,n);for(let e=a;e;e=e.parent){let t=ac(e.type,n,s);if(t&&e.from<e.to)return cc(0,0,n,e,t,s)}return function(e,t,n,r,i,s,o){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),h=0;for(let e=0;!u.next().done&&e<=s;){let s=u.value;n<0&&(e+=s.length);let a=t+e*n;for(let e=n>0?0:s.length-1,t=n>0?s.length:-1;e!=t;e+=n){let t=o.indexOf(s[e]);if(!(t<0||r.resolveInner(a+e,1).type!=i))if(t%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};h--}}n>0&&(e+=s.length)}return u.done?{start:c,matched:!1}:null}(e,t,n,o,a.type,i,s)}function cc(e,t,n,r,i,s){let o=r.parent,a={from:r.from,to:r.to},l=0,c=null==o?void 0:o.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do{if(n<0?c.to<=r.from:c.from>=r.to){if(0==l&&i.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(ac(c.type,n,s))l++;else if(ac(c.type,-n,s)){if(0==l)return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1};l--}}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}const uc=Object.create(null),hc=[Ta.none],dc=[],pc=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])pc[e]=mc(uc,t);function fc(e,t){dc.indexOf(e)>-1||(dc.push(e),console.warn(t))}function mc(e,t){let n=null;for(let r of t.split(".")){let t=e[r]||Sl[r];t?"function"==typeof t?n?n=t(n):fc(r,`Modifier ${r} used at start of tag`):n?fc(r,`Tag ${r} used as modifier`):n=t:fc(r,`Unknown highlighting tag ${r}`)}if(!n)return 0;let r=t.replace(/ /g,"_"),i=Ta.define({id:hc.length,name:r,props:[el({[r]:n})]});return hc.push(i),i.id}function gc(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=e(t,n);return!!i&&(r(n.update(i)),!0)}}const yc=gc(Sc,0),bc=gc(wc,0),vc=gc(((e,t)=>wc(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),i=n.to<=r.to?r:e.doc.lineAt(n.to),s=t.length-1;s>=0&&t[s].to>r.from?t[s].to=i.to:t.push({from:r.from,to:i.to})}return t}(t))),0);function xc(e,t=e.selection.main.head){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}function wc(e,t,n=t.selection.ranges){let r=n.map((e=>xc(t,e.from).block));if(!r.every((e=>e)))return null;let i=n.map(((e,n)=>function(e,{open:t,close:n},r,i){let s,o,a=e.sliceDoc(r-50,r),l=e.sliceDoc(i,i+50),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,h=a.length-c;if(a.slice(h-t.length,h)==t&&l.slice(u,u+n.length)==n)return{open:{pos:r-c,margin:c&&1},close:{pos:i+u,margin:u&&1}};i-r<=100?s=o=e.sliceDoc(r,i):(s=e.sliceDoc(r,r+50),o=e.sliceDoc(i-50,i));let d=/^\s*/.exec(s)[0].length,p=/\s*$/.exec(o)[0].length,f=o.length-p-n.length;return s.slice(d,d+t.length)==t&&o.slice(f,f+n.length)==n?{open:{pos:r+d+t.length,margin:/\s/.test(s.charAt(d+t.length))?1:0},close:{pos:i-p-n.length,margin:/\s/.test(o.charAt(f-1))?1:0}}:null}(t,r[n],e.from,e.to)));if(2!=e&&!i.every((e=>e)))return{changes:t.changes(n.map(((e,t)=>i[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}])))};if(1!=e&&i.some((e=>e))){let e=[];for(let t,n=0;n<i.length;n++)if(t=i[n]){let i=r[n],{open:s,close:o}=t;e.push({from:s.pos-i.open.length,to:s.pos+s.margin},{from:o.pos-o.margin,to:o.pos+i.close.length})}return{changes:e}}return null}function Sc(e,t,n=t.selection.ranges){let r=[],i=-1;for(let{from:e,to:s}of n){let n=r.length,o=1e9;for(let n=e;n<=s;){let a=t.doc.lineAt(n);if(a.from>i&&(e==s||s>a.from)){i=a.from;let e=xc(t,n).line;if(!e)continue;let s=/^\s*/.exec(a.text)[0].length,l=s==a.length,c=a.text.slice(s,s+e.length)==e?s:-1;s<a.text.length&&s<o&&(o=s),r.push({line:a,comment:c,token:e,indent:s,empty:l,single:!1})}n=a.to+1}if(o<1e9)for(let e=n;e<r.length;e++)r[e].indent<r[e].line.text.length&&(r[e].indent=o);r.length==n+1&&(r[n].single=!0)}if(2!=e&&r.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:n,indent:i,empty:s,single:o}of r)!o&&s||e.push({from:t.from+i,insert:n+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:i}of r)if(n>=0){let r=t.from+n,s=r+i.length;" "==t.text[s-t.from]&&s++,e.push({from:r,to:s})}return{changes:e}}return null}const kc=pn.define(),Pc=pn.define(),Tc=Ht.define(),Oc=Ht.define({combine:e=>An(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}),Cc=Gt.define({create:()=>Hc.empty,update(e,t){let n=t.state.facet(Oc),r=t.annotation(kc);if(r){let i=t.docChanged?Vt.single(function(e){let t=0;return e.iterChangedRanges(((e,n)=>t=n)),t}(t.changes)):void 0,s=Rc.fromTransaction(t,i),o=r.side,a=0==o?e.undone:e.done;return a=s?Lc(a,a.length,n.minDepth,s):Fc(a,t.startState.selection),new Hc(0==o?r.rest:a,0==o?a:r.rest)}let i=t.annotation(Pc);if("full"!=i&&"before"!=i||(e=e.isolate()),!1===t.annotation(yn.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let s=Rc.fromTransaction(t),o=t.annotation(yn.time),a=t.annotation(yn.userEvent);return s?e=e.addChanges(s,o,a,n.newGroupDelay,n.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,o,a,n.newGroupDelay)),"full"!=i&&"after"!=i||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new Hc(e.done.map(Rc.fromJSON),e.undone.map(Rc.fromJSON))});function Ac(e={}){return[Cc,Oc.of(e),Io.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?Nc:"historyRedo"==e.inputType?Mc:null;return!!n&&(e.preventDefault(),n(t))}})]}function Ec(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let i=n.field(Cc,!1);if(!i)return!1;let s=i.pop(e,n,t);return!!s&&(r(s),!0)}}const Nc=Ec(0,!1),Mc=Ec(1,!1),Ic=Ec(0,!0),Dc=Ec(1,!0);class Rc{constructor(e,t,n,r,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(e){return new Rc(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new Rc(e.changes&&It.fromJSON(e.changes),[],e.mapped&&Mt.fromJSON(e.mapped),e.startSelection&&Vt.fromJSON(e.startSelection),e.selectionsAfter.map(Vt.fromJSON))}static fromTransaction(e,t){let n=Bc;for(let t of e.startState.facet(Tc)){let r=t(e);r.length&&(n=n.concat(r))}return!n.length&&e.changes.empty?null:new Rc(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,Bc)}static selection(e){return new Rc(void 0,Bc,void 0,void 0,e)}}function Lc(e,t,n,r){let i=t+1>n+20?t-n-1:0,s=e.slice(i,t);return s.push(r),s}function _c(e,t){return e.length?t.length?e.concat(t):e:t}const Bc=[];function Fc(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),Lc(e,e.length-1,1e9,n.setSelAfter(r)))}return[Rc.selection([t])]}function jc(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function Vc(e,t){if(!e.length)return e;let n=e.length,r=Bc;for(;n;){let i=zc(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[Rc.selection(r)]:Bc}function zc(e,t,n){let r=_c(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):Bc,n);if(!e.changes)return Rc.selection(r);let i=e.changes.map(t),s=t.mapDesc(e.changes,!0),o=e.mapped?e.mapped.composeDesc(s):s;return new Rc(i,gn.mapEffects(e.effects,t),o,e.startSelection.map(s),r)}const Uc=/^(input\.type|delete)($|\.)/;class Hc{constructor(e,t,n=0,r){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new Hc(this.done,this.undone):this}addChanges(e,t,n,r,i){let s=this.done,o=s[s.length-1];return s=o&&o.changes&&!o.changes.empty&&e.changes&&(!n||Uc.test(n))&&(!o.selectionsAfter.length&&t-this.prevTime<r&&function(e,t){let n=[],r=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,i,s)=>{for(let e=0;e<n.length;){let t=n[e++],o=n[e++];s>=t&&i<=o&&(r=!0)}})),r}(o.changes,e.changes)||"input.type.compose"==n)?Lc(s,s.length-1,i,new Rc(e.changes.compose(o.changes),_c(e.effects,o.effects),o.mapped,o.startSelection,Bc)):Lc(s,s.length,i,e),new Hc(s,Bc,t,n)}addSelection(e,t,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:Bc;return i.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(s=i[i.length-1],o=e,s.ranges.length==o.ranges.length&&0===s.ranges.filter(((e,t)=>e.empty!=o.ranges[t].empty)).length)?this:new Hc(Fc(this.done,e),this.undone,t,n);var s,o}addMapping(e){return new Hc(Vc(this.done,e),Vc(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1];if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:kc.of({side:e,rest:jc(r)}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==r.length?Bc:r.slice(0,r.length-1);return i.mapped&&(n=Vc(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:kc.of({side:e,rest:n}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}Hc.empty=new Hc(Bc,Bc);const Wc=[{key:"Mod-z",run:Nc,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Mc,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Mc,preventDefault:!0},{key:"Mod-u",run:Ic,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Dc,preventDefault:!0}];function $c(e,t){return Vt.create(e.ranges.map(t),e.mainIndex)}function qc(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function Qc({state:e,dispatch:t},n){let r=$c(e.selection,n);return!r.eq(e.selection)&&(t(qc(e,r)),!0)}function Kc(e,t){return Vt.cursor(t?e.to:e.from)}function Jc(e,t){return Qc(e,(n=>n.empty?e.moveByChar(n,t):Kc(n,t)))}function Gc(e){return e.textDirectionAt(e.state.selection.main.head)==zi.LTR}const Xc=e=>Jc(e,!Gc(e)),Yc=e=>Jc(e,Gc(e));function Zc(e,t){return Qc(e,(n=>n.empty?e.moveByGroup(n,t):Kc(n,t)))}function eu(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function tu(e,t,n){let r,i,s=Al(e).resolveInner(t.head),o=n?ka.closedBy:ka.openedBy;for(let r=t.head;;){let t=n?s.childAfter(r):s.childBefore(r);if(!t)break;eu(e,t,o)?s=t:r=n?t.to:t.from}return i=s.type.prop(o)&&(r=n?lc(e,s.from,1):lc(e,s.to,-1))&&r.matched?n?r.end.to:r.end.from:n?s.to:s.from,Vt.cursor(i,n?-1:1)}function nu(e,t){return Qc(e,(n=>{if(!n.empty)return Kc(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)}))}const ru=e=>nu(e,!1),iu=e=>nu(e,!0);function su(e){return Math.max(e.defaultLineHeight,Math.min(e.dom.clientHeight,innerHeight)-5)}function ou(e,t){let{state:n}=e,r=$c(n.selection,(n=>n.empty?e.moveVertically(n,t,su(e)):Kc(n,t)));if(r.eq(n.selection))return!1;let i,s=e.coordsAtPos(n.selection.main.head),o=e.scrollDOM.getBoundingClientRect();return s&&s.top>o.top&&s.bottom<o.bottom&&s.top-o.top<=e.scrollDOM.scrollHeight-e.scrollDOM.scrollTop-e.scrollDOM.clientHeight&&(i=Io.scrollIntoView(r.main.head,{y:"start",yMargin:s.top-o.top})),e.dispatch(qc(n,r),{effects:i}),!0}const au=e=>ou(e,!1),lu=e=>ou(e,!0);function cu(e,t,n){let r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(i=Vt.cursor(r.from+n))}return i}const uu=e=>Qc(e,(t=>cu(e,t,!0))),hu=e=>Qc(e,(t=>cu(e,t,!1)));function du(e,t){let n=$c(e.state.selection,(e=>{let n=t(e);return Vt.range(e.anchor,n.head,n.goalColumn)}));return!n.eq(e.state.selection)&&(e.dispatch(qc(e.state,n)),!0)}function pu(e,t){return du(e,(n=>e.moveByChar(n,t)))}const fu=e=>pu(e,!Gc(e)),mu=e=>pu(e,Gc(e));function gu(e,t){return du(e,(n=>e.moveByGroup(n,t)))}function yu(e,t){return du(e,(n=>e.moveVertically(n,t)))}const bu=e=>yu(e,!1),vu=e=>yu(e,!0);function xu(e,t){return du(e,(n=>e.moveVertically(n,t,su(e))))}const wu=e=>xu(e,!1),Su=e=>xu(e,!0),ku=e=>du(e,(t=>cu(e,t,!0))),Pu=e=>du(e,(t=>cu(e,t,!1))),Tu=({state:e,dispatch:t})=>(t(qc(e,{anchor:0})),!0),Ou=({state:e,dispatch:t})=>(t(qc(e,{anchor:e.doc.length})),!0),Cu=({state:e,dispatch:t})=>(t(qc(e,{anchor:e.selection.main.anchor,head:0})),!0),Au=({state:e,dispatch:t})=>(t(qc(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function Eu({state:e,dispatch:t},n){if(e.readOnly)return!1;let r="delete.selection",i=e.changeByRange((e=>{let{from:t,to:i}=e;if(t==i){let e=n(t);e<t?r="delete.backward":e>t&&(r="delete.forward"),t=Math.min(t,e),i=Math.max(i,e)}return t==i?{range:e}:{changes:{from:t,to:i},range:Vt.cursor(t)}}));return!i.changes.empty&&(t(e.update(i,{scrollIntoView:!0,userEvent:r,effects:"delete.selection"==r?Io.announce.of(e.phrase("Selection deleted")):void 0})),!0)}function Nu(e,t,n){if(e instanceof Io)for(let r of e.state.facet(Io.atomicRanges).map((t=>t(e))))r.between(t,t,((e,r)=>{e<t&&r>t&&(t=n?r:e)}));return t}const Mu=(e,t)=>Eu(e,(n=>{let r,i,{state:s}=e,o=s.doc.lineAt(n);if(!t&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(r=o.text.slice(0,n-o.from))){if("\t"==r[r.length-1])return n-1;let e=$n(r,s.tabSize)%zl(s)||zl(s);for(let t=0;t<e&&" "==r[r.length-1-t];t++)n--;i=n}else i=wt(o.text,n-o.from,t,t)+o.from,i==n&&o.number!=(t?s.doc.lines:1)&&(i+=t?1:-1);return Nu(e,i,t)})),Iu=e=>Mu(e,!1),Du=e=>Mu(e,!0),Ru=(e,t)=>Eu(e,(n=>{let r=n,{state:i}=e,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let e=null;;){if(r==(t?s.to:s.from)){r==n&&s.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}let a=wt(s.text,r-s.from,t)+s.from,l=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),c=o(l);if(null!=e&&c!=e)break;" "==l&&r==n||(e=c),r=a}return Nu(e,r,t)})),Lu=e=>Ru(e,!1),_u=e=>Eu(e,(t=>{let n=e.lineBlockAt(t).to;return Nu(e,t<n?n:Math.min(e.state.doc.length,t+1),!0)}));function Bu(e){let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),s=e.doc.lineAt(r.to);if(r.empty||r.to!=s.from||(s=e.doc.lineAt(r.to-1)),n>=i.number){let e=t[t.length-1];e.to=s.to,e.ranges.push(r)}else t.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return t}function Fu(e,t,n){if(e.readOnly)return!1;let r=[],i=[];for(let t of Bu(e)){if(n?t.to==e.doc.length:0==t.from)continue;let s=e.doc.lineAt(n?t.to+1:t.from-1),o=s.length+1;if(n){r.push({from:t.to,to:s.to},{from:t.from,insert:s.text+e.lineBreak});for(let n of t.ranges)i.push(Vt.range(Math.min(e.doc.length,n.anchor+o),Math.min(e.doc.length,n.head+o)))}else{r.push({from:s.from,to:t.from},{from:t.to,insert:e.lineBreak+s.text});for(let e of t.ranges)i.push(Vt.range(e.anchor-o,e.head-o))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:Vt.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}function ju(e,t,n){if(e.readOnly)return!1;let r=[];for(let t of Bu(e))n?r.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):r.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Vu=zu(!1);function zu(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange((n=>{let{from:r,to:i}=n,s=t.doc.lineAt(r),o=!e&&r==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=Al(e).resolveInner(t),i=r.childBefore(t),s=r.childAfter(t);return i&&s&&i.to<=t&&s.from>=t&&(n=i.type.prop(ka.closedBy))&&n.indexOf(s.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(s.from).from?{from:i.to,to:s.from}:null}(t,r);e&&(r=i=(i<=s.to?s:t.doc.lineAt(i)).to);let a=new Wl(t,{simulateBreak:r,simulateDoubleBreak:!!o}),l=Hl(a,r);for(null==l&&(l=/^\s*/.exec(t.doc.lineAt(r).text)[0].length);i<s.to&&/\s/.test(s.text[i-s.from]);)i++;o?({from:r,to:i}=o):r>s.from&&r<s.from+100&&!/\S/.test(s.text.slice(0,r))&&(r=s.from);let c=["",Ul(t,l)];return o&&c.push(Ul(t,a.lineIndent(s.from,-1))),{changes:{from:r,to:i,insert:ct.of(c)},range:Vt.cursor(r+1+c[1].length)}}));return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Uu(e,t){let n=-1;return e.changeByRange((r=>{let i=[];for(let s=r.from;s<=r.to;){let o=e.doc.lineAt(s);o.number>n&&(r.empty||r.to>o.from)&&(t(o,i,r),n=o.number),s=o.to+1}let s=e.changes(i);return{changes:i,range:Vt.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}}))}const Hu=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>Qc(e,(t=>tu(e.state,t,!Gc(e)))),shift:e=>du(e,(t=>tu(e.state,t,!Gc(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>Qc(e,(t=>tu(e.state,t,Gc(e)))),shift:e=>du(e,(t=>tu(e.state,t,Gc(e))))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>Fu(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>ju(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>Fu(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>ju(e,t,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=Vt.create([n.main]):n.main.empty||(r=Vt.create([Vt.cursor(n.main.head)])),!!r&&(t(qc(e,r)),!0)}},{key:"Mod-Enter",run:zu(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let n=Bu(e).map((({from:t,to:n})=>Vt.range(t,Math.min(n+1,e.doc.length))));return t(e.update({selection:Vt.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let n=$c(e.selection,(t=>{var n;let r=Al(e).resolveInner(t.head,1);for(;!(r.from<t.from&&r.to>=t.to||r.to>t.to&&r.from<=t.from)&&(null===(n=r.parent)||void 0===n?void 0:n.parent);)r=r.parent;return Vt.range(r.to,r.from)}));return t(qc(e,n)),!0},preventDefault:!0},{key:"Mod-[",run:({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(Uu(e,((t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let i=$n(r,e.tabSize),s=0,o=Ul(e,Math.max(0,i-zl(e)));for(;s<r.length&&s<o.length&&r.charCodeAt(s)==o.charCodeAt(s);)s++;n.push({from:t.from+s,to:t.from+r.length,insert:o.slice(s)})})),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(Uu(e,((t,n)=>{n.push({from:t.from,insert:e.facet(Vl)})})),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new Wl(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),i=Uu(e,((t,i,s)=>{let o=Hl(r,t.from);if(null==o)return;/\S/.test(t.text)||(o=0);let a=/^\s*/.exec(t.text)[0],l=Ul(e,o);(a!=l||s.from<t.from+a.length)&&(n[t.from]=o,i.push({from:t.from,to:t.from+a.length,insert:l}))}));return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(Bu(t).map((({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n})))),r=$c(t.selection,(t=>e.moveVertically(t,!0))).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>function(e,t,n){let r=!1,i=$c(e.selection,(t=>{let i=lc(e,t.head,-1)||lc(e,t.head,1)||t.head>0&&lc(e,t.head-1,1)||t.head<e.doc.length&&lc(e,t.head+1,-1);if(!i||!i.end)return t;r=!0;let s=i.start.from==t.head?i.end.to:i.end.from;return n?Vt.range(t.anchor,s):Vt.cursor(s)}));return!!r&&(t(qc(e,i)),!0)}(e,t,!1)},{key:"Mod-/",run:e=>{let t=xc(e.state);return t.line?yc(e):!!t.block&&vc(e)}},{key:"Alt-A",run:bc}].concat([{key:"ArrowLeft",run:Xc,shift:fu,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>Zc(e,!Gc(e)),shift:e=>gu(e,!Gc(e))},{mac:"Cmd-ArrowLeft",run:hu,shift:Pu},{key:"ArrowRight",run:Yc,shift:mu,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>Zc(e,Gc(e)),shift:e=>gu(e,Gc(e))},{mac:"Cmd-ArrowRight",run:uu,shift:ku},{key:"ArrowUp",run:ru,shift:bu,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Tu,shift:Cu},{mac:"Ctrl-ArrowUp",run:au,shift:wu},{key:"ArrowDown",run:iu,shift:vu,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Ou,shift:Au},{mac:"Ctrl-ArrowDown",run:lu,shift:Su},{key:"PageUp",run:au,shift:wu},{key:"PageDown",run:lu,shift:Su},{key:"Home",run:hu,shift:Pu,preventDefault:!0},{key:"Mod-Home",run:Tu,shift:Cu},{key:"End",run:uu,shift:ku,preventDefault:!0},{key:"Mod-End",run:Ou,shift:Au},{key:"Enter",run:Vu},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Iu,shift:Iu},{key:"Delete",run:Du},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Lu},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Ru(e,!0)},{mac:"Mod-Backspace",run:e=>Eu(e,(t=>{let n=e.lineBlockAt(t).from;return Nu(e,t>n?n:Math.max(0,t-1),!1)}))},{mac:"Mod-Delete",run:_u}].concat([{key:"Ctrl-b",run:Xc,shift:fu,preventDefault:!0},{key:"Ctrl-f",run:Yc,shift:mu},{key:"Ctrl-p",run:ru,shift:bu},{key:"Ctrl-n",run:iu,shift:vu},{key:"Ctrl-a",run:e=>Qc(e,(t=>Vt.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>du(e,(t=>Vt.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>Qc(e,(t=>Vt.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>du(e,(t=>Vt.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:Du},{key:"Ctrl-h",run:Iu},{key:"Ctrl-k",run:_u},{key:"Ctrl-Alt-h",run:Lu},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:ct.of(["",""])},range:Vt.cursor(e.from)})));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),i=n==r.from?n-1:wt(r.text,n-r.from,!1)+r.from,s=n==r.to?n+1:wt(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:s,insert:e.doc.slice(n,s).append(e.doc.slice(i,n))},range:Vt.cursor(s)}}));return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:lu}].map((e=>({mac:e.key,run:e.run,shift:e.shift}))))),Wu=(()=>[aa(),Ac(),$o(),rc(oc,{fallback:!0}),Vo.of([...Hu,...Wc])])();class $u{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=Al(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),i=r.search(Ju(e,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function qu(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}class Qu{constructor(e,t,n){this.completion=e,this.source=t,this.match=n}}function Ku(e){return e.selection.main.head}function Ju(e,t){var n;let{source:r}=e,i=t&&"^"!=r[0],s="$"!=r[r.length-1];return i||s?new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}function Gu(e,t){const n=t.completion.apply||t.completion.label;let r=t.source;var i,s,o,a;"string"==typeof n?e.dispatch((i=e.state,s=n,o=r.from,a=r.to,Object.assign(Object.assign({},i.changeByRange((e=>{if(e==i.selection.main)return{changes:{from:o,to:a,insert:s},range:Vt.cursor(o+s.length)};let t=a-o;return!e.empty||t&&i.sliceDoc(e.from-t,e.from)!=i.sliceDoc(o,a)?{range:e}:{changes:{from:e.from-t,to:e.from,insert:s},range:Vt.cursor(e.from-t+s.length)}}))),{userEvent:"input.complete"}))):n(e,t.completion,r.from,r.to)}const Xu=new WeakMap;function Yu(e){if(!Array.isArray(e))return e;let t=Xu.get(e);return t||Xu.set(e,t=function(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,r]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let r=qu(t)+qu(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let i=e.matchBefore(r);return i||e.explicit?{from:i?i.from:e.pos,options:t,validFor:n}:null}}(e)),t}class Zu{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=Ot(e,t),r=At(n);this.chars.push(n);let i=e.slice(t,t+r),s=i.toUpperCase();this.folded.push(Ot(s==i?i.toLowerCase():s,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:i,byWord:s}=this;if(1==t.length){let r=Ot(e,0);return r==t[0]?[0,0,At(r)]:r==n[0]?[-200,0,At(r)]:null}let o=e.indexOf(this.pattern);if(0==o)return[0,0,this.pattern.length];let a=t.length,l=0;if(o<0){for(let i=0,s=Math.min(e.length,200);i<s&&l<a;){let s=Ot(e,i);s!=t[l]&&s!=n[l]||(r[l++]=i),i+=At(s)}if(l<a)return null}let c=0,u=0,h=!1,d=0,p=-1,f=-1,m=/[a-z]/.test(e),g=!0;for(let r=0,l=Math.min(e.length,200),y=0;r<l&&u<a;){let l=Ot(e,r);o<0&&(c<a&&l==t[c]&&(i[c++]=r),d<a&&(l==t[d]||l==n[d]?(0==d&&(p=r),f=r+1,d++):d=0));let b,v=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(b=Ct(l))!=b.toLowerCase()?1:b!=b.toUpperCase()?2:0;(!r||1==v&&m||0==y&&0!=v)&&(t[u]==l||n[u]==l&&(h=!0)?s[u++]=r:s.length&&(g=!1)),y=v,r+=At(l)}return u==a&&0==s[0]&&g?this.result((h?-200:0)-100,s,e):d==a&&0==p?[-200-e.length,0,f]:o>-1?[-700-e.length,o,o+this.pattern.length]:d==a?[-900-e.length,p,f]:u==a?this.result((h?-200:0)-100-700+(g?0:-1100),s,e):2==t.length?null:this.result((r[0]?-700:0)-200-1100,r,e)}result(e,t,n){let r=[e-n.length],i=1;for(let e of t){let t=e+(this.astral?At(Ot(n,e)):1);i>1&&r[i-1]==e?r[i-1]=t:(r[i++]=e,r[i++]=t)}return r}}const eh=Ht.define({combine:e=>An(e,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label)},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>n=>function(e,t){return e?t?e+" "+t:e:t}(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})});function th(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class nh{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:e=>this.positionInfo(e),key:this};let n=e.state.field(t),{options:r,selected:i}=n.open,s=e.state.facet(eh);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n){let r=document.createElement("span");r.className="cm-completionLabel";let{label:i}=e,s=0;for(let e=1;e<n.length;){let t=n[e++],o=n[e++];t>s&&r.appendChild(document.createTextNode(i.slice(s,t)));let a=r.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(i.slice(t,o))),a.className="cm-completionMatchedText",s=o}return s<i.length&&r.appendChild(document.createTextNode(i.slice(s))),r},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(s),this.optionClass=s.optionClass,this.range=th(r.length,i,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(t=>{for(let n,i=t.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(n=/-(\d+)$/.exec(i.id))&&+n[1]<r.length)return Gu(e,r[+n[1]]),void t.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=th(t.options.length,t.selected,this.view.state.facet(eh).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let i="string"==typeof r?document.createTextNode(r):r(n);if(!i)return;"then"in i?i.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t)})).catch((e=>Ci(this.view.state,e,"completion info"))):this.addInfoPane(i)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&function(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<n.top?e.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(e.scrollTop+=r.bottom-n.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect();if(r.top>Math.min(innerHeight,t.bottom)-10||r.bottom<Math.max(0,t.top)+10)return null;let i=Math.max(0,Math.min(r.top,innerHeight-n.height))-t.top,s=this.view.textDirection==zi.RTL,o=t.left,a=innerWidth-t.right;return s&&o<Math.min(n.width,a)?s=!1:!s&&a<Math.min(n.width,o)&&(s=!0),{top:i,left:s}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let i=n.from;i<n.to;i++){let{completion:n,match:s}=e[i];const o=r.appendChild(document.createElement("li"));o.id=t+"-"+i,o.setAttribute("role","option");let a=this.optionClass(n);a&&(o.className=a);for(let e of this.optionContent){let t=e(n,this.view.state,s);t&&o.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function rh(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class ih{constructor(e,t,n,r,i){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=i}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ih(this.options,ah(t,e),this.tooltip,this.timestamp,e)}static build(e,t,n,r,i){let s=function(e,t){let n=[],r=0;for(let i of e)if(i.hasResult())if(!1===i.result.filter){let e=i.result.getMatch;for(let t of i.result.options){let s=[1e9-r++];if(e)for(let n of e(t))s.push(n);n.push(new Qu(t,i,s))}}else{let e,r=new Zu(t.sliceDoc(i.from,i.to));for(let t of i.result.options)(e=r.match(t.label))&&(null!=t.boost&&(e[0]+=t.boost),n.push(new Qu(t,i,e)))}let i=[],s=null,o=t.facet(eh).compareCompletions;for(let e of n.sort(((e,t)=>t.match[0]-e.match[0]||o(e.completion,t.completion))))!s||s.label!=e.completion.label||s.detail!=e.completion.detail||null!=s.type&&null!=e.completion.type&&s.type!=e.completion.type||s.apply!=e.completion.apply?i.push(e):rh(e.completion)>rh(s)&&(i[i.length-1]=e),s=e.completion;return i}(e,t);if(!s.length)return null;let o=t.facet(eh).selectOnOpen?0:-1;if(r&&r.selected!=o&&-1!=r.selected){let e=r.options[r.selected].completion;for(let t=0;t<s.length;t++)if(s[t].completion==e){o=t;break}}return new ih(s,ah(n,o),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:(a=gh,e=>new nh(e,a)),above:i.aboveCursor},r?r.timestamp:Date.now(),o);var a}map(e){return new ih(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class sh{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new sh(lh,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(eh),r=(n.override||t.languageDataAt("autocomplete",Ku(t)).map(Yu)).map((t=>(this.active.find((e=>e.source==t))||new uh(t,this.active.some((e=>0!=e.state))?1:0)).update(e,n)));r.length==this.active.length&&r.every(((e,t)=>e==this.active[t]))&&(r=this.active);let i=e.selection||r.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let n=0,r=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;r<t.length&&!t[r].hasResult;)r++;let i=n==e.length,s=r==t.length;if(i||s)return i==s;if(e[n++].result!=t[r++].result)return!1}}(r,this.active)?ih.build(r,t,this.id,this.open,n):this.open&&e.docChanged?this.open.map(e.changes):this.open;!i&&r.every((e=>1!=e.state))&&r.some((e=>e.hasResult()))&&(r=r.map((e=>e.hasResult()?new uh(e.source,0):e)));for(let t of e.effects)t.is(mh)&&(i=i&&i.setSelected(t.value,this.id));return r==this.active&&i==this.open?this:new sh(r,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:oh}}const oh={"aria-autocomplete":"list"};function ah(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}const lh=[];function ch(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class uh{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=ch(e),r=this;n?r=r.handleUserEvent(e,n,t):e.docChanged?r=r.handleChange(e):e.selection&&0!=r.state&&(r=new uh(r.source,0));for(let t of e.effects)if(t.is(dh))r=new uh(r.source,1,t.value?Ku(e.state):-1);else if(t.is(ph))r=new uh(r.source,0);else if(t.is(fh))for(let e of t.value)e.source==r.source&&(r=e);return r}handleUserEvent(e,t,n){return"delete"!=t&&n.activateOnTyping?new uh(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(Ku(e.startState))?new uh(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new uh(this.source,this.state,e.mapPos(this.explicitPos))}}class hh extends uh{constructor(e,t,n,r,i){super(e,2,t),this.result=n,this.from=r,this.to=i}hasResult(){return!0}handleUserEvent(e,t,n){var r;let i=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),o=Ku(e.state);if((this.explicitPos<0?o<=i:o<this.from)||o>s||"delete"==t&&Ku(e.startState)==this.from)return new uh(this.source,"input"==t&&n.activateOnTyping?1:0);let a,l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,n,r){if(!e)return!1;let i=t.sliceDoc(n,r);return"function"==typeof e?e(i,n,r,t):Ju(e,!0).test(i)}(this.result.validFor,e.state,i,s)?new hh(this.source,l,this.result,i,s):this.result.update&&(a=this.result.update(this.result,i,s,new $u(e.state,o,l>=0)))?new hh(this.source,l,a,a.from,null!==(r=a.to)&&void 0!==r?r:Ku(e.state)):new uh(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new uh(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new hh(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const dh=gn.define(),ph=gn.define(),fh=gn.define({map:(e,t)=>e.map((e=>e.map(t)))}),mh=gn.define(),gh=Gt.define({create:()=>sh.start(),update:(e,t)=>e.update(t),provide:e=>[ba.from(e,(e=>e.tooltip)),Io.contentAttributes.from(e,(e=>e.attrs))]});function yh(e,t="option"){return n=>{let r=n.state.field(gh,!1);if(!r||!r.open||Date.now()-r.open.timestamp<75)return!1;let i,s=1;"page"==t&&(i=function(e,t){let n=e.plugin(ma);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}(n,r.open.tooltip))&&(s=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+s*(e?1:-1):e?0:o-1;return a<0?a="page"==t?0:o-1:a>=o&&(a="page"==t?o-1:0),n.dispatch({effects:mh.of(a)}),!0}}class bh{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const vh=Mi.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(gh).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(gh);if(!e.selectionSet&&!e.docChanged&&e.startState.field(gh)==t)return;let n=e.transactions.some((e=>(e.selection||e.docChanged)&&!ch(e)));for(let t=0;t<this.running.length;t++){let r=this.running[t];if(n||r.updates.length+e.transactions.length>50&&Date.now()-r.time>1e3){for(let e of r.context.abortListeners)try{e()}catch(e){Ci(this.view.state,e)}r.context.abortListeners=null,this.running.splice(t--,1)}else r.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let t of e.transactions)"input"==ch(t)?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(gh);for(let e of t.active)1!=e.state||this.running.some((t=>t.active.source==e.source))||this.startQuery(e)}startQuery(e){let{state:t}=this.view,n=Ku(t),r=new $u(t,n,e.explicitPos==n),i=new bh(e,r);this.running.push(i),Promise.resolve(e.source(r)).then((e=>{i.context.aborted||(i.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:ph.of(null)}),Ci(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(eh);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(void 0===i.done)continue;if(this.running.splice(r--,1),i.done){let r=new hh(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(e=i.done.to)&&void 0!==e?e:Ku(i.updates.length?i.updates[0].startState:this.view.state));for(let e of i.updates)r=r.update(e,n);if(r.hasResult()){t.push(r);continue}}let s=this.view.state.field(gh).active.find((e=>e.source==i.active.source));if(s&&1==s.state)if(null==i.done){let e=new uh(i.active.source,0);for(let t of i.updates)e=e.update(t,n);1!=e.state&&t.push(e)}else this.startQuery(s)}t.length&&this.view.dispatch({effects:fh.of(t)})}},{eventHandlers:{blur(){let e=this.view.state.field(gh,!1);e&&e.tooltip&&this.view.state.facet(eh).closeOnBlur&&this.view.dispatch({effects:ph.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:dh.of(!1)})),20),this.composing=0}}}),xh=Io.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),wh=new class extends En{};function Sh(e={}){return[gh,eh.of(e),vh,Ph,xh]}wh.startSide=1,wh.endSide=-1,"object"==typeof navigator&&navigator.userAgent;const kh=[{key:"Ctrl-Space",run:e=>!!e.state.field(gh,!1)&&(e.dispatch({effects:dh.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(gh,!1);return!(!t||!t.active.some((e=>0!=e.state))||(e.dispatch({effects:ph.of(null)}),0))}},{key:"ArrowDown",run:yh(!0)},{key:"ArrowUp",run:yh(!1)},{key:"PageDown",run:yh(!0,"page")},{key:"PageUp",run:yh(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(gh,!1);return!(e.state.readOnly||!t||!t.open||Date.now()-t.open.timestamp<75||t.open.selected<0||(Gu(e,t.open.options[t.open.selected]),0))}}],Ph=Yt.highest(Vo.computeN([eh],(e=>e.facet(eh).defaultKeymap?[kh]:[]))),Th=(e,t)=>"string"==typeof e?{label:e,type:t}:{label:e.label,type:t,detail:e.detail,info:e.info},Oh=async(e,t)=>{const n=await(async e=>{const t=await fetch(`api/editor/lookup/${e}`);return await t.json()})(t);return{from:e,options:[...n.map((e=>Th(e,"class")))],validFor:/^[\w$]*$/}},Ch=async e=>{const t=await(async()=>{const e=await fetch("api/editor/entity/domains");return await e.json()})(),n=await(async()=>{const e=await fetch("api/editor/builtin/functions");return await e.json()})();return N("result",t),{from:e,options:[...n.map((e=>Th(e,"function"))),...t.map((e=>Th(e,"class")))],validFor:/^[\w$]*$/}},Ah=["PropertyName",".","?."],Eh=["TemplateString","LineComment","BlockComment","VariableDefinition","PropertyDefinition"],Nh=(e,t)=>n=>{var r;const i=Al(n.state).resolveInner(n.pos,-1);if(Ah.includes(i.name)&&"MemberExpression"==(null===(r=i.parent)||void 0===r?void 0:r.name)){const e=i.parent.getChild("Expression");if("VariableName"==(null==e?void 0:e.name)){const r=/\./.test(i.name)?i.to:i.from,s=n.state.sliceDoc(e.from,e.to);return t(r,s)}if("MemberExpression"==(null==e?void 0:e.name)){const r=/\./.test(i.name)?i.to:i.from,s=n.state.sliceDoc(e.from,e.to);return t(r,s)}}else{if("VariableName"==i.name)return e(i.from);if(n.explicit&&!Eh.includes(i.name))return e(n.pos)}return null},Mh=Nh(Ch,Oh),Ih=Nh(Ch,Oh),Dh=Zl.define([{tag:Sl.bool,color:"var(--gh2-code-boolean)"},{tag:Sl.string,color:"var(--gh2-code-string)"},{tag:Sl.number,color:"var(--gh2-code-number)"},{tag:Sl.function(Sl.variableName),color:"var(--gh2-code-function)"},{tag:Sl.propertyName,color:"var(--gh2-code-property)"},{tag:Sl.variableName,color:"var(--gh2-code-variable)"}]),Rh=Io.baseTheme({".cm-content":{border:"1px solid #ced4da",borderRadius:"var(--gh2-border-radius)",fontSize:"1rem;",padding:"0.375rem 0.75rem",backgroundColor:"field",color:"fieldtext"}});class Lh{constructor(e,t,n,r,i,s,o,a,l,c=0,u){this.p=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=i,this.score=s,this.buffer=o,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let r=e.parser.context;return new Lh(e,[],t,n,n,0,[],0,r?new _h(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,n=65535&e,{parser:r}=this.p,i=r.dynamicPrecedence(n);if(i&&(this.score+=i),0==t)return this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),void this.reduceContext(n,this.reducePos);let s=this.stack.length-3*(t-1)-(262144&e?6:0),o=this.stack[s-2],a=this.stack[s-1],l=this.bufferBase+this.buffer.length-a;if(n<r.minRepeatTerm||131072&e){let e=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,o,e,l+4,!0)}if(262144&e)this.state=this.stack[s];else{let e=this.stack[s-3];this.state=r.getGoto(e,n,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(n,o)}storeNode(e,t,n,r=4,i=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==n)return;if(e.buffer[r-2]>=t)return void(e.buffer[r-2]=n)}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4])for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,r>4&&(r-=4);this.buffer[i]=e,this.buffer[i+1]=t,this.buffer[i+2]=n,this.buffer[i+3]=r}else this.buffer.push(e,t,n,r)}shift(e,t,n){let r=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let i=e,{parser:s}=this.p;(n>this.pos||t<=s.maxNode)&&(this.pos=n,s.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),this.shiftContext(t,r),t<=s.maxNode&&this.buffer.push(t,r,n,4)}else this.pos=n,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,n,4)}apply(e,t,n){65536&e?this.reduce(e):this.shift(e,t,n)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new Lh(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Fh(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==(65536&n))return!0;if(0==n)return!1;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let r,i=0;i<t.length;i+=2)(r=t[i+1])!=this.state&&this.p.parser.hasAction(r,e)&&n.push(t[i],r);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let r=t[e+1];n.some(((e,t)=>1&t&&e==r))||n.push(t[e],r)}t=n}let n=[];for(let e=0;e<t.length&&n.length<4;e+=2){let r=t[e+1];if(r==this.state)continue;let i=this.split();i.pushState(r,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(t[e],this.pos),i.score-=200,n.push(i)}return n}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(0==(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let n=e>>19,r=65535&e,i=this.stack.length-3*n;if(i<0||t.getGoto(this.stack[i],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new _h(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class _h{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var Bh;!function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(Bh||(Bh={}));class Fh{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class jh{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new jh(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new jh(this.stack,this.pos,this.index)}}class Vh{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const zh=new Vh;class Uh{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=zh,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,r=this.rangeIndex,i=this.pos+e;for(;i<n.from;){if(!r)return null;let e=this.ranges[--r];i-=n.from-e.to,n=e}for(;t<0?i>n.to:i>=n.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];i+=e.from-n.to,n=e}return i}peek(e){let t,n,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(e,1);if(null==r)return-1;if(t=r,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,r=this.range;for(;r.to<=t;)r=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=zh,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(n+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return n}}class Hh{constructor(e,t){this.data=e,this.id=t}token(e,t){!function(e,t,n,r){let i=0,s=1<<r,{parser:o}=n.p,{dialect:a}=o;e:for(;0!=(s&e[i]);){let n=e[i+1];for(let r=i+3;r<n;r+=2)if((e[r+1]&s)>0){let n=e[r];if(a.allows(n)&&(-1==t.token.value||t.token.value==n||o.overrides(n,t.token.value))){t.acceptToken(n);break}}let r=t.next,l=0,c=e[i+2];if(!(t.next<0&&c>l&&65535==e[n+3*c-3])){for(;l<c;){let s=l+c>>1,o=n+s+(s<<1),a=e[o],u=e[o+1];if(r<a)c=s;else{if(!(r>=u)){i=e[o+2],t.advance();continue e}l=s+1}}break}i=e[n+3*c-1]}}(this.data,e,t,this.id)}}function Wh(e,t=Uint16Array){if("string"!=typeof e)return e;let n=null;for(let r=0,i=0;r<e.length;){let s=0;for(;;){let t=e.charCodeAt(r++),n=!1;if(126==t){s=65535;break}t>=92&&t--,t>=34&&t--;let i=t-32;if(i>=46&&(i-=46,n=!0),s+=i,n)break;s*=46}n?n[i++]=s:n=new t(s)}return n}Hh.prototype.contextual=Hh.prototype.fallback=Hh.prototype.extend=!1;const $h="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let qh=null;var Qh,Kh;function Jh(e,t,n){let r=e.cursor(Ea.IncludeAnonymous);for(r.moveTo(t);;)if(!(n<0?r.childBefore(t):r.childAfter(t)))for(;;){if((n<0?r.to<t:r.from>t)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:e.length}}!function(e){e[e.Margin=25]="Margin"}(Qh||(Qh={}));class Gh{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Jh(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Jh(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[r],s=this.start[t]+n.positions[r];if(s>e)return this.nextStart=s,null;if(i instanceof Na){if(s==e){if(s<this.safeFrom)return null;let e=s+i.length;if(e<=this.safeTo){let t=i.prop(ka.lookAhead);if(!t||e+t<this.fragment.to)return i}}this.index[t]++,s+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+i.length}}}class Xh{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new Vh))}getActions(e){let t=0,n=null,{parser:r}=e.p,{tokenizers:i}=r,s=r.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let r=0;r<i.length;r++){if(0==(1<<r&s))continue;let l=i[r],c=this.tokens[r];if((!n||l.fallback)&&((l.contextual||c.start!=e.pos||c.mask!=s||c.context!=o)&&(this.updateCachedToken(c,l,e),c.mask=s,c.context=o),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let r=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!l.extend&&(n=c,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),n||e.pos!=this.stream.end||(n=new Vh,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Vh,{pos:n,p:r}=e;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,n){if(t.token(this.stream.reset(n.pos,e),n),e.value>-1){let{parser:t}=n.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let i=t.specializers[r](this.stream.read(e.start,e.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){0==(1&i)?e.value=i>>1:e.extended=i>>1;break}}}else e.value=0,e.end=Math.min(n.p.stream.end,n.pos+1)}putAction(e,t,n,r){for(let t=0;t<r;t+=3)if(this.actions[t]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}addActions(e,t,n,r){let{state:i}=e,{parser:s}=e.p,{data:o}=s;for(let e=0;e<2;e++)for(let a=s.stateSlot(i,e?2:1);;a+=3){if(65535==o[a]){if(1!=o[a+1]){0==r&&2==o[a+1]&&(r=this.putAction(nd(o,a+2),t,n,r));break}a=nd(o,a+2)}o[a]==t&&(r=this.putAction(nd(o,a+1),t,n,r))}return r}}!function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo"}(Kh||(Kh={}));class Yh{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new Uh(t,r),this.tokens=new Xh(e,this.stream),this.topTerm=e.top[1];let{from:i}=r[0];this.stacks=[Lh.start(this,e.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*e.bufferLength?new Gh(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,r=this.minStackPos,i=this.stacks=[];for(let s=0;s<n.length;s++){let o=n[s];for(;;){if(this.tokens.mainToken=null,o.pos>r)i.push(o);else{if(this.advanceStack(o,i,n))continue;{e||(e=[],t=[]),e.push(o);let n=this.tokens.getMainToken(o);t.push(n.value,n.end)}}break}}if(!i.length){let t=e&&function(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw $h&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,i);if(n)return this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(i.length>e)for(i.sort(((e,t)=>t.score-e.score));i.length>e;)i.pop();i.some((e=>e.reducePos>r))&&this.recovering--}else if(i.length>1)e:for(let e=0;e<i.length-1;e++){let t=i[e];for(let n=e+1;n<i.length;n++){let r=i[n];if(t.sameState(r)||t.buffer.length>500&&r.buffer.length>500){if(!((t.score-r.score||t.buffer.length-r.buffer.length)>0)){i.splice(e--,1);continue e}i.splice(n--,1)}}}this.minStackPos=i[0].pos;for(let e=1;e<i.length;e++)i[e].pos<this.minStackPos&&(this.minStackPos=i[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let r=e.pos,{parser:i}=this,s=$h?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let o=this.fragments.nodeAt(r);o;){let r=this.parser.nodeSet.types[o.type.id]==o.type?i.getGoto(e.state,o.type.id):-1;if(r>-1&&o.length&&(!t||(o.prop(ka.contextHash)||0)==n))return e.useNode(o,r),$h&&console.log(s+this.stackID(e)+` (via reuse of ${i.getName(o.type.id)})`),!0;if(!(o instanceof Na)||0==o.children.length||o.positions[0]>0)break;let a=o.children[0];if(!(a instanceof Na&&0==o.positions[0]))break;o=a}}let o=i.stateSlot(e.state,4);if(o>0)return e.reduce(o),$h&&console.log(s+this.stackID(e)+` (via always-reduce ${i.getName(65535&o)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let o=0;o<a.length;){let l=a[o++],c=a[o++],u=a[o++],h=o==a.length||!n,d=h?e:e.split();if(d.apply(l,c,u),$h&&console.log(s+this.stackID(d)+` (via ${0==(65536&l)?"shift":`reduce of ${i.getName(65535&l)}`} for ${i.getName(c)} @ ${r}${d==e?"":", split"})`),h)return!0;d.pos>r?t.push(d):n.push(d)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return Zh(e,t),!0}}runRecovery(e,t,n){let r=null,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=t[s<<1],l=t[1+(s<<1)],c=$h?this.stackID(o)+" -> ":"";if(o.deadEnd){if(i)continue;if(i=!0,o.restart(),$h&&console.log(c+this.stackID(o)+" (restarted)"),this.advanceFully(o,n))continue}let u=o.split(),h=c;for(let e=0;u.forceReduce()&&e<10&&($h&&console.log(h+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,n));e++)$h&&(h=this.stackID(u)+" -> ");for(let e of o.recoverByInsert(a))$h&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,n);this.stream.end>o.pos?(l==o.pos&&(l++,a=0),o.recoverByDelete(a,l),$h&&console.log(c+this.stackID(o)+` (via recover-delete ${this.parser.getName(a)})`),Zh(o,n)):(!r||r.score<o.score)&&(r=o)}return r}stackToTree(e){return e.close(),Na.build({buffer:jh.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(qh||(qh=new WeakMap)).get(e);return t||qh.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Zh(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(r.pos==e.pos&&r.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}class ed{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}class td extends Qa{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let n=0;n<e.repeatNodeCount;n++)t.push("");let n=Object.keys(e.topRules).map((t=>e.topRules[t][1])),r=[];for(let e=0;e<t.length;e++)r.push([]);function i(e,t,n){r[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=ka[e]);for(let n=1;n<t.length;){let r=t[n++];if(r>=0)i(r,e,t[n++]);else{let s=t[n+-r];for(let o=-r;o>0;o--)i(t[n++],e,s);n++}}}this.nodeSet=new Oa(t.map(((t,i)=>Ta.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:r[i],top:n.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=xa;let s=Wh(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let t=0;t<e.specialized.length;t++)this.specialized[t]=e.specialized[t].term,this.specializers[t]=e.specialized[t].get;this.states=Wh(e.states,Uint32Array),this.data=Wh(e.stateData),this.goto=Wh(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new Hh(s,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let r=new Yh(this,e,t,n);for(let i of this.wrappers)r=i(r,e,t,n);return r}getGoto(e,t,n=!1){let r=this.goto;if(t>=r[0])return-1;for(let i=r[t+1];;){let t=r[i++],s=1&t,o=r[i++];if(s&&n)return o;for(let n=i+(t>>1);i<n;i++)if(r[i]==e)return o;if(s)return-1}}hasAction(e,t){let n=this.data;for(let r=0;r<2;r++)for(let i,s=this.stateSlot(e,r?2:1);;s+=3){if(65535==(i=n[s])){if(1!=n[s+1]){if(2==n[s+1])return nd(n,s+2);break}i=n[s=nd(n,s+2)]}if(i==t||0==i)return nd(n,s+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])return!1;n=nd(this.data,n+2)}if(t==nd(this.data,n+1))return!0}}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=nd(this.data,n+2)}if(0==(1&this.data[n+2])){let e=this.data[n+1];t.some(((t,n)=>1&n&&t==e))||t.push(this.data[n],e)}}return t}overrides(e,t){let n=rd(this.data,this.tokenPrecTable,t);return n<0||rd(this.data,this.tokenPrecTable,e)<n}configure(e){let t=Object.assign(Object.create(td.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let n=e.tokenizers.find((e=>e.from==t));return n?n.to:t}))),e.specializers&&(t.specializers=this.specializers.map((t=>{let n=e.specializers.find((e=>e.from==t));return n?n.to:t}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map((()=>!1));if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(n[e]=!0)}let r=null;for(let e=0;e<t.length;e++)if(!n[e])for(let n,i=this.dialects[t[e]];65535!=(n=this.data[i++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[n]=1;return new ed(e,n,r)}static deserialize(e){return new td(e)}}function nd(e,t){return e[t]|e[t+1]<<16}function rd(e,t,n){for(let r,i=t;65535!=(r=e[i]);i++)if(r==n)return i-t;return-1}const id={__proto__:null,true:14,false:14,instanceof:74,in:76},sd={__proto__:null,async:35,get:37,set:39},od=td.deserialize({version:14,states:"-zO`QPOOOOQO'#Cb'#CbOwQPO'#CfO!sQQO'#CkOOQO'#Cw'#CwO$_QSO'#DkOOQO'#Dl'#DlOOQO'#Dk'#DkQOQPOOO$lQPO'#CxO$qQPO'#DcO%OQPO'#DnO%WQSO'#DnO`QPO'#DnO%bQPO,59QOOQO'#Cp'#CpOOQO'#Cq'#CqOOQO'#Dr'#DrO`QPO'#DrO%gQPO'#ClO%rQQO'#ClO`QPO'#ClO&QQPO'#DoO&YQPO,59VO&pQQO'#ClO&zQQO,59_O`QPO,59_OOQO'#DU'#DUOOQO'#DW'#DWO`QPO,59dO`QPO,59dO`QPO,59dO`QPO,59dO`QPO,59dO`QPO,59dO`QPO,59dO`QPO,59dO`QPO,59dO`QPO,59dO`QPO,59dOOQO'#D['#D[O`QPO,59uO'SQPO'#DaOOQO,59x,59xO`QPO'#DfO'^QPO,59|O'iQSO,59}O`QPO,59}OOQO-E7a-E7aO'sQPO,5:YO'{QSO,5:YOOQO1G.l1G.lO(VQPO,5:^O`QPO,59WOOQO,59W,59WO([QSO,59WO(fQQO'#DdO(pQPO,5:ZOOQO1G.q1G.qO%rQQO,59WOOQO'#Cv'#CvOOQO1G.y1G.yO(xQPO1G.yO*qQSO1G/OO*xQSO1G/OO,sQSO1G/OO,zQSO1G/OO.lQSO1G/OO.|QSO1G/OO1QQSO1G/OO1XQSO1G/OO3SQSO1G/OO3ZQSO1G/OO4oQSO1G/OO5]QSO1G/aO5dQSO'#DwO`QPO'#DwO5nQPO,59{O5sQSO,5:QOOQO-E7d-E7dO6QQSO1G/iO6[QPO1G/tOOQO1G/x1G/xO6dQSO1G.rOOQO,5:O,5:OOOQO-E7b-E7bOOQO1G.r1G.rOOQO7+$e7+$eO`QPO7+${O6nQPO'#DeO6{QPO,5:cO7TQSO,5:cOOQO1G/g1G/gO7_QSO<<HgO7uQSO,5:PO`QPO,5:POOQO-E7c-E7cO8PQPO1G/}O8XQSO1G/k",stateData:"8f~O!]OS!^OSPOSQOS~OSUOTUOVUOXQO^RO!aPO!gSO~OZ]O[YOW!bP~P`OSaOTaOXbOZeOahObdOcdO!d`O!e_O~O]!cP~P!UOXjOhiOiiOmmOnnOonOpnOqoOrpOsqOtqOuqOvqOwrOytO{vO|wO!SzO!hkO!ilO!jxO~O[|O!Z!_XW!_X~P!zOvqO~OZ!POW!VX[!VX~P`O[YOW!bX~O[YOW!bX~P!zOW!TO~Of!VO[`X]`X~OSaOTaOXbO!d`O~O[!YO]!cX~O]![O~OSaOTaOXbO!d`O!e_O~Ob!]Oc!]O~P&_O!d!^O!gSO~OZ!nO!R!kP~P`O[|O!Z!UaW!Ua~OW!Va[!Va~P!zO[YOW!ba~O[YOW!ba~P!zOW!tO~O[`a]`a~P!zO[!WX]!WX~P!UO[!YO]!ca~OW!yO~OXjOhiOiiO!SzO[linliolipliqlirlislitliulivliwliyli{li|li!Zli!hli!ili!jliWli]li!Pli!Rli~Omli~P(}OmmO~P(}OXjOhiOiiOmmOnnOonOpnO!SzO[lirlislitliulivliwliyli{li|li!Zli!hli!ili!jliWli]li!Pli!Rli~Oqli~P+POqoO~P+POXjOhiOiiOmmOnnOonOpnOqoOrpO!SzO[liwliyli{li|li!Zli!hli!ili!jliWli]li!Pli!Rli~Oslitliulivli~P-ROsqOtqOuqOvqO~P-ROXjOhiOiiOmmOnnOonOpnOqoOrpOsqOtqOuqOvqOwrO!SzO[liyli{li|li!Zli!ili!jliWli]li!Pli!Rli~O!hli~P/^O!hkO~P/^OXjOhiOiiOmmOnnOonOpnOqoOrpOsqOtqOuqOvqOwrOytO!SzO!hkO[li{li|li!Zli!jliWli]li!Pli!Rli~O!ili~P1`O!ilO~P1`OXjOhiOiiOmmOnnOonOpnOqoOrpOsqOtqOuqOvqOwrOytO{vO!SzO!hkO!ilO~O[li|li!Zli!jliWli]li!Pli!Rli~P3bO!P!zO~P!zO[!{O!R!kX~P!zO!R#OO~O[!Ya!Z!YaW!Ya~P!zOW!Vi[!Vi~P!zO[YOW!bi~O[`i]`i~P!zOZ#RO[!XX!R!XX~P`O[!{O!R!ka~O[!{O!R!ka~P!zO[}y!Z}yW}y]}y!P}y!R}y~P!zO[!Xa!R!Xa~P!zO[!{O!R!ki~O[!Xi!R!Xi~P!zO!d!a~",goto:")c!lPPPPPP!mPPP!mPPPP!m#[PPP#b#iP!mPP#p#s!mPPPPPPPPPPP$eP$yPP!m%]P!mPP%m&Y&_&m&s&}PPPP'T'^P(})QPP)TPPPP)`!XUOQY]bejmnopqrstuvwyz|!P!V!n!z!{#RQfRR!v!YSdR!YR!]hZaRdh!Y!]R!_i!WXOQY]bejmnopqrstuvwyz|!P!V!n!z!{#RR!_iusT[!O!S!X!h!i!j!k!l!m!p!r!u!}#P#Q#UquT[!O!S!X!j!k!l!m!p!r!u!}#P#Q#UmyT[!O!S!X!l!m!p!r!u!}#P#Q#U!T{T[!O!S!X!a!b!c!d!e!f!g!h!i!j!k!l!m!p!r!u!}#P#Q#UVVObjQZQU!QZ!R!sQ!R[R!s!SQ!ZfR!w!ZQ!|!mS#S!|#TR#T!}Q}TR!q}QWOQ!UbR!`jUTObjQ[QQ!OYQ!S]Q!XeQ!amQ!bnQ!coQ!dpQ!eqQ!frQ!gsQ!htQ!iuQ!jvQ!kwQ!lyQ!mzQ!p|Q!r!PQ!u!VQ!}!nQ#P!zQ#Q!{R#U#RR^QRgRScR!YS!WdhR!x!]R!oz",nodeNames:" LineComment BlockComment Program Number String VariableName BooleanLiteral ] [ ArrayExpression Spread , } { ObjectExpression Property async get set Star PropertyDefinition : MemberExpression . ?. PropertyName PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp ArithOp BitOp CompareOp CompareOp instanceof in CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp CallExpression ) ( ArgList SequenceExpression",maxTerm:73,nodeProps:[["group",-11,4,5,6,7,10,15,23,28,45,48,52,"Expression"],["openedBy",8,"[",13,"{",49,"("],["closedBy",9,"]",14,"}",50,")"]],skippedNodes:[0,1,2],repeatNodeCount:4,tokenData:"4Y~R!VXY$hYZ%]Z[$h]^%]pq$hqr%brs%ust&itu'duv'}vw(Swx(axy)Oyz)Tz{)Y{|)i|})n}!O)i!O!P)s!P!Q+a!Q!R,l!R![-^![!]/u!^!_/|!_!`%b!`!a0c!a!b0v!c!}'d!}#O1]#P#Q1b#Q#R1g#R#S'd#T#o'd#o#p1l#p#q1q#q#r1y$f$g$h$g#BY'd#BY#BZ2O#BZ$IS'd$IS$I_2O$I_$I|'d$I|$I}3m$I}$JO3m$JO$JT'd$JT$JU2O$JU$KV'd$KV$KW2O$KW&FU'd&FU&FV2O&FV?HT'd?HT?HU2O?HU~'d~$mY!]~XY$hZ[$hpq$h$f$g$h#BY#BZ$h$IS$I_$h$JT$JU$h$KV$KW$h&FU&FV$h?HT?HU$h~%bO!^~~%eP!_!`%h~%mPw~!_!`%p~%uOw~~%zUT~OY%uZr%urs&^s#O%u#O#P&c#P~%u~&cOT~~&fPO~%u~&lTtu&{!c!}&{#R#S&{#T#o&{$g~&{~'QU!g~tu&{!Q![&{!c!}&{#R#S&{#T#o&{$g~&{V'kU!dQ!aTtu'd!Q!['d!c!}'d#R#S'd#T#o'd$g~'d~(SOo~~(XP!i~vw([~(aO{~~(fUT~OY(aZw(awx&^x#O(a#O#P(x#P~(a~({PO~(a~)TO!S~~)YO!R~U)aP!eQpSz{)dS)iOmS~)nOq~~)sO[~V)xQhS!O!P*O!Q![*ZR*RP!O!P*UR*ZOZRR*`SSR!Q![*Z!g!h*l#R#S*Z#X#Y*lR*oS{|*{}!O*{!Q![+U#R#S+UR+OQ!Q![+U#R#S+UR+ZQSR!Q![+U#R#S+U~+fQn~z{+l!P!Q,a~+oROz+lz{+x{~+l~+{TOz+lz{+x{!P+l!P!Q,[!Q~+l~,aOQ~~,fQP~OY,aZ~,aR,qXSR!O!P*Z!Q![-^!g!h*l#R#S-^#U#V-z#X#Y*l#b#c-u#c#d.i#l#m/QR-cUSR!O!P*Z!Q![-^!g!h*l#R#S-^#X#Y*l#b#c-uR-zOSRR-}R!Q!R.W!R!S.W#R#S.WR.]SSR!Q!R.W!R!S.W#R#S.W#b#c-uR.lQ!Q!Y.r#R#S.rR.wRSR!Q!Y.r#R#S.r#b#c-uR/TS!Q![/a!c!i/a#R#S/a#T#Z/aR/fTSR!Q![/a!c!i/a#R#S/a#T#Z/a#b#c-uT/|OfP!PS~0RQs~!^!_0X!_!`0^~0^Or~~0cOt~~0hQt~!_!`0^!`!a0n~0sPr~!`!a0X~0{Q!j~!O!P1R!a!b1W~1WOi~~1]O|~~1bOX~~1gOW~~1lOy~~1qO^~~1vP!h~#p#q1W~2OO]~~2Xf!]~!dQ!aTXY$hZ[$hpq$htu'd!Q!['d!c!}'d#R#S'd#T#o'd$f$g$h$g#BY'd#BY#BZ2O#BZ$IS'd$IS$I_2O$I_$JT'd$JT$JU2O$JU$KV'd$KV$KW2O$KW&FU'd&FU&FV2O&FV?HT'd?HT?HU2O?HU~'d~3vU!^~!dQ!aTtu'd!Q!['d!c!}'d#R#S'd#T#o'd$g~'d",tokenizers:[0,1,2],topRules:{Program:[0,3]},specialized:[{term:63,get:e=>id[e]||-1},{term:66,get:e=>sd[e]||-1}],tokenPrec:1077}),ad=Cl.define({parser:od.configure({props:[$l.add({Application:function({closing:e,align:t=!0,units:n=1}){return r=>Xl(r,t,n,e)}({closing:")",align:!1})}),Yl.add({Application:function(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null}}),el({Identifier:Sl.variableName,Boolean:Sl.bool,String:Sl.string,Number:Sl.number,BooleanLiteral:Sl.bool,VariableName:Sl.variableName,PropertyName:Sl.propertyName,MemberExpression:Sl.propertyName,"( )":Sl.paren,"[ ]":Sl.squareBracket,", ;":Sl.separator,"CallExpression/VariableName":Sl.function(Sl.variableName),"CallExpression/MemberExpression/PropertyName":Sl.function(Sl.propertyName)})]}),languageData:{commentTokens:{line:";"}}}),ld=({value:t,onChange:n,mode:r})=>{const i=(0,e.useRef)(null);let s;(0,e.useEffect)((()=>(s&&s.destroy(),i.current&&(s=new Io({doc:t,extensions:[Wu,new Fl(ad),Sh({override:["entities"===r?Mh:Ih]}),rc(Dh,{fallback:!1}),o,Cn.transactionFilter.of((e=>e.newDoc.lines>1?[]:[e])),Rh],parent:i.current})),()=>{s&&s.destroy()})),[i]);const o=Io.updateListener.of((e=>{if(e.docChanged){const t=e.state.doc.toString();n&&n(t)}}));return(0,Ze.jsx)("div",{ref:i})},cd=({label:e,name:t,description:n,control:r,type:i,mode:s})=>(0,Ze.jsxs)("div",{className:"form-row",children:[(0,Ze.jsxs)("label",{htmlFor:t,className:"form-label",children:[e," ",i&&(0,Ze.jsxs)("div",{className:"form-label-type",children:["Type: ",i]})]}),(0,Ze.jsx)(le,{name:t,control:r,render:({field:{onChange:e,value:t,name:n}})=>(0,Ze.jsx)(ld,{value:t,name:n,onChange:e,mode:s})}),n&&(0,Ze.jsx)("div",{className:"form-desc",children:n})]});function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ud(Object(n),!0).forEach((function(t){dd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const pd=({name:e,label:t,options:n,hasEmptyOption:r,control:i})=>(0,Ze.jsxs)("div",{className:"form-row",children:[(0,Ze.jsx)("label",{htmlFor:e,className:"form-label",children:t}),(0,Ze.jsx)(le,{control:i,name:e,render:({field:t})=>(0,Ze.jsxs)("select",hd(hd({className:"form-select",id:e},t),{},{children:[r&&(0,Ze.jsx)("option",{value:""}),n&&n.map((e=>"string"==typeof e?(0,Ze.jsx)("option",{value:e,children:e},e):(0,Ze.jsx)("option",{value:e.value,children:e.label},e.value)))]}))})]});function fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function md(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fd(Object(n),!0).forEach((function(t){gd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const yd=({name:e,label:t,register:n,required:r})=>(0,Ze.jsxs)("div",{className:"form-row",children:[(0,Ze.jsx)("label",{htmlFor:e,className:"form-label",children:t}),(0,Ze.jsx)("select",md(md({multiple:!0,className:"form-select",id:e},n(e,{required:r})),{},{children:Object.keys(M).map((e=>(0,Ze.jsx)("option",{value:e,children:e},e)))}))]});function bd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bd(Object(n),!0).forEach((function(t){xd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wd=({device:t,onDone:n})=>{const{control:r,register:i,handleSubmit:s,formState:{errors:o},reset:a,watch:l,setValue:c}=function(t={}){const n=e.useRef(),[r,i]=e.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});n.current?n.current.control._options=t:n.current={...Ke(t),formState:r};const s=n.current.control,o=e.useCallback((e=>{ee(e,s._proxyFormState,!0)&&(s._formState={...s._formState,...e},i({...s._formState}))}),[s]);return re({subject:s._subjects.state,callback:o}),e.useEffect((()=>{s._stateFlags.mount||(s._proxyFormState.isValid&&s._updateValid(),s._stateFlags.mount=!0),s._stateFlags.watch&&(s._stateFlags.watch=!1,s._subjects.state.next({})),s._removeUnmounted()})),n.current.formState=Y(r,s._proxyFormState),n.current}({}),u=(0,e.useRef)(null),[h,d]=(0,e.useState)(),[p,f]=(0,e.useState)(),[m,g]=(0,e.useState)(),[y,b]=(0,e.useState)(),[v,x]=(0,e.useState)(),w=l("deviceType"),S=l("traits"),k=l("name"),P=e=>{E("onSubmit",e),(t&&t.id?(async(e,t)=>{await fetch(`api/device/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})})(t.id,e):(async e=>{await fetch("api/device",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})})(e)).then((()=>{a(),n&&n()}))},T=e=>{var t;e&&h&&(async e=>{await fetch(`api/device/${e}`,{method:"DELETE"})})(h).then((()=>{a(),n&&n()})),null===(t=u.current)||void 0===t||t.close()},D=()=>{d(void 0)};return(0,e.useEffect)((()=>{(async()=>(await fetch("api/areas")).json())().then((e=>{N("areas",e),f(e.map((e=>e.name)))}))}),[]),(0,e.useEffect)((()=>{a({})}),[a]),(0,e.useEffect)((()=>{const e=I.find((e=>e.type===w));e?e.type!==(null==t?void 0:t.deviceType)&&c("traits",e.traits):c("traits",[])}),[w,c,t]),(0,e.useEffect)((()=>{if(S){const e=S.reduce(((e,t)=>(N("trate",t),vd(vd({},e),M[t].states))),{online:{type:"boolean",required:!0,hint:"If the device is online"}}),t=S.reduce(((e,t)=>vd(vd({},e),M[t].attributes)),{}),n=S.reduce(((e,t)=>[...e,...M[t].commands]),[]);g(e),x(t),b(n)}else g(void 0),x(void 0),b(void 0)}),[S]),(0,e.useEffect)((()=>{E("Device.useEffect",t),a(t||{},{keepValues:!1})}),[t,a]),o&&Object.keys(o).length&&((e,...t)=>{C(O.red(A(),"ERROR:",e),...t)})("errors",o),(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsxs)("form",{className:"device-form",onSubmit:s(P),children:[(0,Ze.jsx)("h2",{children:k}),(0,Ze.jsxs)("section",{className:"device-section",children:[(0,Ze.jsx)("h3",{children:"Detail"}),(0,Ze.jsx)(it,{label:"Id",name:"id",hidden:!0,register:i}),(0,Ze.jsx)(it,{label:"Name",name:"name",register:i,required:!0}),(0,Ze.jsx)(pd,{label:"Room",name:"room",control:r,options:p,hasEmptyOption:!0}),(0,Ze.jsx)(lt,{label:"Device Type",name:"deviceType",register:i,required:!0}),(0,Ze.jsx)(yd,{label:"Traits",name:"traits",register:i})]}),(0,Ze.jsxs)("section",{className:"device-section",children:[(0,Ze.jsx)("h3",{children:"States"}),m&&Object.keys(m).map((e=>(0,Ze.jsx)(cd,{label:Je(e),name:`states.${e}`,description:m[e].hint,control:r,type:m[e].type,mode:"entities"},e)))]}),(0,Ze.jsxs)("section",{className:"device-section",children:[(0,Ze.jsx)("h3",{children:"Attributes"}),v&&Object.keys(v).map((e=>(0,Ze.jsx)(cd,{label:Je(e),name:`attributes.${e}`,description:v[e].hint,control:r,type:v[e].type,mode:"entities"},e)))]}),(0,Ze.jsxs)("section",{className:"device-section",children:[(0,Ze.jsx)("h3",{children:"Commands"}),y&&y.map((e=>(0,Ze.jsx)(cd,{label:Je(e.command),name:`commands.${e.command}`,description:"desc",control:r,type:"type",mode:"services"},e.command)))]}),o.name&&(0,Ze.jsx)("span",{children:"This field is required"}),o.deviceType&&(0,Ze.jsx)("span",{children:"This field is required"}),(0,Ze.jsxs)("div",{className:"form-actions",children:[(0,Ze.jsx)(et,{value:"Save",icon:"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",type:"submit",isPrimary:!0,onClick:s(P)}),(0,Ze.jsx)(et,{value:"Cancel",icon:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",type:"reset",onClick:()=>{a(),n&&n()}}),t&&(0,Ze.jsx)(et,{value:"Delete",icon:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",onClick:()=>{var e,n;e=null==t?void 0:t.id,d(e),null===(n=u.current)||void 0===n||n.showModal()}})]})]}),(0,Ze.jsxs)("dialog",{onCancel:()=>D(),onClose:()=>D(),ref:u,className:"device-delete-dialog",children:[(0,Ze.jsx)("p",{children:"Are you Sure"}),(0,Ze.jsxs)("div",{className:"form-actions",children:[(0,Ze.jsx)("input",{className:"form-action primary",type:"button",value:"No",onClick:()=>T(!1)}),(0,Ze.jsx)("input",{className:"form-action",type:"button",value:"Yes",onClick:()=>T(!0)})]})]})]})},Sd=()=>{const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}},kd=()=>{const[t,n]=(0,e.useState)(Sd());return(0,e.useEffect)((()=>{function e(){n(Sd())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),t},Pd=({value:e})=>"number"==typeof e?(0,Ze.jsx)("div",{className:"format-number",children:e}):"boolean"==typeof e?(0,Ze.jsx)("div",{className:"format-boolean",children:e?"true":"false"}):"string"==typeof e?(0,Ze.jsx)("div",{className:"format-string",children:e}):(0,Ze.jsx)("div",{className:"format-unknown",children:e});var Td,Od=new Uint8Array(16);function Cd(){if(!Td&&!(Td="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Td(Od)}const Ad=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ed=function(e){return"string"==typeof e&&Ad.test(e)};for(var Nd=[],Md=0;Md<256;++Md)Nd.push((Md+256).toString(16).substr(1));const Id=function(e,t,n){var r=(e=e||{}).random||(e.rng||Cd)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Nd[e[t+0]]+Nd[e[t+1]]+Nd[e[t+2]]+Nd[e[t+3]]+"-"+Nd[e[t+4]]+Nd[e[t+5]]+"-"+Nd[e[t+6]]+Nd[e[t+7]]+"-"+Nd[e[t+8]]+Nd[e[t+9]]+"-"+Nd[e[t+10]]+Nd[e[t+11]]+Nd[e[t+12]]+Nd[e[t+13]]+Nd[e[t+14]]+Nd[e[t+15]]).toLowerCase();if(!Ed(n))throw TypeError("Stringified UUID is invalid");return n}(r)},Dd=({children:t,onClose:n,onOk:r,open:i})=>{const s=(0,e.useRef)(null);(0,e.useEffect)((()=>{s.current&&i&&s.current.showModal()}),[i]);const o=()=>{var e;n&&n(),null===(e=s.current)||void 0===e||e.close()};return(0,Ze.jsxs)("dialog",{onCancel:()=>o(),onClose:()=>o(),ref:s,className:"device-delete-dialog",children:[t,(0,Ze.jsxs)("div",{className:"form-actions",children:[(0,Ze.jsx)(et,{value:"No",isPrimary:!0,onClick:()=>o()}),(0,Ze.jsx)(et,{value:"Yes",onClick:()=>{return r&&r(),void(null===(e=s.current)||void 0===e||e.close());var e}})]})]})},Rd=({device:t,deviceStats:n,onSelect:r})=>{const[i,s]=(0,e.useState)();return(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)("a",{href:"#",className:"panel-link",onClick:e=>((e,t)=>{e.preventDefault(),r&&r(t)})(e,t),children:(0,Ze.jsx)("div",{className:"panel-header",children:t.name})}),n&&(0,Ze.jsx)("ul",{className:"panel-stats",children:Object.keys(n).map((e=>(0,Ze.jsxs)("li",{className:"panel-stats-item",children:[Je(e),":"," ",(0,Ze.jsx)(Pd,{value:n[e]})]},`${t.id}-${e}`)))}),(0,Ze.jsx)("div",{className:"form-actions",children:(0,Ze.jsx)(et,{icon:Ge,label:"Sync",onClick:()=>{(async e=>{const t="string"==typeof e?[e]:e;return(await fetch("api/fulfillment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestId:Id(),inputs:[{intent:"action.devices.QUERY",payload:{devices:t.map((e=>({id:e})))}}]})})).json()})(t.id).then((e=>s(e)))}})}),(0,Ze.jsxs)(Dd,{open:i,onClose:()=>s(void 0),children:[(0,Ze.jsxs)("pre",{children:[JSON.stringify(i||{},null,2)," "]})," "]})]})},Ld=({devices:t,devicesStatus:n})=>{const[r,i]=(0,e.useState)(),[s,o]=(0,e.useState)(!1),{width:a}=kd(),l=r||s,c=!(l&&a<1e3);return(0,Ze.jsxs)("div",{className:"devices-list",children:[c&&(0,Ze.jsxs)("div",{className:"devices-list-row",children:[(0,Ze.jsx)(et,{onClick:()=>(i(void 0),void o(!0)),icon:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z",value:"Add New"}),(0,Ze.jsx)("div",{className:"device-grid",children:(t||[]).map((e=>(0,Ze.jsx)("div",{className:"device-grid-item",children:(0,Ze.jsx)(Rd,{device:e,deviceStats:n&&n[e.id],onSelect:e=>(e=>{E(`selected ${e.name}`),o(!1),i(e)})(e)})},e.id)))})]}),l&&(0,Ze.jsx)("div",{className:"devices-list-row",children:(0,Ze.jsx)(wd,{device:r,onDone:()=>(i(void 0),void o(!1))})})]})},_d=()=>{const[t,n]=(0,e.useState)();return(0,Ze.jsxs)("div",{className:"form-actions",children:[(0,Ze.jsx)(et,{icon:Ge,value:"SYNC",onClick:()=>{(async()=>(await fetch("api/fulfillment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestId:"ff36a3cc-ec34-11e6-b1a0-64510650abcf",inputs:[{intent:"action.devices.SYNC"}]})})).json())().then((e=>{n(e)}))}}),(0,Ze.jsx)(et,{icon:"M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.43 19.12,14.63 17.79,15L19.25,16.44C20.88,15.61 22,13.95 22,12A5,5 0 0,0 17,7M16,11H13.81L15.81,13H16V11M2,4.27L5.11,7.38C3.29,8.12 2,9.91 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12C3.9,10.41 5.11,9.1 6.66,8.93L8.73,11H8V13H10.73L13,15.27V17H14.73L18.74,21L20,19.74L3.27,3L2,4.27Z",value:"DISCONNECT",onClick:()=>{(async()=>(await fetch("api/fulfillment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestId:"ff36a3cc-ec34-11e6-b1a0-64510650abcf",inputs:[{intent:"action.devices.DISCONNECT"}]})})).json())().then((e=>{n(e)}))}}),(0,Ze.jsx)(et,{icon:"M16.5,5.5A2,2 0 0,0 18.5,3.5A2,2 0 0,0 16.5,1.5A2,2 0 0,0 14.5,3.5A2,2 0 0,0 16.5,5.5M12.9,19.4L13.9,15L16,17V23H18V15.5L15.9,13.5L16.5,10.5C17.89,12.09 19.89,13 22,13V11C20.24,11.03 18.6,10.11 17.7,8.6L16.7,7C16.34,6.4 15.7,6 15,6C14.7,6 14.5,6.1 14.2,6.1L9,8.3V13H11V9.6L12.8,8.9L11.2,17L6.3,16L5.9,18L12.9,19.4M4,9A1,1 0 0,1 3,8A1,1 0 0,1 4,7H7V9H4M5,5A1,1 0 0,1 4,4A1,1 0 0,1 5,3H10V5H5M3,13A1,1 0 0,1 2,12A1,1 0 0,1 3,11H7V13H3Z",value:"EXECUTE",onClick:()=>{(async()=>(await fetch("api/fulfillment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestId:"ff36a3cc-ec34-11e6-b1a0-64510650abcf",inputs:[{intent:"action.devices.EXECUTE",payload:{commands:[{devices:[{id:"123",customData:{fooValue:74,barValue:!0,bazValue:"sheepdip"}},{id:"456",customData:{fooValue:36,barValue:!1,bazValue:"moarsheep"}}],execution:[{command:"action.devices.commands.OnOff",params:{on:!0}}]}]}}]})})).json())().then((e=>{n(e)}))}}),(0,Ze.jsxs)(Dd,{open:t,onClose:()=>n(void 0),children:[(0,Ze.jsxs)("pre",{children:[JSON.stringify(t||{},null,2)," "]})," "]})]})},Bd=window.config||{};E("Starting Info",{config:Bd,location});const Fd=()=>{const[t,n]=(0,e.useState)(),[r,i]=(0,e.useState)([]),s=(0,e.useRef)(null),{width:o}=kd(),{lastJsonMessage:a,readyState:l}=(0,D.ZP)(Bd.socketUrl,{shouldReconnect:()=>!0,reconnectAttempts:10,reconnectInterval:3e3});(0,e.useEffect)((()=>{if(null!==a){const e=a;E("msg",e),"devices-status"===e.type?n(e.status):"devices"===e.type&&i(e.devices)}}),[a]);const c={[D.kQ.CONNECTING]:"Connecting",[D.kQ.OPEN]:"Open",[D.kQ.CLOSING]:"Closing",[D.kQ.CLOSED]:"Closed",[D.kQ.UNINSTANTIATED]:"Uninstantiated"}[l];return(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsxs)("h1",{children:[location.hostname," ",o," ",c]}),(0,Ze.jsx)(Ld,{devices:r,devicesStatus:t}),(0,Ze.jsx)("input",{type:"file",style:{display:"none"},ref:s,onChange:e=>(e=>{N("onImport",e);const t=e.target.files&&e.target.files[0];if(t){const e=new FileReader;e.onload=async e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.result;fetch("api/import",{method:"POST",body:n,headers:{"Content-Type":"application/json"}})},e.readAsText(t)}})(e)}),(0,Ze.jsxs)("div",{className:"form-actions mb-8",children:[(0,Ze.jsx)(et,{icon:"M14,12L10,8V11H2V13H10V16M20,18V6C20,4.89 19.1,4 18,4H6A2,2 0 0,0 4,6V9H6V6H18V18H6V15H4V18A2,2 0 0,0 6,20H18A2,2 0 0,0 20,18Z",value:"Import",onClick:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.click()}}),(0,Ze.jsx)(et,{icon:"M23,12L19,8V11H10V13H19V16M1,18V6C1,4.89 1.9,4 3,4H15A2,2 0 0,1 17,6V9H15V6H3V18H15V15H17V18A2,2 0 0,1 15,20H3A2,2 0 0,1 1,18Z",value:"Export",onClick:()=>{window.open("api/export")}})]}),(0,Ze.jsx)(_d,{})]})},jd=document.getElementById("root");jd&&(0,t.s)(jd).render((0,Ze.jsx)(e.StrictMode,{children:(0,Ze.jsx)(Fd,{})}))})();
//# sourceMappingURL=main.mjs.map